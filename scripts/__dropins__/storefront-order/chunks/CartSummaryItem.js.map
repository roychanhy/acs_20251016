{"version":3,"file":"CartSummaryItem.js","sources":["../../node_modules/@adobe-commerce/elsie/src/icons/WarningWithCircle.svg","/@dropins/storefront-order/src/components/OrderProductListContent/CartSummaryItem.tsx"],"sourcesContent":["import * as React from \"react\";\nconst SvgWarningWithCircle = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M0.75 12C0.75 5.78421 5.78421 0.75 12 0.75C18.2158 0.75 23.25 5.78421 23.25 12C23.25 18.2158 18.2158 23.25 12 23.25C5.78421 23.25 0.75 18.2158 0.75 12Z\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M11.75 5.88423V4.75H12.25V5.88423L12.0485 13.0713H11.9515L11.75 5.88423ZM11.7994 18.25V16.9868H12.2253V18.25H11.7994Z\", stroke: \"currentColor\" }));\nexport default SvgWarningWithCircle;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FunctionComponent } from 'preact';\nimport {\n  CartItem,\n  Image,\n  Price,\n  Icon,\n  Incrementer,\n} from '@adobe-commerce/elsie/components';\nimport { useCallback } from 'preact/hooks';\nimport { WarningWithCircle } from '@adobe-commerce/elsie/icons';\nimport { CartSummaryItemProps } from '@/order/types';\nimport { Slot } from '@adobe-commerce/elsie/lib';\nimport { OrderSummarySkeleton } from '../OrderLoaders';\nimport { OrderItemModel } from '@/order/data/models';\n\nexport const CartSummaryItem: FunctionComponent<CartSummaryItemProps> = ({\n  slots,\n  placeholderImage = '',\n  loading,\n  product,\n  itemType,\n  taxConfig,\n  translations,\n  disabledIncrementer,\n  onQuantity,\n  showConfigurableOptions,\n  routeProductDetails,\n}) => {\n  const { taxExcluded, taxIncluded } = taxConfig;\n\n  const renderDefaultPrice = useCallback(\n    (amount: number, currency: string, configs?: any) => {\n      return (\n        <Price\n          amount={amount}\n          currency={currency}\n          weight=\"normal\"\n          {...configs}\n        />\n      );\n    },\n    []\n  );\n\n  const renderImages = useCallback(\n    (product: OrderItemModel) => {\n      const label = product?.productName ?? '';\n\n      const defaultImageProps = {\n        title: label,\n        src: product?.product?.thumbnail?.url ?? placeholderImage,\n        alt: label,\n        width: 90,\n        height: 120,\n        loading: 'lazy',\n      } as const;\n\n      return (\n        <Slot\n          slotTag=\"span\"\n          contentTag=\"span\"\n          data-testid={`cartSummaryItemImage-${product.id}`}\n          name=\"CartSummaryItemImage\"\n          slot={slots?.CartSummaryItemImage}\n          context={{\n            data: product,\n            defaultImageProps,\n          }}\n        >\n          <Image {...defaultImageProps} />\n        </Slot>\n      );\n    },\n    [placeholderImage, slots?.CartSummaryItemImage]\n  );\n\n  if (!product) return <OrderSummarySkeleton />;\n\n  let configPrice = {};\n  const isCancelled = itemType === 'cancelled';\n  const inStock = product?.product?.stockStatus?.includes('IN_STOCK');\n  const giftCard = product?.giftCard;\n  const renderQuantity =\n    product.totalQuantity > 1 ? { quantity: product.totalQuantity } : {};\n  const isDiscounted = product.discounted;\n  const { includeAndExcludeTax, includeTax, excludeTax } =\n    product.taxCalculations;\n  const totalQuantity = product?.totalQuantity;\n  const configurations = {\n    ...(product?.configurableOptions || {}),\n    ...(product?.bundleOptions || {}),\n    ...(giftCard?.senderName\n      ? { [translations.sender]: giftCard?.senderName }\n      : {}),\n    ...(giftCard?.senderEmail\n      ? { [translations.sender]: giftCard?.senderEmail }\n      : {}),\n    ...(giftCard?.senderName\n      ? { [translations.sender]: giftCard?.senderName }\n      : {}),\n    ...(giftCard?.recipientEmail\n      ? { [translations.recipient]: giftCard?.recipientEmail }\n      : {}),\n    ...(giftCard?.message ? { [translations.message]: giftCard?.message } : {}),\n    ...(product?.downloadableLinks\n      ? {\n          [`${product?.downloadableLinks?.count} ${translations.downloadableCount}`]:\n            product?.downloadableLinks?.result,\n        }\n      : {}),\n  };\n\n  // Admin panel configuration - Sales -> Tax -> Order, Invoices, Credit Memos Display Settings\n  // GraphQL field - orders_invoices_credit_memos_display_price field converted to taxIncluded & taxExcluded booleans\n  if (taxIncluded && taxExcluded) {\n    // Including and Excluding Tax option (value \"3\" in GraphQL)\n\n    const singleItemPrice = renderDefaultPrice(\n      includeAndExcludeTax.originalPrice.value,\n      includeAndExcludeTax.originalPrice.currency\n    );\n\n    const totalOriginalPrice = renderDefaultPrice(\n      includeAndExcludeTax.baseOriginalPrice.value * totalQuantity,\n      includeAndExcludeTax.baseOriginalPrice.currency,\n      {\n        variant: product.discounted ? 'strikethrough' : 'default',\n        weight: 'bold',\n      }\n    );\n\n    const totalDiscountedPrice = renderDefaultPrice(\n      includeAndExcludeTax.baseDiscountedPrice.value * totalQuantity,\n      includeAndExcludeTax.baseDiscountedPrice.currency,\n      { sale: true, weight: 'bold' }\n    );\n\n    const totalExcludingTax = renderDefaultPrice(\n      includeAndExcludeTax.baseExcludingTax.value * totalQuantity,\n      includeAndExcludeTax.baseExcludingTax.currency,\n      { weight: 'bold' }\n    );\n\n    configPrice = {\n      taxExcluded: true,\n      taxIncluded: undefined,\n      price: singleItemPrice,\n      total: (\n        <>\n          {totalOriginalPrice}\n          {product.discounted ? totalDiscountedPrice : null}\n        </>\n      ),\n      totalExcludingTax,\n    };\n  } else if (!taxIncluded && taxExcluded) {\n    // Excluding Tax option (value \"1\" in GraphQL)\n\n    const singleItemPrice = renderDefaultPrice(\n      excludeTax.originalPrice.value,\n      excludeTax.originalPrice.currency\n    );\n\n    const totalOriginalPrice = renderDefaultPrice(\n      excludeTax.baseOriginalPrice.value * totalQuantity,\n      excludeTax.baseOriginalPrice.currency,\n      {\n        variant: isDiscounted ? 'strikethrough' : 'default',\n        weight: 'bold',\n      }\n    );\n\n    const totalDiscountedPrice = renderDefaultPrice(\n      excludeTax.baseDiscountedPrice.value * totalQuantity,\n      excludeTax.baseDiscountedPrice.currency,\n      {\n        sale: true,\n        weight: 'bold',\n      }\n    );\n\n    const totalExcludingTax = renderDefaultPrice(\n      excludeTax.baseExcludingTax.value * totalQuantity,\n      excludeTax.baseExcludingTax.currency,\n      { weight: 'bold' }\n    );\n\n    configPrice = {\n      taxExcluded: undefined,\n      taxIncluded: undefined,\n      price: singleItemPrice,\n      total: (\n        <>\n          {totalOriginalPrice}\n          {isDiscounted ? totalDiscountedPrice : null}\n        </>\n      ),\n      totalExcludingTax,\n    };\n  } else if (taxIncluded && !taxExcluded) {\n    // Including Tax option (value \"2\" in GraphQL)\n\n    const singleItemPrice = renderDefaultPrice(\n      includeTax.singleItemPrice.value,\n      includeTax.singleItemPrice.currency\n    );\n\n    const totalOriginalPrice = renderDefaultPrice(\n      includeTax.baseOriginalPrice.value * totalQuantity,\n      includeTax.baseOriginalPrice.currency,\n      {\n        variant: isDiscounted ? 'strikethrough' : 'default',\n        weight: 'bold',\n      }\n    );\n\n    const totalDiscountedPrice = renderDefaultPrice(\n      includeTax.baseDiscountedPrice.value * totalQuantity,\n      includeTax.baseDiscountedPrice.currency,\n      { sale: true, weight: 'bold' }\n    );\n\n    configPrice = {\n      taxExcluded: undefined,\n      taxIncluded: true,\n      price: singleItemPrice,\n      total: (\n        <>\n          {totalOriginalPrice}\n          {isDiscounted ? totalDiscountedPrice : null}\n        </>\n      ),\n    };\n  }\n\n  return (\n    <CartItem\n      loading={loading}\n      alert={\n        isCancelled && !inStock ? (\n          <span>\n            <Icon source={WarningWithCircle} />\n            {translations.outOfStock}\n          </span>\n        ) : (\n          <></>\n        )\n      }\n      configurations={\n        showConfigurableOptions?.(configurations) ?? configurations\n      }\n      title={\n        routeProductDetails ? (\n          <a\n            data-testid=\"product-name\"\n            className='cart-summary-item__title'\n            href={routeProductDetails(product)}\n          >\n            {product?.productName}\n          </a>\n        ) : (\n          <div\n            data-testid=\"product-name\"\n            className='cart-summary-item__title'\n          >\n            {product?.productName}\n          </div>\n        )\n      }\n      sku={<div>{product?.product?.sku}</div>}\n      {...renderQuantity}\n      image={\n        routeProductDetails ? (\n          <a href={routeProductDetails(product)}>{renderImages(product)}</a>\n        ) : (\n          renderImages(product)\n        )\n      }\n      {...configPrice}\n      footer={\n        <>\n          {onQuantity && !disabledIncrementer ? (\n            <Incrementer\n              value={1}\n              min={1}\n              max={product?.totalQuantity}\n              onValue={(value) => onQuantity?.(Number(value))}\n              name=\"quantity\"\n              data-testid=\"returnIncrementer\"\n              readonly\n            />\n          ) : undefined}\n\n          <Slot\n            data-testid=\"Footer\"\n            name=\"Footer\"\n            slot={slots?.Footer}\n            context={{ item: product }}\n          />\n        </>\n      }\n    />\n  );\n};\n"],"names":["SvgWarningWithCircle","props","React","CartSummaryItem","slots","placeholderImage","loading","product","itemType","taxConfig","translations","disabledIncrementer","onQuantity","showConfigurableOptions","routeProductDetails","taxExcluded","taxIncluded","renderDefaultPrice","useCallback","amount","currency","configs","jsx","Price","renderImages","label","defaultImageProps","Slot","Image","OrderSummarySkeleton","configPrice","isCancelled","inStock","_b","_a","giftCard","renderQuantity","isDiscounted","includeAndExcludeTax","includeTax","excludeTax","totalQuantity","configurations","_c","_d","singleItemPrice","totalOriginalPrice","totalDiscountedPrice","totalExcludingTax","jsxs","Fragment","CartItem","Icon","WarningWithCircle","_e","Incrementer","value"],"mappings":"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","x_google_ignoreList":[0]}