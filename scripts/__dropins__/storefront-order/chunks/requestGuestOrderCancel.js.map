{"version":3,"file":"requestGuestOrderCancel.js","sources":["/@dropins/storefront-order/src/api/cancelOrder/graphql/cancelOrderMutation.ts","/@dropins/storefront-order/src/api/cancelOrder/cancelOrder.ts","/@dropins/storefront-order/src/api/requestGuestOrderCancel/graphql/requestGuestOrderCancelMutation.ts","/@dropins/storefront-order/src/api/requestGuestOrderCancel/requestGuestOrderCancel.ts"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport {\n  ADDRESS_FRAGMENT,\n  ORDER_SUMMARY_FRAGMENT,\n  ORDER_ITEM_DETAILS_FRAGMENT,\n  PRODUCT_DETAILS_FRAGMENT,\n  GIFT_CARD_DETAILS_FRAGMENT,\n  PRICE_DETAILS_FRAGMENT,\n  BUNDLE_ORDER_ITEM_DETAILS_FRAGMENT,\n  ORDER_ITEM_FRAGMENT,\n  GIFT_WRAPPING_FRAGMENT,\n  GIFT_MESSAGE_FRAGMENT,\n} from '@/order/api/fragments';\n\nexport const CANCEL_ORDER_MUTATION = /* GraphQL */ `\n  mutation CANCEL_ORDER_MUTATION($orderId: ID!, $reason: String!) {\n    cancelOrder(input: { order_id: $orderId, reason: $reason }) {\n      error\n      order {\n        email\n        available_actions\n        status\n        number\n        id\n        order_date\n        carrier\n        shipping_method\n        is_virtual\n        applied_coupons {\n          code\n        }\n        shipments {\n          id\n          number\n          tracking {\n            title\n            number\n            carrier\n          }\n          comments {\n            message\n            timestamp\n          }\n          items {\n            id\n            product_sku\n            product_name\n            order_item {\n              ...ORDER_ITEM_DETAILS_FRAGMENT\n              ... on GiftCardOrderItem {\n                ...GIFT_CARD_DETAILS_FRAGMENT\n                product {\n                  ...PRODUCT_DETAILS_FRAGMENT\n                }\n              }\n            }\n          }\n        }\n        payment_methods {\n          name\n          type\n        }\n        shipping_address {\n          ...ADDRESS_FRAGMENT\n        }\n        billing_address {\n          ...ADDRESS_FRAGMENT\n        }\n        items {\n          ...ORDER_ITEM_FRAGMENT\n        }\n        total {\n          ...ORDER_SUMMARY_FRAGMENT\n        }\n      }\n    }\n  }\n  ${PRODUCT_DETAILS_FRAGMENT}\n  ${PRICE_DETAILS_FRAGMENT}\n  ${GIFT_CARD_DETAILS_FRAGMENT}\n  ${ORDER_ITEM_DETAILS_FRAGMENT}\n  ${BUNDLE_ORDER_ITEM_DETAILS_FRAGMENT}\n  ${ORDER_SUMMARY_FRAGMENT}\n  ${ADDRESS_FRAGMENT}\n  ${ORDER_ITEM_FRAGMENT}\n  ${GIFT_WRAPPING_FRAGMENT}\n  ${GIFT_MESSAGE_FRAGMENT}\n`;\n","import { fetchGraphQl } from '@/order/api';\nimport { CANCEL_ORDER_MUTATION } from './graphql/cancelOrderMutation';\nimport { handleFetchError } from '@/order/lib/fetch-error';\nimport { transformOrderData } from '@/order/data/transforms';\n\nexport const cancelOrder = async (\n  orderId: string,\n  reason: string,\n  onSuccess: Function,\n  onError: Function\n): Promise<void | null | undefined> => {\n  if (!orderId) throw new Error('No order ID found');\n  if (!reason) throw new Error('No reason found');\n\n  return fetchGraphQl(CANCEL_ORDER_MUTATION, {\n    variables: {\n      orderId,\n      reason,\n    },\n  })\n    .then(({ errors, data }) => {\n      if (errors) return handleFetchError(errors);\n\n      if (data.cancelOrder.error != null) {\n        onError();\n        return;\n      }\n      const orderData = transformOrderData(data.cancelOrder.order);\n      onSuccess(orderData);\n    })\n    .catch(() => onError());\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { GUEST_ORDER_FRAGMENT } from '@/order/api/fragments';\n\nexport const REQUEST_GUEST_ORDER_CANCEL_MUTATION = /* GraphQL */ `\n  mutation REQUEST_GUEST_ORDER_CANCEL_MUTATION(\n    $token: String!\n    $reason: String!\n  ) {\n    requestGuestOrderCancel(input: { token: $token, reason: $reason }) {\n      error\n      order {\n        ...GUEST_ORDER_FRAGMENT\n      }\n    }\n  }\n  ${GUEST_ORDER_FRAGMENT}\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { fetchGraphQl } from '@/order/api';\nimport { REQUEST_GUEST_ORDER_CANCEL_MUTATION } from './graphql/requestGuestOrderCancelMutation';\nimport { handleFetchError } from '@/order/lib/fetch-error';\nimport { transformOrderData } from '@/order/data/transforms';\n\nexport const requestGuestOrderCancel = async (\n  token: string,\n  reason: string,\n  onSuccess: Function,\n  onError: Function\n): Promise<void> => {\n  if (!token) throw new Error('No order token found');\n  if (!reason) throw new Error('No reason found');\n\n  return fetchGraphQl(REQUEST_GUEST_ORDER_CANCEL_MUTATION, {\n    variables: {\n      token,\n      reason,\n    },\n  })\n    .then(({ errors, data }) => {\n      if (errors) return handleFetchError(errors);\n      if (data.requestGuestOrderCancel.error != null) {\n        onError();\n      }\n      const orderData = transformOrderData(data.requestGuestOrderCancel.order);\n      onSuccess(orderData);\n    })\n    .catch(() => onError());\n};\n"],"names":["CANCEL_ORDER_MUTATION","PRODUCT_DETAILS_FRAGMENT","PRICE_DETAILS_FRAGMENT","GIFT_CARD_DETAILS_FRAGMENT","ORDER_ITEM_DETAILS_FRAGMENT","BUNDLE_ORDER_ITEM_DETAILS_FRAGMENT","ORDER_SUMMARY_FRAGMENT","ADDRESS_FRAGMENT","ORDER_ITEM_FRAGMENT","GIFT_WRAPPING_FRAGMENT","GIFT_MESSAGE_FRAGMENT","cancelOrder","orderId","reason","onSuccess","onError","fetchGraphQl","errors","data","handleFetchError","orderData","transformOrderData","REQUEST_GUEST_ORDER_CANCEL_MUTATION","GUEST_ORDER_FRAGMENT","requestGuestOrderCancel","token"],"mappings":"8aA6Ba,MAAAA,EAAsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA+D/CC,CAAwB;AAAA,IACxBC,CAAsB;AAAA,IACtBC,CAA0B;AAAA,IAC1BC,CAA2B;AAAA,IAC3BC,CAAkC;AAAA,IAClCC,CAAsB;AAAA,IACtBC,CAAgB;AAAA,IAChBC,CAAmB;AAAA,IACnBC,CAAsB;AAAA,IACtBC,CAAqB;AAAA,EChGZC,EAAc,MACzBC,EACAC,EACAC,EACAC,IACqC,CACrC,GAAI,CAACH,EAAe,MAAA,IAAI,MAAM,mBAAmB,EACjD,GAAI,CAACC,EAAc,MAAA,IAAI,MAAM,iBAAiB,EAE9C,OAAOG,EAAahB,EAAuB,CACzC,UAAW,CACT,QAAAY,EACA,OAAAC,CAAA,CAEH,CAAA,EACE,KAAK,CAAC,CAAE,OAAAI,EAAQ,KAAAC,KAAW,CACtB,GAAAD,EAAe,OAAAE,EAAiBF,CAAM,EAEtC,GAAAC,EAAK,YAAY,OAAS,KAAM,CAC1BH,EAAA,EACR,MAAA,CAEF,MAAMK,EAAYC,EAAmBH,EAAK,YAAY,KAAK,EAC3DJ,EAAUM,CAAS,CAAA,CACpB,EACA,MAAM,IAAML,GAAS,CAC1B,ECbaO,EAAoD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAY7DC,CAAoB;AAAA,ECTXC,EAA0B,MACrCC,EACAZ,EACAC,EACAC,IACkB,CAClB,GAAI,CAACU,EAAa,MAAA,IAAI,MAAM,sBAAsB,EAClD,GAAI,CAACZ,EAAc,MAAA,IAAI,MAAM,iBAAiB,EAE9C,OAAOG,EAAaM,EAAqC,CACvD,UAAW,CACT,MAAAG,EACA,OAAAZ,CAAA,CAEH,CAAA,EACE,KAAK,CAAC,CAAE,OAAAI,EAAQ,KAAAC,KAAW,CACtB,GAAAD,EAAe,OAAAE,EAAiBF,CAAM,EACtCC,EAAK,wBAAwB,OAAS,MAChCH,EAAA,EAEV,MAAMK,EAAYC,EAAmBH,EAAK,wBAAwB,KAAK,EACvEJ,EAAUM,CAAS,CAAA,CACpB,EACA,MAAM,IAAML,GAAS,CAC1B"}