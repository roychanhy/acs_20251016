{"version":3,"file":"requestGuestReturn.js","sources":["/@dropins/storefront-order/src/data/transforms/transform-request-return.ts","/@dropins/storefront-order/src/api/getAttributesList/graphql/getAttributesList.graphql.ts","/@dropins/storefront-order/src/api/getAttributesList/getAttributesList.ts","/@dropins/storefront-order/src/api/requestReturn/graphql/requestReturn.graphql.ts","/@dropins/storefront-order/src/api/requestReturn/requestReturn.ts","/@dropins/storefront-order/src/api/requestGuestReturn/graphql/requestGuestReturn.graphql.ts","/@dropins/storefront-order/src/api/requestGuestReturn/requestGuestReturn.ts"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { RequestReturnResponse } from '@/order/types';\nimport { RequestReturnModel } from '@/order/data/models';\nimport { merge } from '@adobe-commerce/elsie/lib';\nimport { config } from '@/order/api';\n\nexport const transformRequestReturn = (\n  response: RequestReturnResponse\n): RequestReturnModel | {} => {\n  if (!response?.data?.requestReturn?.return) return {};\n\n  const { created_at, ...props } = response.data.requestReturn.return;\n\n  const model = { ...props, createdAt: created_at };\n\n  return merge(\n    model, // default transformer\n    config\n      .getConfig()\n      ?.models?.RequestReturnModel?.transformer?.(\n        response.data.requestReturn.return\n      ) // custom transformer\n  );\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nexport const GET_ATTRIBUTES_LIST = /* GraphQL */ `\n  query GET_ATTRIBUTES_LIST($entityType: AttributeEntityTypeEnum!) {\n    attributesList(entityType: $entityType) {\n      items {\n        ... on CustomerAttributeMetadata {\n          multiline_count\n          sort_order\n          validate_rules {\n            name\n            value\n          }\n        }\n        ... on ReturnItemAttributeMetadata {\n          sort_order\n        }\n        code\n        label\n        default_value\n        frontend_input\n        is_unique\n        is_required\n        options {\n          is_default\n          label\n          value\n        }\n      }\n      errors {\n        type\n        message\n      }\n    }\n  }\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { fetchGraphQl } from '../fetch-graphql';\nimport { GET_ATTRIBUTES_LIST } from './graphql/getAttributesList.graphql';\nimport { handleNetworkError } from '@/order/lib/network-error';\nimport { handleFetchError } from '@/order/lib/fetch-error';\nimport { transformAttributesForm } from '@/order/data/transforms';\nimport { AttributesFormModel } from '@/order/data/models';\nimport { GetAttributesListResponse } from '@/order/types';\n\nexport const getAttributesList = async (\n  entityType: string\n): Promise<AttributesFormModel[] | []> => {\n  return await fetchGraphQl(GET_ATTRIBUTES_LIST, {\n    method: 'GET',\n    cache: 'force-cache',\n    variables: { entityType },\n  })\n    .then((response: GetAttributesListResponse) => {\n      if (response.errors?.length) return handleFetchError(response.errors);\n\n      return transformAttributesForm(response?.data?.attributesList?.items);\n    })\n    .catch(handleNetworkError);\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { REQUEST_RETURN_ORDER_FRAGMENT } from '@/order/api/fragments';\n\nexport const REQUEST_RETURN_ORDER = /* GraphQL */ `\n  mutation REQUEST_RETURN_ORDER($input: RequestReturnInput!) {\n    requestReturn(input: $input) {\n      return {\n        ...REQUEST_RETURN_ORDER_FRAGMENT\n      }\n    }\n  }\n  ${REQUEST_RETURN_ORDER_FRAGMENT}\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { fetchGraphQl } from '@/order/api';\nimport { handleFetchError } from '@/order/lib/fetch-error';\nimport { handleNetworkError } from '@/order/lib/network-error';\nimport { REQUEST_RETURN_ORDER } from './graphql/requestReturn.graphql';\nimport { convertKeysCase } from '@/order/lib/convertCase';\nimport { RequestReturnProps, RequestReturnResponse } from '@/order/types';\nimport { RequestReturnModel } from '@/order/data/models';\nimport { transformRequestReturn } from '@/order/data/transforms';\n\nexport const requestReturn = async (\n  form: RequestReturnProps\n): Promise<RequestReturnModel | {}> => {\n  const input = convertKeysCase(form, 'snakeCase', {});\n\n  return await fetchGraphQl(REQUEST_RETURN_ORDER, {\n    method: 'POST',\n    variables: { input },\n  })\n    .then((response: RequestReturnResponse) => {\n      if (response.errors?.length) return handleFetchError(response.errors);\n\n      return transformRequestReturn(response);\n    })\n    .catch(handleNetworkError);\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { REQUEST_RETURN_ORDER_FRAGMENT } from '@/order/api/fragments';\n\nexport const REQUEST_RETURN_GUEST_ORDER = /* GraphQL */ `\n  mutation REQUEST_RETURN_GUEST_ORDER($input: RequestGuestReturnInput!) {\n    requestGuestReturn(input: $input) {\n      return {\n        ...REQUEST_RETURN_ORDER_FRAGMENT\n      }\n    }\n  }\n  ${REQUEST_RETURN_ORDER_FRAGMENT}\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { fetchGraphQl } from '@/order/api';\nimport { handleFetchError } from '@/order/lib/fetch-error';\nimport { handleNetworkError } from '@/order/lib/network-error';\nimport { REQUEST_RETURN_GUEST_ORDER } from './graphql/requestGuestReturn.graphql';\nimport { convertKeysCase } from '@/order/lib/convertCase';\nimport {\n  RequestGuestReturnProps,\n  RequestGuestReturnResponse,\n} from '@/order/types';\n\nexport const requestGuestReturn = async (\n  form: RequestGuestReturnProps\n): Promise<{\n  uid: string;\n  number: string;\n  status: string;\n  createdAt: string;\n}> => {\n  const input = convertKeysCase(form, 'snakeCase', {});\n\n  return await fetchGraphQl(REQUEST_RETURN_GUEST_ORDER, {\n    method: 'POST',\n    variables: { input },\n  })\n    .then((response: RequestGuestReturnResponse) => {\n      if (response.errors?.length) return handleFetchError(response.errors);\n\n      const { created_at, ...props } = response.data.requestGuestReturn.return;\n\n      return { ...props, createdAt: created_at };\n    })\n    .catch(handleNetworkError);\n};\n"],"names":["transformRequestReturn","response","_b","_a","created_at","props","model","merge","_f","_e","_d","_c","config","GET_ATTRIBUTES_LIST","getAttributesList","entityType","fetchGraphQl","handleFetchError","transformAttributesForm","handleNetworkError","REQUEST_RETURN_ORDER","REQUEST_RETURN_ORDER_FRAGMENT","requestReturn","form","input","convertKeysCase","REQUEST_RETURN_GUEST_ORDER","requestGuestReturn"],"mappings":"iSAqBa,MAAAA,EACXC,GAC4B,iBAC5B,GAAI,GAACC,GAAAC,EAAAF,GAAA,YAAAA,EAAU,OAAV,YAAAE,EAAgB,gBAAhB,MAAAD,EAA+B,cAAe,CAAC,EAEpD,KAAM,CAAE,WAAAE,EAAY,GAAGC,GAAUJ,EAAS,KAAK,cAAc,OAEvDK,EAAQ,CAAE,GAAGD,EAAO,UAAWD,CAAW,EAEzC,OAAAG,EACLD,GACAE,GAAAC,GAAAC,GAAAC,EAAAC,EACG,UAAA,IADH,YAAAD,EAEI,SAFJ,YAAAD,EAEY,qBAFZ,YAAAD,EAEgC,cAFhC,YAAAD,EAAA,KAAAC,EAGIR,EAAS,KAAK,cAAc,OAElC,CACF,ECtBaY,EAAoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECQpCC,EAAoB,MAC/BC,GAEO,MAAMC,EAAaH,EAAqB,CAC7C,OAAQ,MACR,MAAO,cACP,UAAW,CAAE,WAAAE,CAAW,CAAA,CACzB,EACE,KAAMd,GAAwC,WAC7C,OAAIE,EAAAF,EAAS,SAAT,MAAAE,EAAiB,OAAec,EAAiBhB,EAAS,MAAM,EAE7DiB,GAAwBP,GAAAT,EAAAD,GAAA,YAAAA,EAAU,OAAV,YAAAC,EAAgB,iBAAhB,YAAAS,EAAgC,KAAK,CAAA,CACrE,EACA,MAAMQ,CAAkB,ECnBhBC,EAAqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAQ9CC,CAA6B;AAAA,ECDpBC,EAAgB,MAC3BC,GACqC,CACrC,MAAMC,EAAQC,EAAgBF,EAAM,YAAa,CAAA,CAAE,EAE5C,OAAA,MAAMP,EAAaI,EAAsB,CAC9C,OAAQ,OACR,UAAW,CAAE,MAAAI,CAAM,CAAA,CACpB,EACE,KAAMvB,GAAoC,OACzC,OAAIE,EAAAF,EAAS,SAAT,MAAAE,EAAiB,OAAec,EAAiBhB,EAAS,MAAM,EAE7DD,EAAuBC,CAAQ,CAAA,CACvC,EACA,MAAMkB,CAAkB,CAC7B,ECtBaO,EAA2C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAQpDL,CAA6B;AAAA,ECApBM,EAAqB,MAChCJ,GAMI,CACJ,MAAMC,EAAQC,EAAgBF,EAAM,YAAa,CAAA,CAAE,EAE5C,OAAA,MAAMP,EAAaU,EAA4B,CACpD,OAAQ,OACR,UAAW,CAAE,MAAAF,CAAM,CAAA,CACpB,EACE,KAAMvB,GAAyC,OAC9C,IAAIE,EAAAF,EAAS,SAAT,MAAAE,EAAiB,OAAe,OAAAc,EAAiBhB,EAAS,MAAM,EAEpE,KAAM,CAAE,WAAAG,EAAY,GAAGC,GAAUJ,EAAS,KAAK,mBAAmB,OAElE,MAAO,CAAE,GAAGI,EAAO,UAAWD,CAAW,CAAA,CAC1C,EACA,MAAMe,CAAkB,CAC7B"}