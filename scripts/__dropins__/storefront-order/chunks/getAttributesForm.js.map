{"version":3,"file":"getAttributesForm.js","sources":["/@dropins/storefront-order/src/api/getAttributesForm/graphql/getAttributesForm.graphql.ts","/@dropins/storefront-order/src/api/getAttributesForm/getAttributesForm.ts"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nexport const GET_ATTRIBUTES_FORM = /* GraphQL */ `\n  query GET_ATTRIBUTES_FORM($formCode: String!) {\n    attributesForm(formCode: $formCode) {\n      items {\n        code\n        default_value\n        entity_type\n        frontend_class\n        frontend_input\n        is_required\n        is_unique\n        label\n        options {\n          is_default\n          label\n          value\n        }\n        ... on CustomerAttributeMetadata {\n          multiline_count\n          sort_order\n          validate_rules {\n            name\n            value\n          }\n        }\n      }\n      errors {\n        type\n        message\n      }\n    }\n  }\n`;\n\nexport const GET_ATTRIBUTES_FORM_SHORT = /* GraphQL */ `\n  query GET_ATTRIBUTES_FORM_SHORT {\n    attributesForm(formCode: \"customer_register_address\") {\n      items {\n        frontend_input\n        label\n        code\n        ... on CustomerAttributeMetadata {\n          multiline_count\n          sort_order\n        }\n      }\n    }\n  }\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { fetchGraphQl } from '../fetch-graphql';\nimport {\n  GET_ATTRIBUTES_FORM,\n  GET_ATTRIBUTES_FORM_SHORT,\n} from './graphql/getAttributesForm.graphql';\nimport { handleNetworkError } from '@/order/lib/network-error';\nimport { handleFetchError } from '@/order/lib/fetch-error';\nimport { transformAttributesForm } from '@/order/data/transforms';\nimport { AttributesFormModel } from '@/order/data/models';\nimport { GetAttributesFormResponse } from '@/order/types';\n\nexport const getAttributesForm = async (\n  formCode: string\n): Promise<AttributesFormModel[]> => {\n  return await fetchGraphQl(\n    formCode !== 'shortRequest'\n      ? GET_ATTRIBUTES_FORM\n      : GET_ATTRIBUTES_FORM_SHORT,\n    {\n      method: 'GET',\n      cache: 'force-cache',\n      variables: { formCode },\n    }\n  )\n    .then((response: GetAttributesFormResponse) => {\n      if (response.errors?.length) return handleFetchError(response.errors);\n\n      return transformAttributesForm(response?.data?.attributesForm?.items);\n    })\n    .catch(handleNetworkError);\n};\n"],"names":["GET_ATTRIBUTES_FORM","GET_ATTRIBUTES_FORM_SHORT","getAttributesForm","formCode","fetchGraphQl","response","_a","handleFetchError","transformAttributesForm","_c","_b","handleNetworkError"],"mappings":"wIAgBa,MAAAA,EAAoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAkCpCC,EAA0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECvB1CC,EAAoB,MAC/BC,GAEO,MAAMC,EACXD,IAAa,eACTH,EACAC,EACJ,CACE,OAAQ,MACR,MAAO,cACP,UAAW,CAAE,SAAAE,CAAS,CAAA,CACxB,EAEC,KAAME,GAAwC,WAC7C,OAAIC,EAAAD,EAAS,SAAT,MAAAC,EAAiB,OAAeC,EAAiBF,EAAS,MAAM,EAE7DG,GAAwBC,GAAAC,EAAAL,GAAA,YAAAA,EAAU,OAAV,YAAAK,EAAgB,iBAAhB,YAAAD,EAAgC,KAAK,CAAA,CACrE,EACA,MAAME,CAAkB"}