/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as r,jsxs as i}from"@dropins/tools/preact-jsx-runtime.js";import{useState as m,useEffect as c}from"@dropins/tools/preact-hooks.js";import{events as f}from"@dropins/tools/event-bus.js";import{g as p}from"../chunks/getCustomerCompany.js";import{Card as d,Skeleton as h,SkeletonRow as s}from"@dropins/tools/components.js";import{classes as u}from"@dropins/tools/lib.js";import{useText as y}from"@dropins/tools/i18n.js";import"../chunks/fetch-error.js";import"@dropins/tools/fetch-graphql.js";import"../chunks/validateCompanyEmail.js";const g=({customerCompanyInfo:e,loading:n,className:a})=>{const o=y({companyName:"Company.shared.fields.companyName",jobTitle:"Company.shared.fields.jobTitle",workPhoneNumber:"Company.shared.fields.workPhoneNumber",userRole:"Company.shared.fields.userRole"});return n?r(d,{variant:"secondary",className:u(["customer-company-info-card",a]),children:r("div",{className:"customer-company-info-card__content",children:i(h,{"data-testid":"customerCompanyInfoSkeletonLoader",children:[r(s,{variant:"heading",size:"xlarge",fullWidth:!1,lines:1}),r(s,{variant:"heading",size:"xlarge",fullWidth:!0,lines:1}),r(s,{variant:"heading",size:"xlarge",fullWidth:!0,lines:1}),r(s,{variant:"heading",size:"xlarge",fullWidth:!0,lines:1})]})})}):e?r(d,{variant:"secondary",className:u(["customer-company-info-card",a]),children:i("div",{className:"customer-company-info-card__content",children:[i("p",{children:[o.companyName,": ",e.companyName]}),e.jobTitle&&i("p",{children:[o.jobTitle,": ",e.jobTitle]}),e.workPhoneNumber&&i("p",{children:[o.workPhoneNumber,": ",e.workPhoneNumber]}),e.userRole&&i("p",{children:[o.userRole,": ",e.userRole]})]})}):null},N=()=>{const[e,n]=m(null),[a,o]=m(!0),l=async()=>{try{o(!0);const t=await p();n(t)}catch{n(null)}finally{o(!1)}};return c(()=>{l()},[]),c(()=>{const t=f.on("companyContext/changed",l,{eager:!0});return()=>{t==null||t.off()}},[]),{companyInfo:e,loading:a}},z=({className:e})=>{const{companyInfo:n,loading:a}=N();return r(g,{customerCompanyInfo:n,loading:a,className:e})};export{z as CustomerCompanyInfo};
//# sourceMappingURL=CustomerCompanyInfo.js.map
