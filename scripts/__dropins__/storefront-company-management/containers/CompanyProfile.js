/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as t,jsxs as f,Fragment as K}from"@dropins/tools/preact-jsx-runtime.js";import{classes as ue,Slot as he}from"@dropins/tools/lib.js";import{Card as Q,Button as X,Field as B,Input as V,Picker as ce,Header as pe,InLineAlert as fe,ProgressSpinner as ye}from"@dropins/tools/components.js";import{useState as D,useRef as J,useEffect as j,useCallback as W,useMemo as G}from"@dropins/tools/preact-hooks.js";import{u as ve,a as Ce}from"../chunks/useInLineAlert.js";import{events as me}from"@dropins/tools/event-bus.js";import{p as Ae,E as Ne}from"../chunks/acdl.js";import{g as Ie,u as _e}from"../chunks/updateCompany.js";import{g as ge,v as Ee}from"../chunks/getCountries.js";import{useText as H}from"@dropins/tools/i18n.js";import"@dropins/tools/preact-compat.js";import"../chunks/fetchUserPermissions.js";import"../chunks/company-permissions.js";import"../chunks/network-error.js";import"@dropins/tools/fetch-graphql.js";const be=({company:a,slots:e,showEditForm:u,handleShowEditForm:y})=>{const o=H({editButton:"Company.shared.buttons.edit",noDataMessage:"Company.CompanyProfile.companyProfileCard.noDataMessage",companyName:"Company.shared.fields.companyName",email:"Company.shared.fields.email",legalName:"Company.shared.fields.legalName",vatTaxId:"Company.shared.fields.vatTaxId",resellerId:"Company.shared.fields.resellerId",legalAddress:"Company.shared.fields.legalAddress",contacts:"Company.CompanyProfile.companyProfileCard.contacts",companyAdministrator:"Company.CompanyProfile.companyProfileCard.companyAdministrator",salesRepresentative:"Company.CompanyProfile.companyProfileCard.salesRepresentative",paymentInformation:"Company.CompanyProfile.companyProfileCard.paymentInformation",shippingInformation:"Company.CompanyProfile.companyProfileCard.shippingInformation",availablePaymentMethods:"Company.CompanyProfile.companyProfileCard.availablePaymentMethods",availableShippingMethods:"Company.CompanyProfile.companyProfileCard.availableShippingMethods",noPaymentMethods:"Company.CompanyProfile.companyProfileCard.noPaymentMethods",noShippingMethods:"Company.CompanyProfile.companyProfileCard.noShippingMethods"});if(!a)return t(Q,{variant:"secondary",className:"account-company-profile-card",children:t("div",{className:"account-company-profile-card__wrapper",children:t("div",{className:"account-company-profile-card__content",children:t("div",{className:"account-company-profile-card__no-data",children:t("p",{children:o.noDataMessage})})})})});const i=a.permissionsFlags||{canViewAccount:!0,canViewAddress:!0,canViewContacts:!0,canViewPaymentInformation:!0,canViewShippingInformation:!0},r=[i.canViewAccount?{name:"name",label:o.companyName,value:a.name||"",legalName:a.legalName||""}:null,i.canViewAccount?{name:"email",label:o.email,value:a.email||""}:null,i.canViewAccount?{name:"vatTaxId",label:o.vatTaxId,value:a.vatTaxId||""}:null,i.canViewAccount?{name:"resellerId",label:o.resellerId,value:a.resellerId||""}:null].filter(Boolean);return t(Q,{variant:"secondary",className:ue(["account-company-profile-card",["account-company-profile-card-short",u]]),children:f("div",{className:"account-company-profile-card__wrapper",children:[t("div",{className:"account-company-profile-card__actions",children:(a.canEditAccount||a.canEditAddress)&&t(X,{type:"button",variant:"tertiary",onClick:y,children:o.editButton})}),t("div",{className:"account-company-profile-card__content",children:(()=>{var v,g;const N=f(K,{children:[r.map((s,d)=>{if(!s.value)return null;let h;return s.name==="name"&&s.legalName?h=`${s.label}: ${s.value} (${s.legalName})`:h=s.label?`${s.label}: ${s.value}`:s.value,t("p",{"data-testid":`${s.name}_${d}`,children:h},`${s.name}_${d}`)}),i.canViewAddress&&a.legalAddress&&f("div",{className:"company-legal-address",children:[t("p",{children:f("strong",{children:[o.legalAddress,":"]})}),(v=a.legalAddress.street)==null?void 0:v.map((s,d)=>t("p",{children:s},d)),f("p",{children:[a.legalAddress.city,", ",(g=a.legalAddress.region)==null?void 0:g.region," ",a.legalAddress.postcode]}),t("p",{children:a.legalAddress.countryCode}),a.legalAddress.telephone&&f("p",{children:["Phone: ",a.legalAddress.telephone]})]}),i.canViewContacts&&(a.companyAdmin||a.salesRepresentative)&&f("div",{className:"company-contacts",children:[t("p",{children:f("strong",{children:[o.contacts,":"]})}),a.companyAdmin&&f("div",{className:"company-contact",children:[t("p",{children:f("strong",{children:[o.companyAdministrator,":"]})}),f("p",{children:[a.companyAdmin.firstname," ",a.companyAdmin.lastname]}),a.companyAdmin.jobTitle&&t("p",{children:a.companyAdmin.jobTitle}),t("p",{children:a.companyAdmin.email})]}),a.salesRepresentative&&f("div",{className:"company-contact",children:[t("p",{children:f("strong",{children:[o.salesRepresentative,":"]})}),f("p",{children:[a.salesRepresentative.firstname," ",a.salesRepresentative.lastname]}),t("p",{children:a.salesRepresentative.email})]})]}),i.canViewPaymentInformation&&f("div",{className:"company-payment-methods",children:[t("p",{children:f("strong",{children:[o.paymentInformation,":"]})}),a.availablePaymentMethods&&a.availablePaymentMethods.length>0?f(K,{children:[t("p",{children:f("strong",{children:[o.availablePaymentMethods,":"]})}),t("ul",{className:"payment-methods-list",children:a.availablePaymentMethods.map((s,d)=>t("li",{children:s.title},`payment_${d}`))})]}):t("div",{className:"message message-notice notice",children:t("div",{children:o.noPaymentMethods})})]}),i.canViewShippingInformation&&f("div",{className:"company-shipping-methods",children:[t("p",{children:f("strong",{children:[o.shippingInformation,":"]})}),a.availableShippingMethods&&a.availableShippingMethods.length>0?f(K,{children:[t("p",{children:f("strong",{children:[o.availableShippingMethods,":"]})}),t("ul",{className:"shipping-methods-list",children:a.availableShippingMethods.map((s,d)=>t("li",{children:s.title},`shipping_${d}`))})]}):t("div",{className:"message message-notice notice",children:t("div",{children:o.noShippingMethods})})]})]});return e!=null&&e.CompanyData?t(he,{name:"CompanyData",slot:e.CompanyData,context:{companyData:r,Default:N}}):N})()})]})})},xe=({handleSetInLineAlert:a,editFormRef:e})=>{const u=H({companySuccess:"Company.CompanyProfile.editCompanyProfile.companySuccess",companyError:"Company.CompanyProfile.editCompanyProfile.companyError",loadError:"Company.CompanyProfile.messages.loadError",updateError:"Company.CompanyProfile.messages.updateError",noDataToUpdate:"Company.CompanyProfile.messages.noDataToUpdate"}),{companySuccess:y,companyError:o,loadError:i,updateError:r,noDataToUpdate:N}=u,[v,g]=D(null),[s,d]=D(!0),[h,C]=D(!1),[_,w]=D(!1),[m,k]=D([]),[L,A]=D({}),z=J(a),P=J(!1),F=J(!1);j(()=>{z.current=a},[a]);const O=W(p=>{A(p)},[]),M=W((p,T)=>{a&&(p==="success"?a({type:"success",text:T??y}):p==="error"?a({type:"error",text:T??o}):a(),C(!1))},[a,y,o]),S=W(async()=>{if(P.current)return null;P.current=!0,d(!0);try{const p=await Ie();return p&&g(p),d(!1),p}catch(p){return console.error("Failed to load company:",p),d(!1),z.current&&z.current({type:"error",text:i}),null}finally{P.current=!1}},[i]);j(()=>{F.current||(F.current=!0,S())},[S]),j(()=>{const p=()=>{d(!0),w(!1),A({}),S()},T=me.on("companyContext/changed",p,{eager:!0});return()=>{T==null||T.off()}},[S]),j(()=>{ge().then(p=>{k(p.availableCountries)}).catch(p=>{console.error("Failed to load countries:",p)})},[]);const U=W(()=>{w(!0),M("success",""),A({})},[M]);j(()=>{_&&(e!=null&&e.current)&&setTimeout(()=>{var p;(p=e.current)==null||p.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[_,e]);const q=W(p=>{p==null||p(),w(!1),A({})},[]),Y=W(async p=>{try{if(C(!0),!p){M("error",N);return}const T=await _e(p);g(T),w(!1),A({}),M("success"),Ae(Ne.EDIT_COMPANY_EVENT,{...p,companyId:v==null?void 0:v.id}),me.emit("company/updated",{company:T})}catch(T){console.error("Failed to update company:",T),M("error",T.message||r)}finally{C(!1)}},[v,M,r,N]);return{company:v,countries:m,loading:s,submitLoading:h,showEditForm:_,inputChange:L,handleShowEditForm:U,handleHideEditForm:q,handleUpdateCompany:Y,handleInputChange:O,renderAlertMessage:M,saving:h}},Te=a=>{const[e,u]=D(null),[y,o]=D(!0);j(()=>{let g=!0;return ge().then(({availableCountries:s,countriesWithRequiredRegion:d,optionalZipCountries:h})=>{g&&(u({availableCountries:s,countriesWithRequiredRegion:d,optionalZipCountries:h}),o(!1))}).catch(()=>{g&&o(!1)}),()=>{g=!1}},[]);const i=G(()=>(e==null?void 0:e.availableCountries)||[],[e]),r=G(()=>{if(!a||!e)return[];const g=e.availableCountries.find(s=>s.value===a);return!(g!=null&&g.availableRegions)||g.availableRegions.length===0?[]:g.availableRegions.map(s=>({text:s.name,value:`${s.code},${s.id}`}))},[a,e]),N=G(()=>!a||!e?!1:e.countriesWithRequiredRegion.includes(a),[a,e]),v=G(()=>r.length>0,[r]);return{countryOptions:i,regionOptions:r,isRegionRequired:N,hasRegionOptions:v,loadingCountries:y}},$e=({loading:a,value:e,errors:u,touched:y,onBlur:o,namePrefix:i="",fieldPathPrefix:r=""})=>{const N=H({companyName:"Company.shared.fields.companyName",email:"Company.shared.fields.email",legalName:"Company.shared.fields.legalName",vatTaxId:"Company.shared.fields.vatTaxId",resellerId:"Company.shared.fields.resellerId"}),v=i?`${i}_`:"",g=h=>r?`${r}.${h}`:h,s=h=>C=>{const _=C.target;o(g(h),_.value)},d={disabled:!!a,variant:"primary",size:"medium"};return f("div",{className:"account-edit-company-profile-form__group",children:[t(B,{label:N.companyName,required:!0,className:"account-edit-company-profile-form__field",error:y.name&&u.name?u.name:void 0,children:t(V,{name:`${v}name`,type:"text",value:e.name,onBlur:s("name"),...d,maxLength:40})}),t(B,{label:N.legalName,className:"account-edit-company-profile-form__field",children:t(V,{name:`${v}legalName`,type:"text",value:e.legalName,onBlur:s("legalName"),...d,maxLength:80})}),t(B,{label:N.email,required:!0,className:"account-edit-company-profile-form__field",error:y.email&&u.email?u.email:void 0,children:t(V,{name:`${v}email`,type:"email",value:e.email,onBlur:s("email"),...d})}),t(B,{label:N.vatTaxId,className:"account-edit-company-profile-form__field",children:t(V,{name:`${v}vatTaxId`,type:"text",value:e.vatTaxId,onBlur:s("vatTaxId"),...d,maxLength:40})}),t(B,{label:N.resellerId,className:"account-edit-company-profile-form__field",children:t(V,{name:`${v}resellerId`,type:"text",value:e.resellerId,onBlur:s("resellerId"),...d,maxLength:40})})]})},we=({loading:a,loadingCountries:e,value:u,errors:y,touched:o,onChange:i,onBlur:r,countryOptions:N,regionOptions:v,isRegionRequired:g,hasRegionOptions:s,namePrefix:d="legalAddress",fieldPathPrefix:h="legalAddress",requiredConfig:C})=>{var z;const _=H({legalAddress:"Company.shared.fields.legalAddress",streetAddress:"Company.shared.fields.streetAddress",city:"Company.shared.fields.city",country:"Company.shared.fields.country",stateProvince:"Company.shared.fields.stateProvince",zipPostalCode:"Company.shared.fields.zipPostalCode",phoneNumber:"Company.shared.fields.phoneNumber"}),w={street:`${d}_street`,street2:`${d}_street2`,city:`${d}_city`,countryCode:`${d}_countryCode`,region:`${d}_region`,postcode:`${d}_postcode`,telephone:`${d}_telephone`},m={street:`${h}.street`,street2:`${h}.street2`,city:`${h}.city`,countryCode:`${h}.countryCode`,region:`${h}.region`,regionCode:`${h}.regionCode`,postcode:`${h}.postcode`,telephone:`${h}.telephone`},k={street:(C==null?void 0:C.street)??!0,city:(C==null?void 0:C.city)??!0,postcode:(C==null?void 0:C.postcode)??!0,telephone:(C==null?void 0:C.telephone)??!0},L=P=>F=>{const O=F.target;r(P,O.value)},A={disabled:!!a,variant:"primary",size:"medium"};return f("div",{className:"account-edit-company-profile-form__section",children:[t("h3",{className:"account-edit-company-profile-form__section-title",children:_.legalAddress}),t(B,{label:_.streetAddress,required:k.street,className:"account-edit-company-profile-form__field",error:o[m.street]&&y[m.street]?y[m.street]:void 0,children:t(V,{name:w.street,type:"text",value:u.street,onBlur:L(m.street),...A})}),t(B,{label:`${_.streetAddress} 2`,className:"account-edit-company-profile-form__field",children:t(V,{name:w.street2,type:"text",value:u.street2,onBlur:L(m.street2),...A})}),t(B,{label:_.city,required:k.city,className:"account-edit-company-profile-form__field",error:o[m.city]&&y[m.city]?y[m.city]:void 0,children:t(V,{name:w.city,type:"text",value:u.city,onBlur:L(m.city),...A})}),t(B,{label:_.country,required:!0,className:"account-edit-company-profile-form__field",error:o[m.countryCode]&&y[m.countryCode]?y[m.countryCode]:void 0,children:t(ce,{name:w.countryCode,floatingLabel:`${_.country} *`,placeholder:_.country,options:N,value:u.countryCode,handleSelect:P=>{const F=P.target;i(m.countryCode)(F.value)},onBlur:()=>r(m.countryCode),disabled:!!a||e})}),t(B,{label:_.stateProvince,required:g,className:"account-edit-company-profile-form__field",error:o["legalAddress.region"]&&y["legalAddress.region"]?y["legalAddress.region"]:void 0,children:s?t(ce,{name:"legalAddress_region",floatingLabel:`${_.stateProvince} ${g?"*":""}`,placeholder:_.stateProvince,options:v,value:u.regionCode&&((z=v.find(P=>P.value.split(",")[0]===u.regionCode))==null?void 0:z.value)||"",handleSelect:P=>{var S;const F=P.target,[O]=F.value.split(","),M=((S=v.find(U=>U.value===F.value))==null?void 0:S.text)||"";i(m.region)(M),i(m.regionCode)(O)},onBlur:()=>r(m.region),disabled:!!a||e},`region_picker_${u.countryCode}`):t(V,{name:w.region,type:"text",value:u.region,onBlur:L(m.region),disabled:!!a||e,...A},`region_input_${u.countryCode}`)}),t(B,{label:_.zipPostalCode,required:k.postcode,className:"account-edit-company-profile-form__field",error:o[m.postcode]&&y[m.postcode]?y[m.postcode]:void 0,children:t(V,{name:w.postcode,type:"text",value:u.postcode,onBlur:L(m.postcode),...A})}),t(B,{label:_.phoneNumber,required:k.telephone,className:"account-edit-company-profile-form__field",error:o[m.telephone]&&y[m.telephone]?y[m.telephone]:void 0,children:t(V,{name:w.telephone,type:"tel",value:u.telephone,onBlur:L(m.telephone),...A})})]})},Pe=({inLineAlertProps:a,company:e,loading:u=!1,onSubmit:y,onCancel:o})=>{var S,U,q,Y,p,T,Z,ee,te,ae,re,le,se,ne;const i=H({title:"Company.EditCompanyProfile.title",cancel:"Company.shared.buttons.cancel",save:"Company.shared.buttons.save",saving:"Company.shared.buttons.saving",required:"Company.shared.validation.required",invalidEmail:"Company.shared.validation.invalidEmail",companyNameRequired:"Company.shared.validation.companyNameRequired",emailRequired:"Company.shared.validation.emailRequired",emailNotAvailable:"Company.shared.validation.emailNotAvailable",companyNameLengthError:"Company.shared.validation.companyNameLengthError",legalNameLengthError:"Company.shared.validation.legalNameLengthError",vatTaxIdLengthError:"Company.shared.validation.vatTaxIdLengthError",resellerIdLengthError:"Company.shared.validation.resellerIdLengthError"}),[r,N]=D({name:(e==null?void 0:e.name)||"",email:(e==null?void 0:e.email)||"",legalName:(e==null?void 0:e.legalName)||"",vatTaxId:(e==null?void 0:e.vatTaxId)||"",resellerId:(e==null?void 0:e.resellerId)||"",legalAddress:{street:((U=(S=e==null?void 0:e.legalAddress)==null?void 0:S.street)==null?void 0:U[0])||"",street2:((Y=(q=e==null?void 0:e.legalAddress)==null?void 0:q.street)==null?void 0:Y[1])||"",city:((p=e==null?void 0:e.legalAddress)==null?void 0:p.city)||"",region:((Z=(T=e==null?void 0:e.legalAddress)==null?void 0:T.region)==null?void 0:Z.region)||"",regionCode:((te=(ee=e==null?void 0:e.legalAddress)==null?void 0:ee.region)==null?void 0:te.regionCode)||"",countryCode:((ae=e==null?void 0:e.legalAddress)==null?void 0:ae.countryCode)||"",postcode:((re=e==null?void 0:e.legalAddress)==null?void 0:re.postcode)||"",telephone:((le=e==null?void 0:e.legalAddress)==null?void 0:le.telephone)||""}}),[v,g]=D({}),[s,d]=D({}),h=((se=e==null?void 0:e.permissionsFlags)==null?void 0:se.canEditAccount)===!0,C=((ne=e==null?void 0:e.permissionsFlags)==null?void 0:ne.canEditAddress)===!0,{countryOptions:_,regionOptions:w,isRegionRequired:m,hasRegionOptions:k,loadingCountries:L}=Te(r.legalAddress.countryCode),A=(l,n)=>l==="name"?n.trim()?n.length>40?i.companyNameLengthError:null:i.companyNameRequired:l==="email"?n.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)?null:i.invalidEmail:i.emailRequired:l==="legalName"?n.length>80?i.legalNameLengthError:null:l==="vatTaxId"?n.length>40?i.vatTaxIdLengthError:null:l==="resellerId"?n.length>40?i.resellerIdLengthError:null:l==="legalAddress.street"||l==="legalAddress.city"||l==="legalAddress.postcode"||l==="legalAddress.telephone"||l==="legalAddress.countryCode"?n.trim()?null:i.required:l==="legalAddress.region"&&m&&!n.trim()?i.required:null,z=()=>{var $,R;const l={};let n=!0;const x=(($=e==null?void 0:e.permissionsFlags)==null?void 0:$.canEditAccount)===!0,c=((R=e==null?void 0:e.permissionsFlags)==null?void 0:R.canEditAddress)===!0;if(x){const I=A("name",r.name);I&&(l.name=I,n=!1);const E=A("email",r.email);if(E&&(l.email=E,n=!1),r.legalName){const b=A("legalName",r.legalName);b&&(l.legalName=b,n=!1)}if(r.vatTaxId){const b=A("vatTaxId",r.vatTaxId);b&&(l.vatTaxId=b,n=!1)}if(r.resellerId){const b=A("resellerId",r.resellerId);b&&(l.resellerId=b,n=!1)}}if(c){const I=A("legalAddress.street",r.legalAddress.street);I&&(l["legalAddress.street"]=I,n=!1);const E=A("legalAddress.city",r.legalAddress.city);E&&(l["legalAddress.city"]=E,n=!1);const b=A("legalAddress.postcode",r.legalAddress.postcode);b&&(l["legalAddress.postcode"]=b,n=!1);const oe=A("legalAddress.telephone",r.legalAddress.telephone);oe&&(l["legalAddress.telephone"]=oe,n=!1);const ie=A("legalAddress.countryCode",r.legalAddress.countryCode);ie&&(l["legalAddress.countryCode"]=ie,n=!1);const de=A("legalAddress.region",r.legalAddress.region);de&&(l["legalAddress.region"]=de,n=!1)}return g(l),n},P=async l=>{var $,R;l.preventDefault();const n=(($=e==null?void 0:e.permissionsFlags)==null?void 0:$.canEditAccount)===!0,x=((R=e==null?void 0:e.permissionsFlags)==null?void 0:R.canEditAddress)===!0,c={};if(n&&(c.name=!0,c.email=!0,c.legalName=!0,c.vatTaxId=!0,c.resellerId=!0),x&&(c["legalAddress.street"]=!0,c["legalAddress.street2"]=!0,c["legalAddress.city"]=!0,c["legalAddress.region"]=!0,c["legalAddress.regionCode"]=!0,c["legalAddress.countryCode"]=!0,c["legalAddress.postcode"]=!0,c["legalAddress.telephone"]=!0),d(c),!!z()){if(n&&r.email!==(e==null?void 0:e.email)){const I=await Ee(r.email);if(!I.isValid){g(E=>({...E,email:I.error||i.emailNotAvailable}));return}}if(y){const I={};n&&(I.name=r.name,I.email=r.email,I.legalName=r.legalName,I.vatTaxId=r.vatTaxId,I.resellerId=r.resellerId),x&&(I.legalAddress={street:[r.legalAddress.street,r.legalAddress.street2].filter(Boolean),city:r.legalAddress.city,region:{region:r.legalAddress.region,regionCode:r.legalAddress.regionCode},countryCode:r.legalAddress.countryCode,postcode:r.legalAddress.postcode,telephone:r.legalAddress.telephone}),await y(I)}}},F=(l,n)=>{if(l.startsWith("legalAddress.")){const x=l.split(".")[1];x==="countryCode"?(N(c=>({...c,legalAddress:{...c.legalAddress,[x]:n,region:"",regionCode:""}})),g(c=>{const $={...c};return delete $["legalAddress.region"],delete $["legalAddress.regionCode"],$}),d(c=>{const $={...c};return delete $["legalAddress.region"],delete $["legalAddress.regionCode"],$})):N(x==="region"?c=>({...c,legalAddress:{...c.legalAddress,region:n,regionCode:k?c.legalAddress.regionCode:n}}):c=>({...c,legalAddress:{...c.legalAddress,[x]:n}}))}else N(x=>({...x,[l]:n}))},O=l=>n=>{const x=new Set(["name","email","legalName","vatTaxId","resellerId"]),c=l.startsWith("legalAddress.");x.has(l)&&!h||c&&!C||(F(l,n),v[l]&&g(R=>{const I={...R};return delete I[l],I}))},M=(l,n)=>{const x=new Set(["name","email","legalName","vatTaxId","resellerId"]),c=l.startsWith("legalAddress.");if(x.has(l)&&!h||c&&!C)return;n!==void 0&&F(l,n),d(E=>({...E,[l]:!0}));let R=n;if(R===void 0)if(l.startsWith("legalAddress.")){const E=l.split(".")[1],b=r.legalAddress[E];R=typeof b=="string"?b:""}else{const E=r[l];R=typeof E=="string"?E:""}const I=A(l,R);g(I?E=>({...E,[l]:I}):E=>{const b={...E};return delete b[l],b})};return f(Q,{variant:"secondary",className:"account-edit-company-profile",children:[t(pe,{title:i.title,divider:!1,className:"account-edit-company-profile__title"}),a!=null&&a.text?t(fe,{className:"account-edit-company-profile__notification",type:a.type,variant:"secondary",heading:a.text,icon:a.icon,"data-testid":"editCompanyInLineAlert"}):null,f("form",{className:"account-edit-company-profile-form",onSubmit:P,children:[h&&t($e,{loading:u,value:{name:r.name,email:r.email,legalName:r.legalName,vatTaxId:r.vatTaxId,resellerId:r.resellerId},errors:v,touched:s,onBlur:M}),C&&t(we,{loading:u,loadingCountries:L,value:r.legalAddress,errors:v,touched:s,onChange:O,onBlur:M,countryOptions:_,regionOptions:w,isRegionRequired:m,hasRegionOptions:k}),f("div",{className:"account-edit-company-profile__actions",children:[t(X,{disabled:u,type:"button",variant:"secondary",onClick:()=>o==null?void 0:o(),children:i.cancel}),t(X,{disabled:u||!h&&!C,type:"submit",variant:"primary",children:i.save})]})]}),u&&f("div",{className:"account-edit-company-profile__loading-overlay","data-testid":"editCompanyLoadingOverlay",children:[t(ye,{size:"large"}),t("div",{className:"account-edit-company-profile__loading-text",children:i.saving})]})]})},qe=({className:a,withHeader:e=!0,slots:u})=>{const y=H({containerTitle:"Company.CompanyProfile.containerTitle"}),{inLineAlertProps:o,handleSetInLineAlert:i}=ve(),r=J(null),{company:N,loading:v,saving:g,showEditForm:s,handleShowEditForm:d,handleHideEditForm:h,handleUpdateCompany:C}=xe({handleSetInLineAlert:i,editFormRef:r});return v?t("div",{"data-testid":"companyProfileLoader",children:t(Ce,{withCard:!0})}):f("div",{className:ue(["account-company-profile",a]),children:[e?t(pe,{title:y.containerTitle,divider:!1,className:"company-profile__title"}):null,t(be,{company:N,slots:u,showEditForm:s,handleShowEditForm:d}),s?t("div",{ref:r,children:t(Pe,{inLineAlertProps:o,company:N,loading:g,onSubmit:C,onCancel:h})}):null]})};export{qe as CompanyProfile,qe as default};
//# sourceMappingURL=CompanyProfile.js.map
