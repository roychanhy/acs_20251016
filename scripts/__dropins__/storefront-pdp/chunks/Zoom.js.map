{"version":3,"file":"Zoom.js","sources":["../../node_modules/@adobe-commerce/elsie/src/icons/ChevronDown.svg","../../node_modules/@adobe-commerce/elsie/src/icons/Close.svg","/@dropins/storefront-pdp/src/components/Carousel/Carousel.tsx","/@dropins/storefront-pdp/src/components/Overlay/Overlay.tsx","/@dropins/storefront-pdp/src/components/Zoom/Zoom.tsx"],"sourcesContent":["import * as React from \"react\";\nconst SvgChevronDown = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M7.74512 9.87701L12.0001 14.132L16.2551 9.87701\", stroke: \"currentColor\", strokeWidth: 1.5, strokeLinecap: \"square\", strokeLinejoin: \"round\" }));\nexport default SvgChevronDown;\n","import * as React from \"react\";\nconst SvgClose = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 5.64001L5.62988 18.37\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 18.37L5.62988 5.64001\", stroke: \"currentColor\" }));\nexport default SvgClose;\n","/**\n * ADOBE CONFIDENTIAL\n * __________________\n * Copyright 2023 Adobe\n * All Rights Reserved.\n * __________________\n * NOTICE: All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n */\n\nimport { FunctionComponent, VNode } from 'preact';\nimport {\n  HTMLAttributes,\n  Children,\n  useState,\n  useRef,\n  useEffect,\n  useMemo,\n  useCallback,\n  useLayoutEffect,\n} from 'preact/compat';\nimport { classes, debounce } from '@adobe-commerce/elsie/lib';\nimport { Button, Icon } from '@adobe-commerce/elsie/components';\nimport { ChevronDown } from '@adobe-commerce/elsie/icons';\nimport { useText } from '@adobe-commerce/elsie/i18n';\n\nimport '@/pdp/components/Carousel/Carousel.css';\n\ntype Show = number;\n\nconst PEAK_WIDTH = 24;\nconst THUMB_GAP = 16;\nconst ICON_SIZE = '32';\n\nenum GapSize {\n  small = 16,\n  medium = 24,\n  large = 64,\n}\n\nexport interface CarouselProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'controls'> {\n  children: VNode[] | VNode;\n  thumbnails?: VNode[] | VNode;\n  show?: Show | { small: Show; medium: Show; large: Show };\n  gap?: 'small' | 'medium' | 'large' | null;\n  scrollbar?: boolean;\n  peak?: boolean;\n  arrows?: boolean;\n  controls?: 'thumbnailsRow' | 'thumbnailsColumn' | 'dots' | null;\n  arrowsOnMainImage?: boolean;\n  loop?: boolean;\n  direction?: 'horizontal';\n  style?: Record<string, string | number>;\n  width?: string;\n  height?: string;\n  defaultIndex?: number;\n  infinite?: boolean;\n  isZoomed?: boolean;\n}\n\nexport const Carousel: FunctionComponent<CarouselProps> = ({\n  show = 1,\n  scrollbar = false,\n  peak = false,\n  arrows = false,\n  controls = 'dots',\n  arrowsOnMainImage = false,\n  loop = false,\n  gap = null,\n  direction = 'horizontal',\n  width = '100%',\n  height = '100%',\n  defaultIndex = 0,\n  className,\n  children,\n  thumbnails = null,\n  isZoomed,\n  ...props\n}) => {\n  // i18n\n  const Label = useText('PDP.Carousel.label').label;\n  const SlideLabel = useText('PDP.Carousel.Slide.label').label;\n  const PreviousLabel = useText('PDP.Carousel.Previous.label').label;\n  const NextLabel = useText('PDP.Carousel.Next.label').label;\n  const ControlsLabel = useText('PDP.Carousel.Controls.label').label;\n  const ControlsBtnLabel = useText('PDP.Carousel.Controls.Button.label').label;\n\n  // States\n  const [perPage, setPerPage] = useState(() => getPerPageFromBreakpoint(show));\n\n  // Constants\n  const length = Math.ceil(Children.count(children) / perPage);\n\n  const peakWidth = peak ? PEAK_WIDTH : 0;\n  const gapWidth = gap ? GapSize[gap] : 0;\n  const rest = Children.count(children) % perPage;\n\n  // States\n  const [current, setCurrent] = useState(\n    loop ? (isRTL() ? defaultIndex - 1 : defaultIndex + 1) : defaultIndex\n  );\n\n  // Thumbnails (refs for each thumbnail item)\n  const thumbnailsRefs = useRef<HTMLLabelElement[]>([]);\n  const [thumbWidth, setThumbWidth] = useState(0);\n  const [thumbHeight, setThumbHeight] = useState(0);\n\n  // VNodes\n  const thumbnailSlides = useMemo<VNode[]>(() => {\n    return Children.toArray(thumbnails);\n  }, [thumbnails]);\n\n  // Slides\n  const slides = useMemo<VNode[][]>(() => {\n    const returnValue = Children.toArray(children).reduce((acc, child, i) => {\n      if (i % perPage === 0) {\n        return [...acc, [child]];\n      }\n\n      return [...acc.slice(0, -1), [...acc[acc.length - 1], child]];\n    }, [] as VNode[][]);\n\n    if (!loop || returnValue.length === 1) {\n      return returnValue;\n    }\n\n    if (loop && !(Children.count(children) % perPage !== 0)) {\n      return [returnValue[length - 1]]\n        .concat(returnValue)\n        .concat([returnValue[0], returnValue[1]]);\n    }\n\n    return [Children.toArray(children).slice(-perPage)]\n      .concat(returnValue)\n      .concat([returnValue[0], returnValue[1]]);\n  }, [children, perPage, length, loop]);\n\n  // Wrapper\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const thumbnailsWrapperRef = useRef<HTMLDivElement>(null);\n\n  const thumbnailControls =\n    controls === 'thumbnailsRow' || controls === 'thumbnailsColumn';\n\n  // Observe Resize (responsive)\n  useEffect(() => {\n    const wrapper = wrapperRef.current;\n\n    if (!wrapper) return; // Guard clause in case the ref is not set yet\n\n    const handleResize = debounce(() => {\n      setThumbWidth(wrapper.offsetWidth ?? 0);\n      setThumbHeight(wrapper.offsetHeight ?? 0);\n      const width = window.innerWidth;\n      const newPerPage = getPerPageFromBreakpoint(show, width);\n\n      if (newPerPage !== perPage) {\n        setPerPage(newPerPage);\n      }\n    }, 50);\n\n    const observer = new ResizeObserver(handleResize);\n    observer.observe(wrapper);\n\n    return () => {\n      observer.unobserve(wrapper);\n    };\n  }, [perPage, show]);\n\n  // Scrolling logic controls\n  const handleThumbnailsScroll = useCallback(\n    (nextSlideIndex: number) => {\n      const nextItem = loop ? nextSlideIndex - 1 : nextSlideIndex;\n      const thumbnailRef = thumbnailsRefs?.current[0];\n      const oneItemWidth = thumbnailRef?.offsetWidth + THUMB_GAP;\n      const oneItemHeight = thumbnailRef?.offsetHeight + THUMB_GAP;\n      const thumbnailsWrapper = thumbnailsWrapperRef.current!;\n\n      const isRow = controls === 'thumbnailsRow';\n      const isColumn = controls === 'thumbnailsColumn';\n      const offset = isRow\n        ? thumbnailsWrapper?.offsetWidth\n        : thumbnailsWrapper?.offsetHeight;\n      const oneItemSize = isRow ? oneItemWidth : oneItemHeight;\n\n      if ((isRow || isColumn) && offset) {\n        const visibleThumbnails = Math.floor(\n          (isRow\n            ? thumbnailsWrapper.clientWidth\n            : thumbnailsWrapper.clientHeight) / oneItemSize\n        );\n        const centerOffset = Math.floor(visibleThumbnails / 2);\n        const targetScrollPosition = (nextItem - centerOffset) * oneItemSize;\n        thumbnailsWrapper.style.scrollBehavior = 'smooth';\n\n        if (isRow) {\n          thumbnailsWrapper.scrollLeft = isRTL()\n            ? -(\n                thumbnailsWrapper.scrollWidth -\n                thumbnailsWrapper.clientWidth -\n                targetScrollPosition\n              )\n            : targetScrollPosition;\n        } else {\n          thumbnailsWrapper.scrollTop = targetScrollPosition;\n        }\n      }\n    },\n    [controls, loop]\n  );\n\n  useEffect(() => {\n    handleThumbnailsScroll(current);\n  }, [current, handleThumbnailsScroll]);\n\n  // Navigation\n  const handleScrollTo = useCallback(\n    (nextSlideIndex: number, smooth?: boolean, reset?: boolean) => {\n      if (thumbnailControls) {\n        handleThumbnailsScroll(nextSlideIndex);\n      }\n\n      const wrapper = wrapperRef.current!;\n      const realWidth = peakWidth\n        ? wrapper.offsetWidth - peakWidth\n        : wrapper.offsetWidth - peakWidth + gapWidth;\n\n      const items = Array.from(wrapper.querySelectorAll('[data-index]')).filter(\n        (element) => {\n          const dataIndex = Number(element.getAttribute('data-index')!);\n          return !isNaN(dataIndex) && dataIndex > -1;\n        }\n      );\n\n      const item = items[nextSlideIndex];\n\n      if (!item) {\n        return;\n      }\n\n      if (reset) {\n        const futureIndex = nextSlideIndex === 0 ? length : 0;\n        const scrollWidth =\n          realWidth * (length + (rest ? rest : perPage) / perPage);\n\n        if (isRTL()) {\n          if (\n            wrapper.scrollLeft <= 0 &&\n            wrapper.scrollLeft > -(realWidth - 5)\n          ) {\n            handleScrollTo(1, true);\n            return;\n          }\n          if (\n            wrapper.scrollLeft < realWidth - scrollWidth &&\n            wrapper.scrollLeft >= -scrollWidth\n          ) {\n            handleScrollTo(length, true);\n            return;\n          }\n\n          wrapper.style.scrollBehavior = 'auto';\n          wrapper.scrollLeft = futureIndex === 0 ? 0 : -scrollWidth;\n          handleScrollTo(futureIndex === 0 ? 1 : length, true);\n        } else {\n          if (wrapper.scrollLeft >= 0 && wrapper.scrollLeft < realWidth - 5) {\n            handleScrollTo(1, true);\n            return;\n          }\n\n          if (\n            wrapper.scrollLeft > scrollWidth - realWidth &&\n            wrapper.scrollLeft <= scrollWidth\n          ) {\n            handleScrollTo(length, true);\n            return;\n          }\n\n          wrapper.style.scrollBehavior = 'auto';\n          wrapper.scrollLeft = futureIndex === 0 ? 0 : scrollWidth;\n          handleScrollTo(futureIndex === 0 ? 1 : length, true);\n          return;\n        }\n      }\n\n      const diff =\n        ((wrapper.offsetWidth - gapWidth) / perPage) *\n          slides[nextSlideIndex].length -\n        peakWidth;\n\n      wrapper.style.scrollBehavior = smooth ? 'smooth' : 'auto';\n      wrapper.scrollLeft = isRTL()\n        ? -(slides[nextSlideIndex].length === perPage\n            ? realWidth * nextSlideIndex\n            : realWidth * (nextSlideIndex - 1) - diff)\n        : slides[nextSlideIndex].length === perPage\n        ? realWidth * nextSlideIndex\n        : realWidth * (nextSlideIndex - 1) + diff;\n      return;\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      gapWidth,\n      length,\n      peakWidth,\n      perPage,\n      rest,\n      slides,\n      handleThumbnailsScroll,\n      controls,\n    ]\n  );\n\n  const handleGoToPrev = useCallback(() => {\n    if (loop) {\n      const nextSlideIndex = current - 1;\n      handleScrollTo(\n        nextSlideIndex,\n        true,\n        isRTL() ? current === length - 1 : current === 1\n      );\n      return;\n    }\n\n    const nextSlideIndex = current <= 0 ? 0 : current - 1;\n    handleScrollTo(nextSlideIndex, true);\n  }, [current, handleScrollTo, loop]); //eslint-disable-line react-hooks/exhaustive-deps\n\n  const handleGoToNext = useCallback(() => {\n    const lastSlideIndex = slides.length - 1;\n\n    if (loop) {\n      const nextSlideIndex = current + 1;\n      handleScrollTo(\n        nextSlideIndex,\n        true,\n        isRTL() ? current === 0 : current === length\n      );\n      return;\n    }\n\n    const nextSlideIndex =\n      current >= lastSlideIndex ? lastSlideIndex : current + 1;\n\n    handleScrollTo(nextSlideIndex, true);\n  }, [slides.length, loop, current, handleScrollTo, length]);\n\n  // Navigate with keyboard\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'ArrowLeft') {\n        event.preventDefault();\n        isRTL() ? handleGoToNext() : handleGoToPrev();\n      }\n\n      if (event.key === 'ArrowRight') {\n        event.preventDefault();\n        isRTL() ? handleGoToPrev() : handleGoToNext();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleGoToNext, handleGoToPrev]);\n\n  // Set default index\n  useLayoutEffect(() => {\n    handleScrollTo(loop ? defaultIndex + 1 : defaultIndex, false);\n  }, [defaultIndex, handleScrollTo, loop, thumbWidth]);\n\n  // Track scrolling (swipes)\n  const handleOnScroll = debounce(() => {\n    const wrapper = wrapperRef.current!;\n    const realWidth = peakWidth\n      ? wrapper.offsetWidth - peakWidth\n      : wrapper.offsetWidth - peakWidth + gapWidth;\n\n    const dividing = Math.abs(wrapper.scrollLeft) / realWidth;\n    const nextSlideIndex = Math.abs(\n      Math.round(dividing) - dividing < 1\n        ? Math.round(dividing)\n        : Math.ceil(dividing)\n    );\n\n    if (thumbnailControls) {\n      handleThumbnailsScroll(nextSlideIndex);\n    }\n\n    if (loop) {\n      const totalWidth =\n        realWidth * (length + (rest ? rest : perPage) / perPage);\n      const scrollOffset = isRTL() ? -wrapper.scrollLeft : wrapper.scrollLeft;\n\n      if (Math.ceil(Math.abs(scrollOffset)) >= Math.ceil(totalWidth) - 5) {\n        wrapper.style.scrollBehavior = 'auto';\n        wrapper.scrollLeft = isRTL()\n          ? -wrapper.offsetWidth +\n            (Math.ceil(scrollOffset) - Math.ceil(totalWidth) - peakWidth)\n          : wrapper.offsetWidth +\n            (Math.ceil(scrollOffset) - Math.ceil(totalWidth) - peakWidth);\n        return;\n      }\n\n      if (Math.abs(scrollOffset) === 0) {\n        wrapper.style.scrollBehavior = 'auto';\n\n        wrapper.scrollLeft = isRTL()\n          ? -(totalWidth - wrapper.offsetWidth + peakWidth)\n          : totalWidth - wrapper.offsetWidth + peakWidth;\n        return;\n      }\n    }\n\n    if (current !== nextSlideIndex) {\n      setCurrent(nextSlideIndex);\n    }\n  }, 100);\n\n  useEffect(() => {\n    const wrapper = wrapperRef.current;\n    wrapper?.addEventListener('scroll', handleOnScroll);\n\n    return () => {\n      wrapper?.removeEventListener('scroll', handleOnScroll);\n    };\n  }, [handleOnScroll]);\n\n  // thumbnails is column -> container is row reverse, controls is column\n  // thumbnails is row -> container is column, controls is row\n  const getArrow = (\n    forThumbnails: boolean,\n    direction: string,\n    callback: () => void\n  ) => {\n    return (\n      <Button\n        className={classes([\n          ['pdp-carousel__button', !forThumbnails],\n          [`pdp-carousel__button--${direction}`, !forThumbnails],\n          [`pdp-carousel__button--${controls}`, forThumbnails],\n        ])}\n        style={{\n          '--height': `${thumbHeight}px`,\n        }}\n        variant=\"tertiary\"\n        aria-label={direction === 'next' ? NextLabel : PreviousLabel}\n        onClick={callback}\n        disabled={\n          loop\n            ? false\n            : direction === 'next'\n            ? current >= slides.length - 1\n            : current < 1\n        }\n      >\n        <Icon\n          className={classes([\n            ['pdp-carousel__button__icon', !forThumbnails],\n            [`pdp-carousel__button__icon--${direction}`, !forThumbnails],\n            [\n              `pdp-carousel__button__icon--${controls}--${direction}`,\n              forThumbnails,\n            ],\n          ])}\n          size={ICON_SIZE}\n          source={ChevronDown}\n        />\n      </Button>\n    );\n  };\n\n  const prevArrow =\n    arrows &&\n    slides.length != 1 &&\n    getArrow(thumbnailControls, 'prev', handleGoToPrev);\n\n  const nextArrow =\n    arrows &&\n    slides.length != 1 &&\n    getArrow(thumbnailControls, 'next', handleGoToNext);\n\n  const prevArrowMainImage =\n    arrows && slides.length != 1 && getArrow(false, 'prev', handleGoToPrev);\n\n  const nextArrowMainImage =\n    arrows && slides.length != 1 && getArrow(false, 'next', handleGoToNext);\n\n  return (\n    <div\n      role=\"region\"\n      aria-roledescription={Label}\n      className={classes([\n        'pdp-carousel',\n        ['pdp-carousel--main-image-controls', arrowsOnMainImage],\n        ['pdp-carousel--arrows', arrows && !thumbnailControls],\n        [`pdp-carousel--${controls}`, thumbnailControls],\n        className,\n      ])}\n      style={{\n        '--flex-carousel':\n          controls === 'thumbnailsColumn' ? 'row-reverse' : 'column',\n        '--gap': thumbnailControls ? '0' : 'var(--spacing-small)',\n        '--width': width,\n      }}\n      {...props}\n    >\n      {/* Slideshow */}\n      <div\n        ref={wrapperRef}\n        className={classes([\n          'pdp-carousel__wrapper',\n          `pdp-carousel__wrapper--${direction}`,\n          ['pdp-carousel__wrapper--scrollbar', scrollbar],\n          ['pdp-carousel__wrapper--peak', peak],\n        ])}\n        style={{\n          '--total-width': controls === 'thumbnailsColumn' ? `81.6%` : `100%`,\n          '--height': controls === 'thumbnailsColumn' ? 'auto' : height,\n          '--gap': gap ? `var(--spacing-${gap})` : '0px',\n          '--per-page': perPage,\n        }}\n        tabIndex={0}\n      >\n        {slides.map((page, index) => {\n          const orphan = page.length < perPage;\n\n          return (\n            <div\n              key={index}\n              role=\"group\"\n              aria-roledescription={SlideLabel}\n              data-index={index}\n              className={classes([\n                'pdp-carousel__slide',\n                `pdp-carousel__slide--${direction}`,\n                ['pdp-carousel__slide--active', current === index],\n                ['pdp-carousel__slide--orphan', orphan],\n                ['pdp-carousel__slide--hidden', thumbWidth === 0],\n              ])}\n              style={{\n                '--length': page.length,\n              }}\n            >\n              {page}\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Previous and next arrows for Carousel without thumbnails */}\n      {!thumbnailControls && (\n        <>\n          {prevArrow}\n          {nextArrow}\n        </>\n      )}\n\n      {thumbnailControls && arrowsOnMainImage && (\n        <>\n          {prevArrowMainImage}\n          {nextArrowMainImage}\n        </>\n      )}\n\n      {/* Controls */}\n      {controls && slides.length != 1 && (\n        <div\n          className={classes([\n            [\n              `pdp-carousel__controls__container--${controls}`,\n              thumbnailControls,\n            ],\n            [\n              'pdp-carousel__controls__container--no-arrows',\n              !arrows || arrowsOnMainImage,\n            ],\n          ])}\n          style={{\n            '--width': controls === 'thumbnailsRow' ? `${thumbWidth}px` : width,\n            '--height': `${thumbHeight}px`,\n            '--nr-thumbnails': thumbnailSlides.length,\n          }}\n        >\n          {(thumbnailControls || isZoomed) && !arrowsOnMainImage && prevArrow}\n\n          <div\n            ref={thumbnailsWrapperRef}\n            className={classes([\n              [\n                `pdp-carousel__controls__wrapper--${controls}`,\n                thumbnailControls,\n              ],\n              [`pdp-carousel__controls__wrapper`, thumbnailControls],\n            ])}\n          >\n            <div\n              role=\"group\"\n              aria-label={ControlsLabel}\n              className={classes([\n                'pdp-carousel__controls',\n                [`pdp-carousel__controls--${controls}`, thumbnailControls],\n              ])}\n            >\n              {(loop ? slides.slice(0, length) : slides).map((_, key) => {\n                const buttonsLength = loop ? length : slides.length;\n                const active = loop ? current - 1 === key : current === key;\n\n                if (!thumbnailControls) {\n                  return (\n                    <button\n                      key={key}\n                      aria-label={ControlsBtnLabel.replace(\n                        '{key}',\n                        String(key + 1)\n                      ).replace('{total}', String(buttonsLength))}\n                      onClick={() => {\n                        handleScrollTo(loop ? key + 1 : key, true);\n                      }}\n                      className={classes([\n                        'pdp-carousel__controls__button',\n                        ['pdp-carousel__controls__button--active', active],\n                      ])}\n                    />\n                  );\n                }\n                return (\n                  <label\n                    className={classes(['pdp-carousel__thumbnail__container'])}\n                    key={key}\n                    ref={(el: HTMLLabelElement | null) => {\n                      if (el) {\n                        thumbnailsRefs.current[key] = el;\n                      }\n                    }}\n                  >\n                    <input\n                      type=\"radio\"\n                      name={'carousel-thumbnails'}\n                      aria-label={ControlsBtnLabel.replace(\n                        '{key}',\n                        String(key + 1)\n                      ).replace('{total}', String(buttonsLength))}\n                      checked={active && thumbWidth !== 0}\n                      onChange={() => {\n                        handleScrollTo(loop ? key + 1 : key, true);\n                      }}\n                      {...props}\n                      className={classes([\n                        'pdp-carousel__thumbnail',\n                        [\n                          'pdp-carousel__thumbnail--selected',\n                          active && thumbWidth !== 0,\n                        ],\n                      ])}\n                    />\n\n                    <span\n                      className={classes(['pdp-carousel__thumbnail__span'])}\n                    >\n                      {thumbnailSlides[key]}\n                    </span>\n                  </label>\n                );\n              })}\n            </div>\n          </div>\n\n          {(thumbnailControls || isZoomed) && !arrowsOnMainImage && nextArrow}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Utilities\nfunction getPerPageFromBreakpoint(\n  breakpoints: { small: number; medium: number; large: number } | number,\n  width = 0\n) {\n  if (typeof breakpoints === 'number') return breakpoints;\n\n  const { small, medium, large } = breakpoints;\n  const breakpointsMap = [\n    { breakpoint: 1024, value: large },\n    { breakpoint: 786, value: medium },\n    { breakpoint: 0, value: small },\n  ];\n\n  const matchingBreakpoint = breakpointsMap.find(\n    ({ breakpoint }) => width > breakpoint\n  );\n\n  return matchingBreakpoint ? matchingBreakpoint.value : small;\n}\n\nfunction isRTL() {\n  return document.documentElement.dir === 'rtl';\n}\n","/**\n * ADOBE CONFIDENTIAL\n * __________________\n * Copyright 2023 Adobe\n * All Rights Reserved.\n * __________________\n * NOTICE: All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n */\n\nimport { FunctionComponent } from 'preact';\nimport { HTMLAttributes, useCallback, useEffect, useRef } from 'preact/compat';\nimport { classes } from '@adobe-commerce/elsie/lib';\nimport { useText } from '@adobe-commerce/elsie/i18n';\nimport { Close as CloseSVG } from '@adobe-commerce/elsie/icons';\nimport { Button } from '@adobe-commerce/elsie/components';\n\nimport '@/pdp/components/Overlay/Overlay.css';\n\nexport interface OverlayProps extends HTMLAttributes<HTMLDivElement> {\n  centered?: boolean;\n  onClose?: () => void;\n}\n\nexport const Overlay: FunctionComponent<OverlayProps> = ({\n  centered,\n  onClose,\n  className,\n  children,\n  ...props\n}) => {\n  // i18n\n  const CloseLabel = useText('PDP.Overlay.Close.label').label;\n  const overlayRef = useRef<HTMLInputElement>(null);\n  const handleOnClose = useCallback(() => {\n    onClose?.();\n  }, [onClose]);\n\n  // Close on ESC\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        handleOnClose();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleOnClose]);\n\n  // Prevent document scrolling\n  useEffect(() => {\n    const input = overlayRef.current;\n    input?.focus();\n\n    const scrollingElement = document.scrollingElement as HTMLElement;\n\n    const defaultOverflowValue = scrollingElement.style.overflow;\n\n    scrollingElement.style.overflow = 'hidden';\n\n    return () => {\n      scrollingElement.style.overflow = defaultOverflowValue;\n    };\n  }, []);\n\n  return (\n    <div\n      {...props}\n      className={classes([\n        'pdp-overlay',\n        ['pdp-overlay--centered', centered],\n        className,\n      ])}\n      ref={overlayRef}\n      role=\"dialog\"\n      aria-describedby=\"overlay-content\"\n      tabindex={0}\n    >\n      <div className=\"pdp-overlay__content\" id=\"overlay-content\">\n        {children}\n      </div>\n      <Button\n        aria-label={CloseLabel}\n        variant=\"tertiary\"\n        className=\"pdp-overlay__close-button\"\n        onClick={handleOnClose}\n        icon={<CloseSVG />}\n      />\n    </div>\n  );\n};\n","/**\n * ADOBE CONFIDENTIAL\n * __________________\n * Copyright 2024 Adobe\n * All Rights Reserved.\n * __________________\n * NOTICE: All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n */\nimport { cloneElement, FunctionComponent, VNode } from 'preact';\nimport {\n  Children,\n  useEffect,\n  useState,\n  useRef,\n  useCallback,\n} from 'preact/compat';\n\nimport '@/pdp/components/Zoom/Zoom.css';\nimport { Button } from '@adobe-commerce/elsie/components';\nimport { Close as CloseSVG } from '@adobe-commerce/elsie/icons';\nimport { useText } from '@adobe-commerce/elsie/i18n';\n\nexport interface ZoomProps {\n  children: VNode[] | VNode;\n  scale?: number;\n  closeButton?: boolean;\n}\n\nexport const Zoom: FunctionComponent<ZoomProps> = ({\n  children,\n  scale = 2.0,\n  closeButton = true,\n}) => {\n  const [zoomed, setZoomed] = useState(false);\n  const [figureClassName, setFigureClassName] = useState('pdp-zoom');\n  const [drag, setDrag] = useState(false);\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\n  const [dragStartPosition, setDragStartPosition] = useState({ x: 0, y: 0 });\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n\n  const containerRef = useRef<HTMLElement>(null);\n  const cachedBoundsRef = useRef<DOMRect | null>(null);\n  const animationFrameRef = useRef<number | null>(null);\n  const lastTransformRef = useRef<string>('none');\n\n  const touchStartRef = useRef<{ x: number; y: number; time: number } | null>(\n    null\n  );\n  const isSwipingRef = useRef<boolean>(false);\n  const lastValidTouchRef = useRef<{ clientX: number; clientY: number } | null>(\n    null\n  );\n\n  const updatePosition = useCallback(\n    (event: MouseEvent | TouchEvent) => {\n      const updatePositionLogic = () => {\n        let zoomer: DOMRect;\n\n        if (cachedBoundsRef.current && containerRef.current) {\n          zoomer = cachedBoundsRef.current;\n        } else if (containerRef.current) {\n          zoomer = containerRef.current.getBoundingClientRect();\n          cachedBoundsRef.current = zoomer;\n        } else {\n          zoomer = (\n            event.currentTarget as HTMLElement\n          )?.getBoundingClientRect();\n        }\n\n        const overlap = (100 - 100 / scale) / 2;\n        let coordinates: { clientX: number; clientY: number } | null = null;\n\n        if ('touches' in event) {\n          if (event.touches.length > 0) {\n            coordinates = event.touches[0];\n            lastValidTouchRef.current = {\n              clientX: coordinates.clientX,\n              clientY: coordinates.clientY,\n            };\n          } else if (event.type === 'touchend' && touchStartRef.current) {\n            coordinates = {\n              clientX: touchStartRef.current.x,\n              clientY: touchStartRef.current.y,\n            };\n          } else if (lastValidTouchRef.current) {\n            coordinates = lastValidTouchRef.current;\n          } else {\n            return;\n          }\n        } else if (event instanceof MouseEvent) {\n          coordinates = event;\n        } else {\n          return;\n        }\n\n        const relativeX =\n          ((coordinates.clientX - zoomer.left) / zoomer.width) * 100;\n        const relativeY =\n          ((coordinates.clientY - zoomer.top) / zoomer.height) * 100;\n\n        const x = ((50 - relativeX) * (scale - 1)) / scale;\n        const y = ((50 - relativeY) * (scale - 1)) / scale;\n\n        setPosition({\n          x: Math.max(-overlap, Math.min(x, overlap)) || 0,\n          y: Math.max(-overlap, Math.min(y, overlap)) || 0,\n        });\n      };\n\n      if (typeof process !== 'undefined' && process.env?.NODE_ENV === 'test') {\n        updatePositionLogic();\n      } else {\n        if (animationFrameRef.current) {\n          cancelAnimationFrame(animationFrameRef.current);\n        }\n        animationFrameRef.current = requestAnimationFrame(updatePositionLogic);\n      }\n    },\n    [scale]\n  );\n\n  useEffect(() => {\n    cachedBoundsRef.current = null;\n  }, [zoomed]);\n\n  const startDrag = (event: TouchEvent) => {\n    if (!zoomed || event.type !== 'touchstart') return;\n    setDragStart({ x: event.touches[0].clientX, y: event.touches[0].clientY });\n    setDragStartPosition({ x: position.x, y: position.y });\n    setDrag(true);\n  };\n\n  const dragMove = (event: TouchEvent) => {\n    if (!drag || event.type !== 'touchmove') return;\n    const zoomer = (\n      event.currentTarget as HTMLElement\n    )?.getBoundingClientRect();\n    const overlap = (100 - 100 / scale) / 2;\n    const movedX = event.touches[0].clientX - dragStart.x;\n    const movedY = event.touches[0].clientY - dragStart.y;\n    const movedXPercent = (movedX * 100) / (zoomer.width * scale);\n    const movedYPercent = (movedY * 100) / (zoomer.height * scale);\n    const x = dragStartPosition.x + movedXPercent;\n    const y = dragStartPosition.y + movedYPercent;\n    setPosition({\n      x: Math.max(-overlap, Math.min(x, overlap)) || 0,\n      y: Math.max(-overlap, Math.min(y, overlap)) || 0,\n    });\n    event.preventDefault();\n  };\n\n  const handleTouchStart = (event: TouchEvent) => {\n    if (closeButton) {\n      touchStartRef.current = {\n        x: event.touches[0].clientX,\n        y: event.touches[0].clientY,\n        time: Date.now(),\n      };\n\n      lastValidTouchRef.current = {\n        clientX: event.touches[0].clientX,\n        clientY: event.touches[0].clientY,\n      };\n\n      isSwipingRef.current = false;\n\n      if (zoomed) {\n        startDrag(event);\n      }\n    } else {\n      if (drag) return;\n\n      !zoomed && updatePosition(event);\n\n      setZoomed(!zoomed);\n\n      event.preventDefault();\n    }\n  };\n\n  const handleTouchMove = (event: TouchEvent) => {\n    if (event.touches.length === 0) return;\n\n    lastValidTouchRef.current = {\n      clientX: event.touches[0].clientX,\n      clientY: event.touches[0].clientY,\n    };\n\n    if (closeButton) {\n      if (!touchStartRef.current) return;\n\n      if (drag) {\n        dragMove(event);\n        return;\n      }\n\n      const touchX = event.touches[0].clientX;\n      const touchY = event.touches[0].clientY;\n      const deltaX = Math.abs(touchX - touchStartRef.current.x);\n      const deltaY = Math.abs(touchY - touchStartRef.current.y);\n\n      if (deltaX > 10 || deltaY > 10) {\n        isSwipingRef.current = true;\n      }\n    }\n\n    if (zoomed) {\n      updatePosition(event);\n    }\n  };\n\n  const handleTouchEnd = (event: TouchEvent) => {\n    if (closeButton) {\n      if (!touchStartRef.current) return;\n\n      const tapDuration = Date.now() - touchStartRef.current.time;\n\n      if (!isSwipingRef.current && tapDuration < 300 && !drag) {\n        setZoomed(true);\n        updatePosition(event);\n        event.preventDefault();\n      }\n\n      setDrag(false);\n      touchStartRef.current = null;\n    } else {\n      setZoomed(false);\n    }\n  };\n\n  const handleClick = (event: MouseEvent) => {\n    if ('touches' in event) return;\n\n    if (drag) return;\n\n    if (zoomed) {\n      !closeButton && setZoomed(false);\n    } else {\n      setZoomed(true);\n      updatePosition(event);\n    }\n    event.preventDefault();\n  };\n\n  const handleMove = (event: MouseEvent) => {\n    if ('touches' in event) return;\n\n    if (zoomed) {\n      updatePosition(event);\n    }\n  };\n\n  const handleLeave = (event: MouseEvent) => {\n    if ('touches' in event) return;\n\n    if (closeButton) {\n      setDrag(false);\n      return;\n    }\n    setZoomed(false);\n  };\n\n  const closeButtonClick = (event: MouseEvent | TouchEvent) => {\n    setZoomed(false);\n    event.stopPropagation();\n  };\n\n  const transformStyle = zoomed\n    ? `scale(${scale}) translateX(${position.x}%) translateY(${position.y}%)`\n    : 'none';\n\n  const CloseLabel = useText('PDP.Zoom.Close.label').label;\n  const child = Children.only(children) as any;\n\n  useEffect(() => {\n    const handleGalleryChange = () => {\n      if (zoomed) {\n        setZoomed(false);\n        setPosition({ x: 0, y: 0 });\n        setDrag(false);\n      }\n    };\n\n    const gallery = document.querySelector('#gallery');\n    if (gallery) {\n      gallery.addEventListener('click', handleGalleryChange);\n      return () => gallery.removeEventListener('click', handleGalleryChange);\n    }\n  }, [zoomed]);\n\n  const ImageClone = cloneElement(child, {\n    ...child.props,\n    draggable: false,\n    style: {\n      ...child.props?.style,\n      '--transform': transformStyle,\n    },\n  });\n\n  useEffect(() => {\n    const className = zoomed\n      ? `pdp-zoom ${closeButton ? 'pdp-zoom--no-effects' : 'pdp-zoom--zoomed'}`\n      : 'pdp-zoom';\n    setFigureClassName(className);\n  }, [zoomed, closeButton]);\n\n  useEffect(() => {\n    if (lastTransformRef.current === transformStyle) return;\n    lastTransformRef.current = transformStyle;\n\n    const updateTransforms = () => {\n      if (!containerRef.current) return;\n\n      const images = containerRef.current.querySelectorAll('img');\n      images.forEach((img) => {\n        if (zoomed && transformStyle !== 'none') {\n          img.style.setProperty('transform', transformStyle, 'important');\n        } else {\n          img.style.removeProperty('transform');\n        }\n      });\n    };\n\n    requestAnimationFrame(updateTransforms);\n  }, [transformStyle, zoomed]);\n\n  useEffect(() => {\n    return () => {\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    };\n  }, []);\n\n  return (\n    <figure\n      ref={containerRef}\n      className={figureClassName}\n      onClick={handleClick}\n      onMouseMove={handleMove}\n      onMouseLeave={handleLeave}\n      onTouchStart={handleTouchStart}\n      onTouchMove={handleTouchMove}\n      onTouchEnd={handleTouchEnd}\n    >\n      {ImageClone}\n      {closeButton && zoomed && (\n        <Button\n          aria-label={CloseLabel}\n          variant=\"tertiary\"\n          className=\"pdp-zoom__close-button\"\n          icon={<CloseSVG />}\n          onClick={closeButtonClick}\n        />\n      )}\n    </figure>\n  );\n};\n"],"names":["SvgChevronDown","props","React","SvgClose","PEAK_WIDTH","THUMB_GAP","ICON_SIZE","GapSize","Carousel","show","scrollbar","peak","arrows","controls","arrowsOnMainImage","loop","gap","direction","width","height","defaultIndex","className","children","thumbnails","isZoomed","Label","useText","SlideLabel","PreviousLabel","NextLabel","ControlsLabel","ControlsBtnLabel","perPage","setPerPage","useState","getPerPageFromBreakpoint","length","Children","peakWidth","gapWidth","rest","current","setCurrent","isRTL","thumbnailsRefs","useRef","thumbWidth","setThumbWidth","thumbHeight","setThumbHeight","thumbnailSlides","useMemo","slides","returnValue","acc","child","i","wrapperRef","thumbnailsWrapperRef","thumbnailControls","useEffect","wrapper","handleResize","debounce","newPerPage","observer","handleThumbnailsScroll","useCallback","nextSlideIndex","nextItem","thumbnailRef","oneItemWidth","oneItemHeight","thumbnailsWrapper","isRow","isColumn","offset","oneItemSize","visibleThumbnails","centerOffset","targetScrollPosition","handleScrollTo","smooth","reset","realWidth","element","dataIndex","futureIndex","scrollWidth","diff","handleGoToPrev","handleGoToNext","lastSlideIndex","handleKeyDown","event","useLayoutEffect","handleOnScroll","dividing","totalWidth","scrollOffset","getArrow","forThumbnails","callback","jsx","Button","classes","Icon","ChevronDown","prevArrow","nextArrow","prevArrowMainImage","nextArrowMainImage","jsxs","page","index","orphan","Fragment","_","key","buttonsLength","active","el","breakpoints","small","medium","large","matchingBreakpoint","breakpoint","Overlay","centered","onClose","CloseLabel","overlayRef","handleOnClose","input","scrollingElement","defaultOverflowValue","CloseSVG","Zoom","scale","closeButton","zoomed","setZoomed","figureClassName","setFigureClassName","drag","setDrag","dragStart","setDragStart","dragStartPosition","setDragStartPosition","position","setPosition","containerRef","cachedBoundsRef","animationFrameRef","lastTransformRef","touchStartRef","isSwipingRef","lastValidTouchRef","updatePosition","updatePositionLogic","zoomer","_a","overlap","coordinates","relativeX","relativeY","x","y","startDrag","dragMove","movedX","movedY","movedXPercent","movedYPercent","handleTouchStart","handleTouchMove","touchX","touchY","deltaX","deltaY","handleTouchEnd","tapDuration","handleClick","handleMove","handleLeave","closeButtonClick","transformStyle","handleGalleryChange","gallery","ImageClone","cloneElement","img"],"mappings":"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","x_google_ignoreList":[0,1]}