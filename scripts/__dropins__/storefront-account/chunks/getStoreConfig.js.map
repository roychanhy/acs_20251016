{"version":3,"file":"getStoreConfig.js","sources":["/@dropins/storefront-account/src/api/initialize/initialize.ts","/@dropins/storefront-account/src/data/transforms/transform-store-config.ts","/@dropins/storefront-account/src/api/getStoreConfig/graphql/getStoreConfig.graphql.ts","/@dropins/storefront-account/src/api/getStoreConfig/getStoreConfig.ts"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { Initializer, Model } from '@adobe-commerce/elsie/lib';\nimport { Lang } from '@adobe-commerce/elsie/i18n';\nimport { OrderHistoryModel } from '@/account/data/models';\nimport { CustomerDataModelShort } from '@/account/data/models/customer';\n\ntype ConfigProps = {\n  langDefinitions?: Lang;\n  authHeaderConfig?: {\n    header?: string;\n    tokenPrefix?: string;\n  };\n  models?: {\n    OrderHistoryModel?: Model<OrderHistoryModel>;\n    CustomerDataModelShort?: Model<CustomerDataModelShort>;\n  };\n};\n\nexport const initialize = new Initializer<ConfigProps>({\n  init: async (config) => {\n    const defaultConfig = {\n      authHeaderConfig: {\n        header: 'Authorization',\n        tokenPrefix: 'Bearer',\n      },\n    };\n\n    initialize.config.setConfig({ ...defaultConfig, ...config });\n  },\n\n  listeners: () => [],\n});\n\nexport const config = initialize.config;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { GetStoreConfigResponse } from '@/account/types';\nimport { StoreConfigModel } from '../models';\n\nexport const transformStoreConfig = (\n  response: GetStoreConfigResponse\n): StoreConfigModel => {\n  return {\n    baseMediaUrl: response?.data?.storeConfig?.base_media_url,\n    minLength: +response?.data?.storeConfig?.minimum_password_length || 3,\n    requiredCharacterClasses:\n      +response?.data?.storeConfig?.required_character_classes_number || 0,\n    storeCode: response?.data?.storeConfig?.store_code ?? '',\n  };\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nexport const GET_STORE_CONFIG = /* GraphQL */ `\n  query GET_STORE_CONFIG {\n    storeConfig {\n      base_media_url\n      autocomplete_on_storefront\n      minimum_password_length\n      required_character_classes_number\n      store_code\n    }\n  }\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { fetchGraphQl } from '../fetch-graphql';\nimport { GET_STORE_CONFIG } from './graphql/getStoreConfig.graphql';\nimport { handleNetworkError } from '@/account/lib/network-error';\nimport { handleFetchError } from '@/account/lib/fetch-error';\nimport { GetStoreConfigResponse } from '@/account/types';\nimport { transformStoreConfig } from '@/account/data/transforms';\nimport { StoreConfigModel } from '@/account/data/models';\n\nexport const getStoreConfig = async (): Promise<StoreConfigModel> => {\n  return await fetchGraphQl(GET_STORE_CONFIG, {\n    method: 'GET',\n    cache: 'force-cache',\n  })\n    .then((response: GetStoreConfigResponse) => {\n      if (response.errors?.length) return handleFetchError(response.errors);\n\n      return transformStoreConfig(response);\n    })\n    .catch(handleNetworkError);\n};\n"],"names":["initialize","Initializer","config","defaultConfig","transformStoreConfig","response","_b","_a","_d","_c","_f","_e","_h","_g","GET_STORE_CONFIG","getStoreConfig","fetchGraphQl","handleFetchError","handleNetworkError"],"mappings":"iHAkCa,MAAAA,EAAa,IAAIC,EAAyB,CACrD,KAAM,MAAOC,GAAW,CACtB,MAAMC,EAAgB,CACpB,iBAAkB,CAChB,OAAQ,gBACR,YAAa,QAAA,CAEjB,EAEAH,EAAW,OAAO,UAAU,CAAE,GAAGG,EAAe,GAAGD,EAAQ,CAC7D,EAEA,UAAW,IAAM,CAAA,CACnB,CAAC,EAEYA,EAASF,EAAW,OC7BpBI,EACXC,GACqB,qBACd,MAAA,CACL,cAAcC,GAAAC,EAAAF,GAAA,YAAAA,EAAU,OAAV,YAAAE,EAAgB,cAAhB,YAAAD,EAA6B,eAC3C,UAAW,GAACE,GAAAC,EAAAJ,GAAA,YAAAA,EAAU,OAAV,YAAAI,EAAgB,cAAhB,YAAAD,EAA6B,0BAA2B,EACpE,yBACE,GAACE,GAAAC,EAAAN,GAAA,YAAAA,EAAU,OAAV,YAAAM,EAAgB,cAAhB,YAAAD,EAA6B,oCAAqC,EACrE,YAAWE,GAAAC,EAAAR,GAAA,YAAAA,EAAU,OAAV,YAAAQ,EAAgB,cAAhB,YAAAD,EAA6B,aAAc,EACxD,CACF,ECbaE,EAAiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECQjCC,EAAiB,SACrB,MAAMC,EAAaF,EAAkB,CAC1C,OAAQ,MACR,MAAO,aAAA,CACR,EACE,KAAMT,GAAqC,OAC1C,OAAIE,EAAAF,EAAS,SAAT,MAAAE,EAAiB,OAAeU,EAAiBZ,EAAS,MAAM,EAE7DD,EAAqBC,CAAQ,CAAA,CACrC,EACA,MAAMa,CAAkB"}