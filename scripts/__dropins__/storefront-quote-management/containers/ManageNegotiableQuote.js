/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as t,jsxs as d}from"@dropins/tools/preact-jsx-runtime.js";import{useState as S,useEffect as G,useMemo as l,useCallback as $}from"@dropins/tools/preact-compat.js";import{classes as m,VComponent as o,Slot as u,getGlobalLocale as U}from"@dropins/tools/lib.js";/* empty css                       */import{Skeleton as V,SkeletonRow as f,Picker as X,InLineAlert as H,Button as L,TextArea as J}from"@dropins/tools/components.js";import{events as K}from"@dropins/tools/event-bus.js";/* empty css                                  */import"@dropins/tools/preact.js";/* empty css                   */import{S as Y}from"../chunks/WarningFilled.js";import{useText as Z}from"@dropins/tools/i18n.js";const C=({className:p,loading:e,quoteName:i,quoteStatus:c,banner:g,details:a,actionBar:q,quoteContent:N,shippingInformationTitle:h,shippingInformation:n,quoteCommentsTitle:_,quoteComments:v,footer:x,...Q})=>e?t(D,{}):d("div",{...Q,className:m(["quote-management-manage-negotiable-quote",p]),children:[d("div",{className:m(["quote-management-manage-negotiable-quote__header"]),children:[i&&t(o,{node:i,className:m(["quote-management-manage-negotiable-quote__quote-name"])}),c&&t(o,{node:c,className:m(["quote-management-manage-negotiable-quote__quote-status"])})]}),g&&t(o,{node:g,className:m(["quote-management-manage-negotiable-quote__banner"])}),a&&t(o,{node:a,className:m(["quote-management-manage-negotiable-quote__details"])}),q&&t(o,{node:q,className:m(["quote-management-manage-negotiable-quote__action-bar"])}),N&&t(o,{node:N,className:m(["quote-management-manage-negotiable-quote__quote-content"])}),d("div",{"data-testid":"quote-shipping-information-container",className:m(["quote-management-manage-negotiable-quote__shipping-information-container"]),children:[h&&t(o,{node:h,className:m(["quote-management-manage-negotiable-quote__shipping-information-title"])}),n&&t(o,{node:n,className:m(["quote-management-manage-negotiable-quote__shipping-information"])})]}),d("div",{"data-testid":"quote-comments-container",className:m(["quote-management-manage-negotiable-quote__quote-comments-container"]),children:[_&&t(o,{node:_,className:m(["quote-management-manage-negotiable-quote__quote-comments-title"])}),v&&t(o,{node:v,className:m(["quote-management-manage-negotiable-quote__quote-comments"])})]}),t(o,{node:x,className:m(["quote-management-manage-negotiable-quote__footer"])})]}),D=()=>d(V,{"data-testid":"manage-negotiable-quote-skeleton",children:[t(f,{variant:"heading",fullWidth:!0,size:"large"}),t(f,{variant:"row",fullWidth:!1,size:"small"}),t(f,{variant:"row",fullWidth:!1,size:"small"}),t(f,{variant:"row",fullWidth:!0}),t(f,{variant:"row",fullWidth:!0,size:"xlarge",lines:2}),t(f,{variant:"row",fullWidth:!1,size:"small"})]}),O=({className:p,dropdownPlaceholder:e,dropdownOptions:i,handleDropdownChange:c,buttons:g,...a})=>{const q=i&&i.length>0,N=g&&g.length>0,h=(i==null?void 0:i.map(n=>({text:n.label,value:n.value})))||[];return h.unshift({text:e||"",value:""}),t("div",{className:"quote-management-actions-bar__container","data-testid":"actions-bar-container",children:d("div",{className:m(["quote-management-actions-bar",p]),"data-testid":"actions-bar",...a,children:[q&&t(X,{name:"dropdown",id:"dropdown",onInput:c,className:"quote-management-actions-bar__dropdown","data-testid":"dropdown",options:h}),N&&t("div",{className:"quote-management-actions-bar__buttons","data-testid":"buttons-container",children:g==null?void 0:g.map((n,_)=>t(o,{node:n,className:m(["quote-management-actions-bar__button"])},_))})]})})},ue=({onActionsDropdownChange:p,slots:e,onActionsButtonClick:i,onSendForReview:c,...g})=>{const[a,q]=S(void 0),[N,h]=S(!0),n=Z({createdLabel:"NegotiableQuote.Manage.createdLabel",salesRepLabel:"NegotiableQuote.Manage.salesRepLabel",expiresLabel:"NegotiableQuote.Manage.expiresLabel",actionsLabel:"NegotiableQuote.Manage.actionsLabel",remove:"NegotiableQuote.Manage.actions.remove",close:"NegotiableQuote.Manage.actionButtons.close",delete:"NegotiableQuote.Manage.actionButtons.delete",print:"NegotiableQuote.Manage.actionButtons.print",createTemplate:"NegotiableQuote.Manage.actionButtons.createTemplate",createCopy:"NegotiableQuote.Manage.actionButtons.createCopy",shippingInformationTitle:"NegotiableQuote.Manage.shippingInformation.title",quoteCommentsTitle:"NegotiableQuote.Manage.quoteComments.title",quoteCommentsPlaceholder:"NegotiableQuote.Manage.quoteComments.placeholder",sendForReview:"NegotiableQuote.Manage.actionButtons.sendForReview",bannerTitle:"NegotiableQuote.Manage.bannerTitle",statusPending:"NegotiableQuote.Manage.bannerStatusMessages.pending",statusExpired:"NegotiableQuote.Manage.bannerStatusMessages.expired"});G(()=>{const b=K.on("quote-management/quote-data",s=>{const{quote:r}=s;r&&(q(r),h(!1))},{eager:!0});return()=>b==null?void 0:b.off()},[]);const _=l(()=>t(u,{name:"QuoteName",slot:e==null?void 0:e.QuoteName,context:{quoteName:a==null?void 0:a.name,quoteData:a},children:t("h1",{"data-testid":"quote-name",children:a==null?void 0:a.name})}),[e==null?void 0:e.QuoteName,a]),v=l(()=>t(u,{name:"QuoteStatus",slot:e==null?void 0:e.QuoteStatus,context:{quoteStatus:a==null?void 0:a.status,quoteData:a},children:t("div",{"data-testid":"quote-status",children:a==null?void 0:a.status})}),[e==null?void 0:e.QuoteStatus,a]),Q=$(b=>{switch(b){case"PENDING":return n.statusPending;case"EXPIRED":return n.statusExpired;default:return null}},[n])(a==null?void 0:a.status),M=Q&&t(H,{type:"warning",variant:"secondary",icon:t(Y,{}),heading:n.bannerTitle,description:Q}),y=M&&t(u,{name:"Banner","data-testid":"banner",slot:e==null?void 0:e.Banner,context:{quoteData:a},children:M}),I=l(()=>{if(!a)return null;const b=U()||"en-US",s=new Intl.DateTimeFormat(b,{year:"numeric",month:"long",day:"numeric"});let r;try{r=s.format(new Date(a.expirationDate))}catch{r=a.expirationDate}return d(u,{name:"Details",slot:e==null?void 0:e.Details,context:{quoteData:a},children:[d("div",{className:"quote-management-manage-negotiable-quote__detail",children:[t("span",{className:"quote-management-manage-negotiable-quote__detail-title","data-testid":"created-label",children:n.createdLabel}),d("span",{className:"quote-management-manage-negotiable-quote__detail-content","data-testid":"created-value",children:[s.format(new Date(a.createdAt))," (",a.buyer.firstname," ",a.buyer.lastname,")"]})]}),d("div",{className:"quote-management-manage-negotiable-quote__detail",children:[t("span",{className:"quote-management-manage-negotiable-quote__detail-title","data-testid":"sales-rep-label",children:n.salesRepLabel}),t("span",{className:"quote-management-manage-negotiable-quote__detail-content","data-testid":"sales-rep-value",children:a.salesRepName})]}),d("div",{className:"quote-management-manage-negotiable-quote__detail",children:[t("span",{className:"quote-management-manage-negotiable-quote__detail-title","data-testid":"expires-label",children:n.expiresLabel}),t("span",{className:"quote-management-manage-negotiable-quote__detail-content","data-testid":"expires-value",children:r})]})]})},[e==null?void 0:e.Details,n,a]),T=l(()=>[{label:n.close,value:"close"},{label:n.delete,value:"delete"},{label:n.print,value:"print"},{label:n.createTemplate,value:"createTemplate"},{label:n.createCopy,value:"createCopy"}],[n]),w=l(()=>{const b=r=>{p==null||p(r)},s=r=>{switch(r){case"close":i==null||i(r);break;case"delete":i==null||i(r);break;case"print":i==null||i(r);break;case"createTemplate":i==null||i(r);break;case"createCopy":i==null||i(r);break}};return t(u,{name:"ActionBar",slot:e==null?void 0:e.ActionBar,context:{quoteData:a},children:t(O,{dropdownPlaceholder:n.actionsLabel,dropdownOptions:[{label:n.remove,value:"remove"}],handleDropdownChange:b,buttons:T.map(r=>t(L,{variant:"tertiary",onClick:()=>s(r.value),"data-testid":`actions-bar-${r.value}-button`,"data-action":r.value,disabled:r.disabled,children:r.label},r.value))})})},[T,n,e==null?void 0:e.ActionBar,a,p,i]),P=l(()=>t(u,{name:"QuoteContent",slot:e==null?void 0:e.QuoteContent,context:{quoteData:a}}),[e==null?void 0:e.QuoteContent,a]),W=l(()=>t(u,{name:"ShippingInformationTitle",slot:e==null?void 0:e.ShippingInformationTitle,context:{quoteData:a},children:t("h2",{children:n.shippingInformationTitle})}),[e==null?void 0:e.ShippingInformationTitle,a,n]),z=l(()=>t(u,{name:"ShippingInformation",slot:e==null?void 0:e.ShippingInformation,context:{quoteData:a},children:t("div",{children:"TBD"})}),[e==null?void 0:e.ShippingInformation,a]),E=l(()=>t(u,{name:"QuoteCommentsTitle",slot:e==null?void 0:e.QuoteCommentsTitle,context:{quoteData:a},children:t("h2",{children:n.quoteCommentsTitle})}),[e==null?void 0:e.QuoteCommentsTitle,n,a]),F=l(()=>t(u,{name:"QuoteComments",slot:e==null?void 0:e.QuoteComments,context:{quoteData:a},children:t(J,{name:"quoteComments",placeholder:n.quoteCommentsPlaceholder,rows:3})}),[e==null?void 0:e.QuoteComments,n,a]),R=l(()=>t(u,{name:"Footer",slot:e==null?void 0:e.Footer,context:{quoteData:a},children:t(L,{variant:"primary",onClick:()=>c==null?void 0:c(a),"data-testid":"send-for-review-button",disabled:!(a!=null&&a.canSendForReview),children:n.sendForReview})}),[e==null?void 0:e.Footer,n,a,c]),j={...g,loading:N,quoteName:_,quoteStatus:v,banner:y||void 0,details:I,actionBar:w,quoteContent:P,shippingInformationTitle:W,shippingInformation:z,quoteCommentsTitle:E,quoteComments:F,footer:R};return t(C,{...j})};export{ue as ManageNegotiableQuote,ue as default};
//# sourceMappingURL=ManageNegotiableQuote.js.map
