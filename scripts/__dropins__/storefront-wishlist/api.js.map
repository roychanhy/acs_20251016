{"version":3,"file":"api.js","sources":["/@dropins/storefront-wishlist/src/api/getWishlistById/graphql/getWishlistById.graphql.ts","/@dropins/storefront-wishlist/src/api/getWishlistById/getWishlistById.ts","/@dropins/storefront-wishlist/src/api/updateProductsInWishlist/graphql/updateProductsInWishlistMutation.ts","/@dropins/storefront-wishlist/src/api/updateProductsInWishlist/updateProductsInWishlist.ts"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { WISHLIST_ITEM_FRAGMENT } from '@/wishlist/api/fragments';\n\nexport const GET_WISHLIST_BY_ID_QUERY = `\n  query GET_WISHLIST_BY_ID_QUERY(\n    $wishlistId: ID!,\n  ) {\n    customer {\n      wishlist_v2(id: $wishlistId) {\n        id\n        updated_at\n        sharing_code\n        items_count\n        items_v2 {\n          items {\n            ...WISHLIST_ITEM_FRAGMENT\n          }\n          page_info {\n            page_size\n            current_page\n            total_pages\n          }\n        }\n      }\n    }\n  }\n\n${WISHLIST_ITEM_FRAGMENT}\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { GET_WISHLIST_BY_ID_QUERY } from '@/wishlist/api/getWishlistById/graphql/getWishlistById.graphql';\nimport { Wishlist } from '@/wishlist/data/models';\nimport { transformWishlist } from '@/wishlist/data/transforms';\nimport { state } from '@/wishlist/lib/state';\nimport { fetchGraphQl, getPersistedWishlistData } from '@/wishlist/api';\nimport { handleFetchError } from '@/wishlist/lib/fetch-error';\nimport { events } from '@adobe-commerce/event-bus';\n\nexport const getWishlistById = async (\n  wishlistId: string,\n  currentPage: number,\n  pageSize: number\n): Promise<void | Wishlist | null> => {\n  // When the user is not authenticated, we just have a single wishlist\n  // There is no necessity to check any IDs\n  if (!state.authenticated) {\n    return getPersistedWishlistData();\n  }\n\n  if (!wishlistId) {\n    throw Error('Wishlist ID is not set');\n  }\n\n  // @ts-ignore\n  return fetchGraphQl(GET_WISHLIST_BY_ID_QUERY, {\n    variables: {\n      wishlistId,\n      currentPage,\n      pageSize,\n    },\n  }).then(({ errors, data }) => {\n    if (errors) return handleFetchError(errors);\n\n    if (!data?.customer?.wishlist_v2) {\n      return null;\n    }\n\n    const payload = transformWishlist(data.customer.wishlist_v2);\n    events.emit('wishlist/data', payload);\n    return payload;\n  });\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { WISHLIST_FRAGMENT } from '@/wishlist/api/graphql/WishlistFragment.graphql';\n\nexport const UPDATE_PRODUCTS_IN_WISHLIST_MUTATION = `\n  mutation UPDATE_PRODUCTS_IN_WISHLIST_MUTATION(\n      $wishlistId: ID!, \n      $wishlistItems: [WishlistItemUpdateInput!]!,\n    ) {\n    updateProductsInWishlist(\n      wishlistId: $wishlistId\n      wishlistItems: $wishlistItems\n    ) {\n      wishlist {\n        ...WISHLIST_FRAGMENT\n      }\n      user_errors {\n        code\n        message\n      }\n    }\n  }\n  \n   ${WISHLIST_FRAGMENT} \n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { fetchGraphQl } from '@/wishlist/api';\nimport { state } from '@/wishlist/lib/state';\nimport { handleFetchError } from '@/wishlist//lib/fetch-error';\n\nimport { UPDATE_PRODUCTS_IN_WISHLIST_MUTATION } from './graphql/updateProductsInWishlistMutation';\nimport { Wishlist } from '@/wishlist/data/models/wishlist';\nimport { transformWishlist } from '@/wishlist/data/transforms';\n\nexport const updateProductsInWishlist = async (\n  items: {\n    wishlistItemId: string;\n    quantity: number;\n    description: string;\n    selectedOptions?: string[];\n    enteredOptions?: { uid: string; value: string }[];\n  }[]\n): Promise<Wishlist | null> => {\n  const wishlistId = state.wishlistId;\n\n  if (!wishlistId) {\n    throw Error('Wishlist ID is not set');\n  }\n\n  return fetchGraphQl(UPDATE_PRODUCTS_IN_WISHLIST_MUTATION, {\n    variables: {\n      wishlistId,\n      wishlistItems: items.map(\n        ({\n          wishlistItemId,\n          quantity,\n          description,\n          selectedOptions: selected_options,\n          enteredOptions: entered_options,\n        }) => ({\n          wishlistItemId,\n          quantity,\n          description,\n          selected_options,\n          entered_options,\n        })\n      ),\n    },\n  }).then(({ errors, data }) => {\n    // handle errors\n    const _errors = [\n      ...(data?.updateProductsInWishlist?.user_errors ?? []),\n      ...(errors ?? []),\n    ];\n\n    if (_errors.length > 0) return handleFetchError(_errors);\n\n    return transformWishlist(data.updateProductsInWishlist.wishlist);\n  });\n};\n"],"names":["GET_WISHLIST_BY_ID_QUERY","WISHLIST_ITEM_FRAGMENT","getWishlistById","wishlistId","currentPage","pageSize","state","getPersistedWishlistData","fetchGraphQl","errors","data","handleFetchError","_a","payload","transformWishlist","events","UPDATE_PRODUCTS_IN_WISHLIST_MUTATION","WISHLIST_FRAGMENT","updateProductsInWishlist","items","wishlistItemId","quantity","description","selected_options","entered_options","_errors"],"mappings":"yeAmBO,MAAMA,EAA2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAwBtCC,CAAsB;AAAA,EClBXC,EAAkB,MAC7BC,EACAC,EACAC,IACoC,CAGhC,GAAA,CAACC,EAAM,cACT,OAAOC,EAAyB,EAGlC,GAAI,CAACJ,EACH,MAAM,MAAM,wBAAwB,EAItC,OAAOK,EAAaR,EAA0B,CAC5C,UAAW,CACT,WAAAG,EACA,YAAAC,EACA,SAAAC,CAAA,CAEH,CAAA,EAAE,KAAK,CAAC,CAAE,OAAAI,EAAQ,KAAAC,KAAW,OACxB,GAAAD,EAAe,OAAAE,EAAiBF,CAAM,EAEtC,GAAA,GAACG,EAAAF,GAAA,YAAAA,EAAM,WAAN,MAAAE,EAAgB,aACZ,OAAA,KAGT,MAAMC,EAAUC,EAAkBJ,EAAK,SAAS,WAAW,EACpD,OAAAK,EAAA,KAAK,gBAAiBF,CAAO,EAC7BA,CAAA,CACR,CACH,ECvCaG,EAAuC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAmB/CC,CAAiB;AAAA,ECbTC,EAA2B,MACtCC,GAO6B,CAC7B,MAAMhB,EAAaG,EAAM,WAEzB,GAAI,CAACH,EACH,MAAM,MAAM,wBAAwB,EAGtC,OAAOK,EAAaQ,EAAsC,CACxD,UAAW,CACT,WAAAb,EACA,cAAegB,EAAM,IACnB,CAAC,CACC,eAAAC,EACA,SAAAC,EACA,YAAAC,EACA,gBAAiBC,EACjB,eAAgBC,CAAA,KACX,CACL,eAAAJ,EACA,SAAAC,EACA,YAAAC,EACA,iBAAAC,EACA,gBAAAC,CACF,EAAA,CACF,CAEH,CAAA,EAAE,KAAK,CAAC,CAAE,OAAAf,EAAQ,KAAAC,KAAW,OAE5B,MAAMe,EAAU,CACd,KAAIb,EAAAF,GAAA,YAAAA,EAAM,2BAAN,YAAAE,EAAgC,cAAe,CAAC,EACpD,GAAIH,GAAU,CAAA,CAChB,EAEA,OAAIgB,EAAQ,OAAS,EAAUd,EAAiBc,CAAO,EAEhDX,EAAkBJ,EAAK,yBAAyB,QAAQ,CAAA,CAChE,CACH"}