{"version":3,"file":"WishlistItem.js","sources":["/@dropins/storefront-wishlist/src/components/ProductItem/ProductItem.tsx","/@dropins/storefront-wishlist/src/components/ImageCarousel/ImageCarousel.tsx","/@dropins/storefront-wishlist/src/containers/WishlistItem/WishlistItem.tsx"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { HTMLAttributes, useMemo } from 'preact/compat';\nimport { FunctionComponent, JSX } from 'preact';\nimport { classes } from '@adobe-commerce/elsie/lib';\nimport {\n  Button,\n  Icon,\n  ImageNodeRenderProps,\n  Price,\n} from '@adobe-commerce/elsie/components';\nimport { ImageCarousel } from '@/wishlist/components';\nimport { Item, Product } from '@/wishlist/data/models';\nimport { Cart, Trash } from '@adobe-commerce/elsie/icons';\nimport { useText } from '@adobe-commerce/elsie/i18n';\n\nimport '@/wishlist/components/ProductItem/ProductItem.css';\n\nexport interface ProductItemProps extends HTMLAttributes<HTMLDivElement> {\n  className?: string;\n  item?: Item;\n  onCartActionButtonClick?: () => boolean;\n  onTrashButtonClick?: () => boolean;\n  routeProdDetailPage: (product: Product) => string;\n  imageNode?: (props: {\n    defaultImageProps: ImageNodeRenderProps;\n  }) => JSX.Element;\n}\n\nexport const ProductItem: FunctionComponent<ProductItemProps> = ({\n  className,\n  item,\n  onCartActionButtonClick,\n  onTrashButtonClick,\n  routeProdDetailPage,\n  imageNode,\n  ...props\n}) => {\n  const labels = useText({\n    cartActionBtn: 'ProductItem.CartActionButton',\n    trashActionBtn: 'ProductItem.TrashActionButton',\n    customizeActionBtn: 'ProductItem.CustomizeActionButton',\n  });\n\n  const discounted =\n    item.product?.prices?.final?.amount < item.product?.prices?.regular?.amount;\n\n  const renderImage = () => {\n    return (\n      <a\n        className=\"wishlist-product-item-image\"\n        data-testid=\"wishlist-product-item-image\"\n        href={routeProdDetailPage(item.product)}\n      >\n        <ImageCarousel\n          images={item.product?.images ?? []}\n          imageNode={imageNode}\n        />\n      </a>\n    );\n  };\n\n  const renderPrices = () => {\n    if (\n      item.product?.prices?.final?.amount === undefined &&\n      item.product?.prices?.final?.maximumAmount !== undefined &&\n      item.product?.prices?.final?.maximumAmount > 0\n    ) {\n      return (\n        <>\n          <Price\n            className=\"wishlist-product-item-price\"\n            data-testid=\"wishlist-product-item-price\"\n            amount={item.product?.prices?.final?.minimumAmount}\n            currency={item.product?.prices?.final?.currency}\n          />\n          -\n          <Price\n            className=\"wishlist-product-item-price\"\n            data-testid=\"wishlist-product-item-price\"\n            amount={item.product?.prices?.final?.maximumAmount}\n            currency={item.product?.prices?.final?.currency}\n          />\n        </>\n      );\n    }\n    return (\n      <>\n        <Price\n          className={classes([\n            'wishlist-product-item-price',\n            discounted ? 'strikethrough' : '',\n          ])}\n          data-testid=\"wishlist-product-item-price\"\n          amount={item.product?.prices?.regular?.amount}\n          currency={item.product?.prices?.regular?.currency}\n        />\n\n        {discounted && (\n          <Price\n            className=\"wishlist-product-item-discounted-price\"\n            data-testid=\"wishlist-product-item-discounted-price\"\n            amount={item.product?.prices?.final?.amount}\n            currency={item.product?.prices?.final?.currency}\n          />\n        )}\n      </>\n    );\n  };\n\n  const renderTrashButton = () => {\n    return (\n      <Button\n        data-testid=\"wishlist-product-item-remove-button\"\n        className=\"wishlist-product-item-button__remove\"\n        variant=\"tertiary\"\n        onClick={() => onTrashButtonClick?.()}\n        icon={\n          <Icon\n            source={Trash}\n            size=\"24\"\n            stroke=\"2\"\n            viewBox=\"0 0 24 24\"\n            aria-label={labels.trashActionBtn}\n          />\n        }\n      />\n    );\n  };\n\n  const renderMainActionButton = () => {\n    return isProductReady()\n      ? renderMoveToCartButton()\n      : renderCustomizeButton();\n  };\n\n  const isProductReady = () => {\n    if (item.product?.productType === 'complex') {\n      return areAllRequiredOptionsIncluded();\n    }\n    return true;\n  };\n\n  const selectedOptions = useMemo(\n    () => item.selectedOptions?.map((opt: any) => opt.uid) || [],\n    [item.selectedOptions]\n  );\n\n  const requiredOptions = useMemo(() => {\n    const options = item.product.options || [];\n    const required = options.filter((option: any) => option.required);\n    return required.length === 0 ? options : required;\n  }, [item.product.options]);\n\n  const areAllRequiredOptionsIncluded = (): boolean => {\n    return requiredOptions.every((option: any) =>\n      option.items?.some((item: any) => selectedOptions.includes(item.id))\n    );\n  };\n\n  const renderOptions = () => {\n    if (selectedOptions.length === 0) return null;\n\n    return (\n      <div className=\"wishlist-product-item-options\">\n        {requiredOptions.map((option: any) => {\n          const selectedValue = option.items?.find((item: any) =>\n            selectedOptions.includes(item.id)\n          );\n          return selectedValue ? (\n            <div key={option.type} className=\"wishlist-product-item-option\">\n              <span className=\"wishlist-product-item-option__attribute\">\n                {option.id}:\n              </span>\n              &nbsp;\n              <span className=\"wishlist-product-item-option__label\">\n                {selectedValue.label}\n              </span>\n            </div>\n          ) : null;\n        })}\n      </div>\n    );\n  };\n\n  const renderMoveToCartButton = () => {\n    return (\n      <Button\n        data-testid=\"wishlist-product-item-move-to-cart-button\"\n        size=\"medium\"\n        type=\"submit\"\n        icon={<Icon source={Cart} />}\n        disabled={!item.product?.inStock}\n        aria-label={labels.cartActionBtn}\n        onClick={() => onCartActionButtonClick?.()}\n      >\n        {labels.cartActionBtn}\n      </Button>\n    );\n  };\n\n  const renderCustomizeButton = () => {\n    return (\n      <Button\n        data-testid=\"wishlist-product-item-customize-button\"\n        size=\"medium\"\n        type=\"submit\"\n        aria-label={labels.customizeActionBtn}\n        href={routeProdDetailPage(item.product)}\n      >\n        {labels.customizeActionBtn}\n      </Button>\n    );\n  };\n\n  return (\n    <div {...props} className={classes(['wishlist-product-item', className])}>\n      <div className=\"wishlist-product-item__content\">\n        {renderImage()}\n        <div\n          className=\"wishlist-product-item__title\"\n          data-testid=\"wishlist-product-item-header\"\n        >\n          <a\n            className=\"wishlist-product-item-name\"\n            data-testid=\"wishlist-product-item-name\"\n            href={routeProdDetailPage(item.product)}\n          >\n            {item.product?.name}\n          </a>\n\n          {renderTrashButton()}\n          {renderPrices()}\n        </div>\n        {renderOptions()}\n        {renderMainActionButton()}\n      </div>\n    </div>\n  );\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FunctionComponent, JSX } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe-commerce/elsie/lib';\nimport { Image, ImageNodeRenderProps } from '@adobe-commerce/elsie/components';\nimport { useState } from 'react';\n\nimport '@/wishlist/components/ImageCarousel/ImageCarousel.css';\n\nexport interface ImageCarouselProps extends HTMLAttributes<HTMLDivElement> {\n  className?: string;\n  children?: any;\n  images: Image[];\n  imageNode?: (props: {\n    defaultImageProps: ImageNodeRenderProps;\n  }) => JSX.Element;\n}\n\nexport const ImageCarousel: FunctionComponent<ImageCarouselProps> = ({\n  className,\n  children,\n  images,\n  imageNode,\n  ...props\n}) => {\n  const [carouselIndex, setCarouselIndex] = useState(0);\n\n  return (\n    <>\n      <div {...props} className={classes(['image-carousel', className])}>\n        <div\n          className={classes([\n            'overflow-hidden relative max-w-[200px]',\n            className,\n          ])}\n        >\n          {images?.map(\n            (image: ImageCarouselProps['images'][0], index: number) => {\n              const defaultProps = {\n                className: classes(['image-carousel-image', className]),\n                src: image.url,\n                alt: image.label,\n              } as const;\n\n              if (index !== carouselIndex) {\n                return null;\n              }\n\n              return typeof imageNode === 'function'\n                ? imageNode({\n                    defaultImageProps: defaultProps,\n                  })\n                : imageNode || <Image {...defaultProps} />;\n            }\n          )}\n        </div>\n      </div>\n      {images?.length > 1 && (\n        <div className={classes(['absolute', 'image-switcher-area'])}>\n          {images?.map(\n            (_image: ImageCarouselProps['images'][0], index: number) => {\n              return (\n                <span\n                  className={classes([\n                    'image-switcher',\n                    carouselIndex === index\n                      ? 'image-switcher-active'\n                      : 'image-switcher-inactive',\n                  ])}\n                  key={index}\n                  onClick={(event: MouseEvent | TouchEvent) => {\n                    setCarouselIndex(index);\n                    event.preventDefault(); // prevent navigate on click since ImageCarousel is wrapped in a link\n                    event.stopPropagation();\n                  }}\n                />\n              );\n            }\n          )}\n        </div>\n      )}\n    </>\n  );\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport {\n  HTMLAttributes,\n  useEffect,\n  useState,\n  useCallback,\n} from 'preact/compat';\nimport { Container } from '@adobe-commerce/elsie/lib';\nimport { ProductItem } from '@/wishlist/components';\nimport { Item, Product } from '@/wishlist/data/models';\nimport { removeProductsFromWishlist } from '@/wishlist/api';\nimport { events } from '@adobe-commerce/event-bus';\nimport { ImageNodeRenderProps } from '@adobe-commerce/elsie/components';\nimport { JSX } from 'preact';\n\nexport interface WishlistItemProps extends HTMLAttributes<HTMLDivElement> {\n  item: Item;\n  getProductData?: (sku: string) => Promise<Product | null>;\n  getRefinedProduct?: (\n    sku: string,\n    optionUIDs: string[],\n    anchorOptions?: string[],\n    raw?: boolean\n  ) => Promise<Product | null>;\n  moveProdToCart: (\n    products: {\n      sku: string;\n      quantity: number;\n      optionsUIDs?: [];\n      enteredOptions?: [];\n    }[]\n  ) => Promise<any>;\n  routeProdDetailPage: (product: Product) => string;\n  imageNode?: (props: {\n    defaultImageProps: ImageNodeRenderProps;\n  }) => JSX.Element;\n}\n\nexport const WishlistItem: Container<WishlistItemProps> = ({\n  item,\n  getProductData,\n  getRefinedProduct,\n  moveProdToCart,\n  routeProdDetailPage,\n  imageNode,\n}: WishlistItemProps) => {\n  const [productData, setProductData] = useState<Product | null>(null);\n\n  useEffect(() => {\n    let cancelled = false;\n\n    async function fetchProductData() {\n      try {\n        let data: Product | null;\n        if (getRefinedProduct && item?.selectedOptions?.length > 0) {\n          data = await getRefinedProduct(\n            item.product.sku,\n            item.selectedOptions.map((option: { uid: any }) => option.uid)\n          );\n        } else {\n          data = getProductData\n            ? await getProductData(item?.product.sku)\n            : item?.product;\n        }\n        if (!cancelled) setProductData(data);\n      } catch (err) {\n        if (!cancelled) {\n          console.error('Failed to fetch product data:', err);\n        }\n      }\n    }\n\n    fetchProductData();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [item, getProductData, getRefinedProduct]);\n\n  /**\n   * Removes product from wishlist\n   */\n  const removeProductFromWishlist = useCallback(\n    async (showAlert: boolean = true): Promise<boolean> => {\n      try {\n        await removeProductsFromWishlist([item]);\n        console.log(`Product ${productData?.sku} removed from wishlist!`);\n        if (showAlert) {\n          events.emit('wishlist/alert', {\n            action: 'remove',\n            item: { ...item, product: productData },\n          });\n        }\n        return true;\n      } catch (error) {\n        console.error(\n          `Product ${productData.sku} could not be removed from wishlist`,\n          error\n        );\n        return false;\n      }\n    },\n    [item, productData]\n  );\n\n  /**\n   * Moves product to cart\n   */\n  const moveProductToCart = useCallback(async (): Promise<boolean> => {\n    try {\n      await moveProdToCart([\n        {\n          sku: productData.sku,\n          quantity: 1,\n          optionsUIDs: item.selectedOptions?.map(\n            (option: { uid: any }) => option.uid\n          ),\n          enteredOptions: item.enteredOptions,\n        },\n      ]);\n      console.log(`Product ${productData.sku} successfully moved to cart 🛒`);\n      events.emit('wishlist/alert', {\n        action: 'move',\n        item: { ...item, product: productData },\n      });\n      return await removeProductFromWishlist(false);\n    } catch (error) {\n      console.error('Could not move product to cart: ', error);\n      if (\n        error.toString().includes('You need to choose options for your item.')\n      ) {\n        window.location.replace(routeProdDetailPage(productData));\n      }\n      return false;\n    }\n  }, [\n    productData,\n    item,\n    moveProdToCart,\n    routeProdDetailPage,\n    removeProductFromWishlist,\n  ]);\n\n  if (!productData || !item) return null;\n\n  return (\n    <ProductItem\n      item={{ ...item, product: productData }}\n      onCartActionButtonClick={moveProductToCart}\n      onTrashButtonClick={removeProductFromWishlist}\n      routeProdDetailPage={routeProdDetailPage}\n      imageNode={imageNode}\n    />\n  );\n};\n"],"names":["ProductItem","className","item","onCartActionButtonClick","onTrashButtonClick","routeProdDetailPage","imageNode","props","labels","useText","discounted","_c","_b","_a","_f","_e","_d","renderImage","jsx","ImageCarousel","renderPrices","_i","_h","_g","jsxs","Fragment","Price","_l","_k","_j","_o","_n","_m","_r","_q","_p","_u","_t","_s","classes","_x","_w","_v","_A","_z","_y","_D","_C","_B","_G","_F","_E","renderTrashButton","Button","Icon","Trash","renderMainActionButton","isProductReady","renderMoveToCartButton","renderCustomizeButton","areAllRequiredOptionsIncluded","selectedOptions","useMemo","opt","requiredOptions","options","required","option","renderOptions","selectedValue","Cart","children","images","carouselIndex","setCarouselIndex","useState","image","index","defaultProps","Image","_image","event","WishlistItem","getProductData","getRefinedProduct","moveProdToCart","productData","setProductData","useEffect","cancelled","fetchProductData","data","err","removeProductFromWishlist","useCallback","showAlert","removeProductsFromWishlist","events","error","moveProductToCart"],"mappings":"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"}