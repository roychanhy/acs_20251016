{"version":3,"file":"api.js","sources":["/@dropins/storefront-recommendations/src/api/publishRecsItemAddToCartClick/publishRecsItemAddToCartClick.ts"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { transformRecommendationUnit } from '@/recommendations/data/transforms/acdl-context';\nimport { pushEvent, setContext } from '@/recommendations/lib/acdl/utils';\nimport { RECOMMENDATIONS_CONTEXT } from '@/recommendations/lib/acdl/contexts';\nimport { RECS_ITEM_ADD_TO_CART_CLICK } from '@/recommendations/lib/acdl/events';\nimport { Recommendations } from '@/recommendations/data/models/acdl-models';\n\n/**\n * Parameters for the publish events\n *\n * item: The item that was added to the cart\n * pagePlacement: The placement of the item on the page\n * yOffsetTop: The y offset of the item from the top of the page\n * yOffsetBottom: The y offset of the item from the bottom of the page\n */\nexport interface PublishParams {\n  recommendationUnit: any; // TODO: Replace this with the actual RecommendationMdoel type when PR #7 is merged\n  pagePlacement: string;\n  yOffsetTop: number;\n  yOffsetBottom: number;\n  backupProducts?: number;\n  searchTime?: number;\n  productId?: number; // The index of the clicked product\n}\n\n/**\n * Publish a recs-item-add-to-cart-click event to the Adobe Client Data Layer (ACDL)\n *\n * See: https://experienceleague.adobe.com/en/docs/commerce/product-recommendations/developer/events#events\n * @param params - The parameters for the event\n */\nexport const publishRecsItemAddToCartClick = (params: PublishParams) => {\n  const { productId, recommendationUnit, ...additionalData } = params;\n\n  const recommendationUnitContext = transformRecommendationUnit(\n    recommendationUnit,\n    additionalData\n  );\n\n  setContext<Recommendations>(RECOMMENDATIONS_CONTEXT, {\n    units: [recommendationUnitContext],\n  });\n\n  pushEvent(RECS_ITEM_ADD_TO_CART_CLICK, undefined, {\n    unitId: recommendationUnitContext.unitId,\n    productId,\n  });\n};\n"],"names":["publishRecsItemAddToCartClick","params","productId","recommendationUnit","additionalData","recommendationUnitContext","transformRecommendationUnit","setContext","RECOMMENDATIONS_CONTEXT","pushEvent","RECS_ITEM_ADD_TO_CART_CLICK"],"mappings":"0VA+Ca,MAAAA,EAAiCC,GAA0B,CACtE,KAAM,CAAE,UAAAC,EAAW,mBAAAC,EAAoB,GAAGC,CAAmB,EAAAH,EAEvDI,EAA4BC,EAChCH,EACAC,CACF,EAEAG,EAA4BC,EAAyB,CACnD,MAAO,CAACH,CAAyB,CAAA,CAClC,EAEDI,EAAUC,EAA6B,OAAW,CAChD,OAAQL,EAA0B,OAClC,UAAAH,CAAA,CACD,CACH"}