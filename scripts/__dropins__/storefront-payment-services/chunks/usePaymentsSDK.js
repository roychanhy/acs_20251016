/*! Copyright 2025 Adobe
All Rights Reserved. */
import{useState as m,useEffect as p}from"@dropins/tools/preact-hooks.js";function S(e,i,t,n){function c(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(s){try{d(n.next(s))}catch(f){o(f)}}function u(s){try{d(n.throw(s))}catch(f){o(f)}}function d(s){s.done?r(s.value):c(s.value).then(a,u)}d((n=n.apply(e,i||[])).next())})}function y(){return S(this,arguments,void 0,function*(e={}){if("PaymentServicesSDK"in window)return window.PaymentServicesSDK;if(yield l(e.customUrl||"https://payments-sdk.int.magento-payments.com/v0/3/PaymentSDK.js?v=0.3.5-alpha.6",e.scriptAttributes||{}),!("PaymentServicesSDK"in window))throw new Error("Script loaded, but Payment Services SDK not found.");return window.PaymentServicesSDK})}function l(e,{crossOrigin:i,integrity:t}){const n=document.createElement("script");return i!=null&&(n.crossOrigin=i),t!=null&&(n.integrity=t),new Promise((c,r)=>{n.src=e,n.async=!0,n.onload=()=>c(),n.onerror=o=>r(o),document.head.appendChild(n)})}var w=y,h=(e=>(e.loading="loading",e.ready="ready",e.error="error",e))(h||{});function D({apiUrl:e,getCustomerToken:i},t){const[n,c]=m(null),[r,o]=m("loading");return p(()=>{w().then(async a=>{const u=new a({apiUrl:e,getCustomerToken:i});await u.Payment.init({location:t}),c(u)}).then(()=>o("ready")).catch(a=>{console.log(a),o("error")})},[e,t,i]),{paymentsSDK:n,sdkStatus:r}}export{h as S,D as u};
