{"version":3,"file":"setShippingMethods.js","sources":["/@dropins/storefront-checkout/src/data/transforms/transform-shipping-estimate.ts","/@dropins/storefront-checkout/src/api/setShippingMethods/graphql/setShippingMethodsOnCart.graphql.ts","/@dropins/storefront-checkout/src/api/setShippingMethods/setShippingMethods.ts"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport {\n  PartialShippingAddress,\n  ShippingEstimateShippingMethod,\n  ShippingMethod,\n} from '@/checkout/data/models';\n\ntype TransformShippingEstimatePartialAddressInput = {\n  country_id: string;\n  postcode?: string;\n  region_id?: number;\n  region?: string;\n};\n\nexport const transformShippingEstimatePartialAddress = (\n  data: TransformShippingEstimatePartialAddressInput\n): PartialShippingAddress => {\n  return {\n    countryCode: data.country_id,\n    postCode: data.postcode || '',\n    ...(data.region_id\n      ? { regionId: Number(data.region_id) }\n      : { ...(data.region ? { region: data.region } : {}) }),\n  };\n};\n\nexport const transformShippingEstimateShippingMethod = (\n  data: ShippingMethod\n): ShippingEstimateShippingMethod => {\n  return {\n    carrierCode: data.carrier.code || '',\n    methodCode: data.code || '',\n    amount: data.amount,\n    amountExclTax: data.amountExclTax,\n    amountInclTax: data.amountInclTax,\n  };\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { CHECKOUT_DATA_FRAGMENT } from '@/checkout/api/graphql/CheckoutDataFragment.graphql';\n\nexport const setShippingMethodsMutation = /* GraphQL */ `\n  mutation setShippingMethods(\n    $cartId: String!\n    $shippingMethods: [ShippingMethodInput]!\n  ) {\n    setShippingMethodsOnCart(\n      input: { cart_id: $cartId, shipping_methods: $shippingMethods }\n    ) {\n      cart {\n        ...CHECKOUT_DATA_FRAGMENT\n      }\n    }\n  }\n\n  ${CHECKOUT_DATA_FRAGMENT}\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { MissingCart } from '@/checkout/api';\nimport { setShippingMethodsMutation } from '@/checkout/api/setShippingMethods/graphql/setShippingMethodsOnCart.graphql';\nimport { transformCart } from '@/checkout/data/transforms';\nimport { dispatchApiCall } from '@/checkout/lib/dispatchApiCall';\nimport { QueueName } from '@/checkout/lib/enqueueRequest';\nimport { state } from '@/checkout/lib/state';\nimport { SetShippingMethodsOnCartInput } from '@/checkout/__generated__/types';\n\ntype ShippingMethodsOnCart = SetShippingMethodsOnCartInput['shipping_methods'];\n\nexport const setShippingMethodsOnCart = async (\n  shippingMethods: ShippingMethodsOnCart\n) => {\n  const cartId = state.cartId;\n\n  if (!cartId) throw new MissingCart();\n\n  return await dispatchApiCall({\n    type: 'mutation',\n    query: setShippingMethodsMutation,\n    queueName: QueueName.CartUpdate,\n    options: { variables: { cartId, shippingMethods } },\n    path: 'setShippingMethodsOnCart.cart',\n    transformer: transformCart,\n  });\n};\n"],"names":["transformShippingEstimatePartialAddress","data","transformShippingEstimateShippingMethod","setShippingMethodsMutation","CHECKOUT_DATA_FRAGMENT","setShippingMethodsOnCart","shippingMethods","cartId","state","MissingCart","dispatchApiCall","QueueName","transformCart"],"mappings":"6NA8Ba,MAAAA,EACXC,IAEO,CACL,YAAaA,EAAK,WAClB,SAAUA,EAAK,UAAY,GAC3B,GAAIA,EAAK,UACL,CAAE,SAAU,OAAOA,EAAK,SAAS,CAAE,EACnC,CAAE,GAAIA,EAAK,OAAS,CAAE,OAAQA,EAAK,MAAO,EAAI,CAAI,CAAA,CACxD,GAGWC,EACXD,IAEO,CACL,YAAaA,EAAK,QAAQ,MAAQ,GAClC,WAAYA,EAAK,MAAQ,GACzB,OAAQA,EAAK,OACb,cAAeA,EAAK,cACpB,cAAeA,EAAK,aACtB,GChCWE,EAA2C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAcpDC,CAAsB;AAAA,ECNbC,EAA2B,MACtCC,GACG,CACH,MAAMC,EAASC,EAAM,OAErB,GAAI,CAACD,EAAc,MAAA,IAAIE,EAEvB,OAAO,MAAMC,EAAgB,CAC3B,KAAM,WACN,MAAOP,EACP,UAAWQ,EAAU,WACrB,QAAS,CAAE,UAAW,CAAE,OAAAJ,EAAQ,gBAAAD,EAAkB,EAClD,KAAM,gCACN,YAAaM,CAAA,CACd,CACH"}