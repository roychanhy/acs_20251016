{"version":3,"file":"setBillingAddress.js","sources":["/@dropins/storefront-checkout/src/api/setBillingAddress/graphql/setBillingAddress.graphql.ts","/@dropins/storefront-checkout/src/api/setBillingAddress/setBillingAddress.ts"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { CHECKOUT_DATA_FRAGMENT } from '@/checkout/api/graphql/CheckoutDataFragment.graphql';\n\nexport const setBillingAddressMutation = /* GraphQL */ `\n  mutation setBillingAddress($input: SetBillingAddressOnCartInput!) {\n    setBillingAddressOnCart(input: $input) {\n      cart {\n        ...CHECKOUT_DATA_FRAGMENT\n      }\n    }\n  }\n\n  ${CHECKOUT_DATA_FRAGMENT}\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { setBillingAddressMutation } from '@/checkout/api/setBillingAddress/graphql/setBillingAddress.graphql';\nimport { BillingAddressInput } from '@/checkout/data/models';\nimport {\n  transformCart,\n  transformCartAddressModelToInput,\n} from '@/checkout/data/transforms';\nimport { MissingBillingAddress, MissingCart } from '@/checkout/errors';\nimport { dispatchApiCall } from '@/checkout/lib/dispatchApiCall';\nimport { QueueName } from '@/checkout/lib/enqueueRequest';\nimport { state } from '@/checkout/lib/state';\nimport { SetBillingAddressOnCartInput } from '@/checkout/__generated__/types';\n\nexport const setBillingAddress = async ({\n  address,\n  customerAddressId,\n  sameAsShipping = false,\n  useForShipping = false,\n}: BillingAddressInput) => {\n  const cartId = state.cartId;\n\n  if (!cartId) throw new MissingCart();\n\n  const input: SetBillingAddressOnCartInput = {\n    cart_id: cartId,\n    billing_address: {\n      same_as_shipping: sameAsShipping,\n      use_for_shipping: useForShipping,\n    },\n  };\n\n  if (!sameAsShipping && customerAddressId) {\n    input.billing_address.customer_address_id = customerAddressId;\n  }\n\n  if (!sameAsShipping && !customerAddressId) {\n    if (!address) throw new MissingBillingAddress();\n    input.billing_address.address = transformCartAddressModelToInput(address);\n  }\n\n  return await dispatchApiCall({\n    options: { variables: { input } },\n    path: 'setBillingAddressOnCart.cart',\n    query: setBillingAddressMutation,\n    queueName: QueueName.CartUpdate,\n    transformer: transformCart,\n    type: 'mutation',\n  });\n};\n"],"names":["setBillingAddressMutation","CHECKOUT_DATA_FRAGMENT","setBillingAddress","address","customerAddressId","sameAsShipping","useForShipping","cartId","state","MissingCart","input","MissingBillingAddress","transformCartAddressModelToInput","dispatchApiCall","QueueName","transformCart"],"mappings":"2OAmBa,MAAAA,EAA0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IASnDC,CAAsB;AAAA,ECCbC,EAAoB,MAAO,CACtC,QAAAC,EACA,kBAAAC,EACA,eAAAC,EAAiB,GACjB,eAAAC,EAAiB,EACnB,IAA2B,CACzB,MAAMC,EAASC,EAAM,OAErB,GAAI,CAACD,EAAc,MAAA,IAAIE,EAEvB,MAAMC,EAAsC,CAC1C,QAASH,EACT,gBAAiB,CACf,iBAAkBF,EAClB,iBAAkBC,CAAA,CAEtB,EAMI,GAJA,CAACD,GAAkBD,IACrBM,EAAM,gBAAgB,oBAAsBN,GAG1C,CAACC,GAAkB,CAACD,EAAmB,CACzC,GAAI,CAACD,EAAe,MAAA,IAAIQ,EAClBD,EAAA,gBAAgB,QAAUE,EAAiCT,CAAO,CAAA,CAG1E,OAAO,MAAMU,EAAgB,CAC3B,QAAS,CAAE,UAAW,CAAE,MAAAH,EAAQ,EAChC,KAAM,+BACN,MAAOV,EACP,UAAWc,EAAU,WACrB,YAAaC,EACb,KAAM,UAAA,CACP,CACH"}