{"version":3,"file":"errors.js","sources":["/@dropins/storefront-checkout/src/lib/state.ts","/@dropins/storefront-checkout/src/data/models/store-config.ts","/@dropins/storefront-checkout/src/lib/enqueueRequest.ts","/@dropins/storefront-checkout/src/lib/filterControlledErrors.ts","/@dropins/storefront-checkout/src/lib/network-error.ts","/@dropins/storefront-checkout/src/lib/dispatchApiCall.ts","/@dropins/storefront-checkout/src/api/getStoreConfig/graphql/getStoreConfig.graphql.ts","/@dropins/storefront-checkout/src/api/getStoreConfig/getStoreConfig.ts","/@dropins/storefront-checkout/src/data/transforms/transform-store-config.ts","/@dropins/storefront-checkout/src/api/fetch-graphql/fetch-graphql.ts","/@dropins/storefront-checkout/src/errors/errors.ts"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { StoreConfig } from '@/checkout/data/models';\n\ntype State = {\n  authenticated: boolean;\n  cartId: string | null;\n  initialized: boolean;\n  config: StoreConfig | null;\n};\n\nconst _state: State = (() => ({\n  authenticated: false,\n  cartId: null,\n  initialized: false,\n  config: null,\n}))();\n\n// Proxy state to allow reactivity\nexport const state = new Proxy(_state, {\n  set(target, key, value) {\n    // @ts-ignore\n    target[key] = value;\n    return true;\n  },\n  get(target, key) {\n    return target[key as keyof State];\n  },\n});\n\nexport const getStoreConfigCache = () => state.config;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nexport enum TaxDisplay {\n  EXCLUDING_TAX = 'EXCLUDING_TAX',\n  INCLUDING_EXCLUDING_TAX = 'INCLUDING_AND_EXCLUDING_TAX',\n  INCLUDING_TAX = 'INCLUDING_TAX',\n}\n\nexport interface StoreConfig {\n  defaultCountry: string;\n  agreementsEnabled: boolean;\n  shoppingCartDisplaySetting: {\n    shipping: TaxDisplay;\n  };\n}\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { Cart } from '@/checkout/data/models';\nimport {\n  computed,\n  ReadonlySignal,\n  signal,\n} from '@adobe-commerce/elsie/lib/signals';\nimport { events } from '@adobe-commerce/event-bus';\n\nexport enum QueueName {\n  CartUpdate = 'cartUpdate',\n  Default = 'default',\n  ShippingEstimate = 'shippingEstimate',\n}\n\ntype Request<T> = () => Promise<T>;\ntype QueueCompletedHandler<T> = (result: T) => void;\n\ninterface QueuedRequest<T> {\n  requestFn: Request<T>;\n  resolve: (value: T) => void;\n  reject: (error: any) => void;\n}\n\nconst queues = new Map<QueueName, QueuedRequest<any>[]>();\nconst processing = new Map<QueueName, boolean>();\nconst pendingRequests = signal<Set<QueueName>>(new Set());\nconst onQueueCompleted = new Map<QueueName, QueueCompletedHandler<any>>();\n\nonQueueCompleted.set(QueueName.CartUpdate, (latestResult: Cart) => {\n  events.emit('checkout/updated', latestResult);\n});\n\nasync function processQueue(type: QueueName): Promise<void> {\n  processing.set(type, true);\n\n  const queue = queues.get(type)!;\n  let latestSuccessResult: any;\n\n  while (queue.length > 0) {\n    const request = queue.shift()!;\n\n    try {\n      const result = await request.requestFn();\n      request.resolve(result);\n      latestSuccessResult = result;\n    } catch (error) {\n      request.reject(error);\n    }\n  }\n\n  processing.set(type, false);\n\n  const pendingSet = new Set(pendingRequests.value);\n  pendingSet.delete(type);\n  pendingRequests.value = pendingSet;\n\n  const handler = onQueueCompleted.get(type);\n\n  if (handler && latestSuccessResult) {\n    handler(latestSuccessResult);\n  }\n}\n\nexport function enqueueRequest<T>(\n  requestFn: Request<T>,\n  name: QueueName = QueueName.Default\n): Promise<T> {\n  if (!queues.has(name)) {\n    queues.set(name, []);\n  }\n\n  const queue = queues.get(name)!;\n\n  const promise = new Promise<T>((resolve, reject) => {\n    queue.push({ requestFn, resolve, reject });\n  });\n\n  const pendingSet = new Set(pendingRequests.value);\n  pendingSet.add(name);\n  pendingRequests.value = pendingSet;\n\n  if (!processing.get(name)) {\n    processQueue(name);\n  }\n\n  return promise;\n}\n\nexport const hasPendingCartUpdates: ReadonlySignal<boolean> = computed(() => {\n  return pendingRequests.value.has(QueueName.CartUpdate);\n});\n\nexport const hasPendingShippingEstimate: ReadonlySignal<boolean> = computed(\n  () => {\n    return pendingRequests.value.has(QueueName.ShippingEstimate);\n  }\n);\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FetchQueryError } from '@/checkout/api/fetch-graphql';\n\ntype ErrorPath = (string | number)[];\n\nexport type ErrorWithPath = FetchQueryError[number] & {\n  path?: ErrorPath;\n};\n\nconst controlledErrorProps: string[] = ['sender_email', 'recipient_email'];\n\n/**\n * Filters out errors with known paths from a list of errors generated by a GraphQL query.\n *\n * Known issue: The query does not differentiate between physical and virtual gift cards, leading\n * to errors for physical ones as they don't have 'sender_email' and 'recipient_email' properties.\n *\n * @param {ErrorWithPath[]} errors - Array of errors to be filtered.\n * @return {ErrorWithPath[]} Uncontrolled (unexpected) errors not matching predefined paths.\n */\n\nexport function filterControlledErrors(errors: ErrorWithPath[]) {\n  return errors.filter(\n    (error) =>\n      !error.path ||\n      !controlledErrorProps.some((controlledErrorProp) => {\n        return error.path?.at(-1) === controlledErrorProp;\n      })\n  );\n}\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { events } from '@adobe-commerce/event-bus';\n\n/**\n * A function which can be attached to fetchGraphQL to handle thrown errors in\n * a generic way.\n */\nexport const handleNetworkError = (error: Error) => {\n  const isAbortError =\n    error instanceof DOMException && error.name === 'AbortError';\n\n  if (!isAbortError) {\n    events.emit('error', {\n      source: 'checkout',\n      type: 'network',\n      error,\n    });\n  }\n\n  throw error;\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport {\n  FetchError,\n  fetchGraphQl,\n  FetchOptions,\n  FetchQueryError,\n} from '@/checkout/api';\nimport { enqueueRequest, QueueName } from '@/checkout/lib/enqueueRequest';\nimport { filterControlledErrors } from '@/checkout/lib/filterControlledErrors';\nimport { handleNetworkError } from '@/checkout/lib/network-error';\n\ntype DispatchApiCallParams<T> = {\n  defaultValueOnFail?: T;\n  options?: FetchOptions;\n  path: string;\n  query: string;\n  queueName?: QueueName;\n  transformer?: (data: any) => T;\n  type: 'query' | 'mutation';\n};\n\nexport function getValueAtPath(obj: any, path: string) {\n  return path\n    .split('.')\n    .reduce(\n      (acc, part) => (acc && acc[part] !== undefined ? acc[part] : undefined),\n      obj\n    );\n}\n\nasync function dispatchApiCall<T>(\n  params: DispatchApiCallParams<T>\n): Promise<T> {\n  const {\n    defaultValueOnFail,\n    options,\n    path,\n    query,\n    queueName,\n    transformer,\n    type,\n  } = params;\n\n  try {\n    const processApiCall = async () => {\n      const { data, errors } = await fetchGraphQl<T>(query, {\n        method: type === 'query' ? 'GET' : 'POST',\n        cache: type === 'query' ? 'no-cache' : undefined,\n        ...options,\n      }).catch(handleNetworkError);\n\n      if (errors) {\n        const uncontrolledErrors = filterControlledErrors(errors);\n\n        if (uncontrolledErrors.length > 0) {\n          throw new FetchError(uncontrolledErrors as FetchQueryError);\n        }\n      }\n\n      let result = getValueAtPath(data, path);\n\n      if (result === undefined) {\n        throw new Error(`No data found at path: ${path}`);\n      }\n\n      return transformer ? transformer(result) : result;\n    };\n\n    // Execute the API call, either directly or through the queue\n    const result =\n      type === 'mutation'\n        ? await enqueueRequest<T>(processApiCall, queueName)\n        : await processApiCall();\n\n    return result;\n  } catch (error: any) {\n    if (defaultValueOnFail !== undefined) return defaultValueOnFail;\n    throw error;\n  }\n}\n\nexport { dispatchApiCall };\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nexport const getStoreConfigQuery = /* GraphQL */ `\n  query getStoreConfig {\n    storeConfig {\n      default_country\n      is_checkout_agreements_enabled\n      is_guest_checkout_enabled\n      is_one_page_checkout_enabled\n      shopping_cart_display_shipping\n    }\n  }\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { StoreConfig, TaxDisplay } from '@/checkout/data/models';\nimport { transformStoreConfig } from '@/checkout/data/transforms';\nimport { dispatchApiCall } from '@/checkout/lib';\nimport { getStoreConfigQuery } from './graphql/getStoreConfig.graphql';\n\nexport const DEFAULT_COUNTRY = 'US';\n\nexport const STORE_CONFIG_DEFAULTS: StoreConfig = {\n  defaultCountry: DEFAULT_COUNTRY,\n  agreementsEnabled: true,\n  shoppingCartDisplaySetting: {\n    shipping: TaxDisplay.EXCLUDING_TAX,\n  },\n};\n\nexport const getStoreConfig = async () => {\n  return await dispatchApiCall({\n    defaultValueOnFail: STORE_CONFIG_DEFAULTS,\n    options: { method: 'GET', cache: 'no-cache' },\n    path: 'storeConfig',\n    query: getStoreConfigQuery,\n    transformer: transformStoreConfig,\n    type: 'query',\n  });\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { GetStoreConfigQuery } from '@/checkout/__generated__/types';\nimport { STORE_CONFIG_DEFAULTS } from '@/checkout/api/getStoreConfig';\nimport { StoreConfig, TaxDisplay } from '@/checkout/data/models';\n\nexport function transformTaxDisplay(data: number | null | undefined) {\n  switch (data) {\n    case 1:\n      return TaxDisplay.EXCLUDING_TAX;\n    case 2:\n      return TaxDisplay.INCLUDING_TAX;\n    case 3:\n      return TaxDisplay.INCLUDING_EXCLUDING_TAX;\n    default:\n      return TaxDisplay.EXCLUDING_TAX;\n  }\n}\n\nexport function transformStoreConfig(\n  data: GetStoreConfigQuery['storeConfig']\n): StoreConfig {\n  if (!data) return STORE_CONFIG_DEFAULTS;\n\n  const {\n    default_country,\n    is_checkout_agreements_enabled,\n    shopping_cart_display_shipping,\n  } = data;\n\n  return {\n    defaultCountry: default_country || STORE_CONFIG_DEFAULTS.defaultCountry,\n    agreementsEnabled: is_checkout_agreements_enabled,\n    shoppingCartDisplaySetting: {\n      shipping: transformTaxDisplay(shopping_cart_display_shipping),\n    },\n  };\n}\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FetchGraphQL } from '@adobe-commerce/fetch-graphql';\n\nexport const {\n  setEndpoint,\n  setFetchGraphQlHeader,\n  removeFetchGraphQlHeader,\n  setFetchGraphQlHeaders,\n  fetchGraphQl,\n  getConfig,\n} = new FetchGraphQL().getMethods();\n\nexport type {\n  FetchOptions,\n  FetchQueryError,\n} from '@adobe-commerce/fetch-graphql';\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FetchQueryError } from '@/checkout/api/fetch-graphql';\n\nexport class FetchError extends Error {\n  constructor(reasons: FetchQueryError) {\n    super(reasons.map((e: any) => e.message).join(' '));\n    this.name = 'FetchError';\n  }\n}\n\nexport class InvalidArgument extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'InvalidArgument';\n  }\n}\n\nexport class UnexpectedError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'UnexpectedError';\n  }\n}\n\nexport class MissingCart extends InvalidArgument {\n  constructor() {\n    super('Cart ID is required');\n  }\n}\nexport class MissingEmail extends InvalidArgument {\n  constructor() {\n    super('Email is required');\n  }\n}\n\nexport class MissingPaymentMethod extends InvalidArgument {\n  constructor() {\n    super('Payment method code is required');\n  }\n}\n\nexport class MissingShippinghAddress extends InvalidArgument {\n  constructor() {\n    super('Shipping address is required');\n  }\n}\n\nexport class MissingBillingAddress extends InvalidArgument {\n  constructor() {\n    super('Billing address is required');\n  }\n}\n\nexport class MissingCountry extends InvalidArgument {\n  constructor() {\n    super('Country Code is required');\n  }\n}\n"],"names":["_state","state","target","key","value","getStoreConfigCache","TaxDisplay","QueueName","queues","processing","pendingRequests","signal","onQueueCompleted","latestResult","events","processQueue","type","queue","latestSuccessResult","request","result","error","pendingSet","handler","enqueueRequest","requestFn","name","promise","resolve","reject","hasPendingCartUpdates","computed","hasPendingShippingEstimate","controlledErrorProps","filterControlledErrors","errors","controlledErrorProp","_a","handleNetworkError","getValueAtPath","obj","path","acc","part","dispatchApiCall","params","defaultValueOnFail","options","query","queueName","transformer","processApiCall","data","fetchGraphQl","uncontrolledErrors","FetchError","getStoreConfigQuery","DEFAULT_COUNTRY","STORE_CONFIG_DEFAULTS","getStoreConfig","transformStoreConfig","transformTaxDisplay","default_country","is_checkout_agreements_enabled","shopping_cart_display_shipping","setEndpoint","setFetchGraphQlHeader","removeFetchGraphQlHeader","setFetchGraphQlHeaders","getConfig","FetchGraphQL","reasons","e","InvalidArgument","message","UnexpectedError","MissingCart","MissingEmail","MissingPaymentMethod","MissingShippinghAddress","MissingBillingAddress","MissingCountry"],"mappings":"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"}