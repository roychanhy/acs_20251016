{"version":3,"file":"Pagination.js","sources":["/@dropins/storefront-product-discovery/src/containers/Pagination/Pagination.tsx"],"sourcesContent":["/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this \n * file in accordance with the terms of the Adobe license agreement \n * accompanying it. \n *******************************************************************/\n  \nimport { HTMLAttributes, useState, useEffect } from 'preact/compat';\nimport { Container } from '@adobe-commerce/elsie/lib';\nimport { Pagination as PaginationComponent } from '@adobe-commerce/elsie/components';\nimport { events } from '@adobe-commerce/event-bus';\nimport { Scope, SearchVariables } from '@/plp/data/models';\nimport { search } from '@/plp/api';\n\nexport interface PaginationProps extends HTMLAttributes<HTMLDivElement> {\n  scope?: Scope;\n  onPageChange?: (page: number) => void;\n }\n    \nexport const Pagination: Container<PaginationProps> = ({ scope, onPageChange }) => {\n  const [currentPage, setCurrentPage] = useState<number>();\n  const [totalPages, setTotalPages] = useState<number>();\n  const [currentSearchVariables, setCurrentSearchVariables] = useState<SearchVariables>({});\n\n  useEffect(() => {\n    const searchEvent = events.on('search/result', (payload) => {\n      setCurrentSearchVariables(payload.request);\n      setCurrentPage(payload.result?.pageInfo?.currentPage);\n      setTotalPages(payload.result?.pageInfo?.totalPages);\n    }, { eager: true, scope });\n\n    return () => {\n      searchEvent?.off();\n    };\n  }, []);\n\n  const handlePageChange = async (page: number): Promise<void> => {\n    onPageChange?.(page);\n\n    search({ ...currentSearchVariables, currentPage: page }, { scope });\n  };\n\n  // Don't render if we don't have the variables\n  if (!currentPage || !totalPages) {\n    return null;\n  }\n\n  return (\n    <PaginationComponent \n      currentPage={currentPage}\n      totalPages={totalPages}\n      onChange={handlePageChange}\n    />\n  );\n};"],"names":["Pagination","scope","onPageChange","currentPage","setCurrentPage","useState","totalPages","setTotalPages","currentSearchVariables","setCurrentSearchVariables","useEffect","searchEvent","events","payload","_b","_a","_d","_c","handlePageChange","page","search","jsx","PaginationComponent"],"mappings":"0bAqBO,MAAMA,EAAyC,CAAC,CAAE,MAAAC,EAAO,aAAAC,KAAmB,CACjF,KAAM,CAACC,EAAaC,CAAc,EAAIC,EAAA,EAChC,CAACC,EAAYC,CAAa,EAAIF,EAAA,EAC9B,CAACG,EAAwBC,CAAyB,EAAIJ,EAA0B,CAAA,CAAE,EAExFK,EAAU,IAAM,CACd,MAAMC,EAAcC,EAAO,GAAG,gBAAkBC,GAAY,aAC1DJ,EAA0BI,EAAQ,OAAO,EACzCT,GAAeU,GAAAC,EAAAF,EAAQ,SAAR,YAAAE,EAAgB,WAAhB,YAAAD,EAA0B,WAAW,EACpDP,GAAcS,GAAAC,EAAAJ,EAAQ,SAAR,YAAAI,EAAgB,WAAhB,YAAAD,EAA0B,UAAU,CACpD,EAAG,CAAE,MAAO,GAAM,MAAAf,EAAO,EAEzB,MAAO,IAAM,CACXU,GAAA,MAAAA,EAAa,KACf,CACF,EAAG,CAAA,CAAE,EAEL,MAAMO,EAAmB,MAAOC,GAAgC,CAC9DjB,GAAA,MAAAA,EAAeiB,GAEfC,EAAO,CAAE,GAAGZ,EAAwB,YAAaW,GAAQ,CAAE,MAAAlB,EAAO,CACpE,EAGA,MAAI,CAACE,GAAe,CAACG,EACZ,KAIPe,EAACC,EAAA,CACC,YAAAnB,EACA,WAAAG,EACA,SAAUY,CAAA,CAAA,CAGhB"}