{"version":3,"file":"Facets.js","sources":["../../node_modules/@adobe-commerce/elsie/src/icons/Add.svg","../../node_modules/@adobe-commerce/elsie/src/icons/Close.svg","../../node_modules/@adobe-commerce/elsie/src/icons/Minus.svg","/@dropins/storefront-product-discovery/src/components/Facet/Facet.tsx","/@dropins/storefront-product-discovery/src/components/FacetList/FacetList.tsx","/@dropins/storefront-product-discovery/src/containers/Facets/utils/facetUtils.tsx","/@dropins/storefront-product-discovery/src/containers/Facets/Facets.tsx"],"sourcesContent":["import * as React from \"react\";\nconst SvgAdd = (props) => /* @__PURE__ */ React.createElement(\"svg\", { id: \"Icon_Add_Base\", \"data-name\": \"Icon \\\\u2013 Add \\\\u2013 Base\", xmlns: \"http://www.w3.org/2000/svg\", width: 24, height: 24, viewBox: \"0 0 24 24\", ...props }, /* @__PURE__ */ React.createElement(\"g\", { id: \"Large\" }, /* @__PURE__ */ React.createElement(\"rect\", { id: \"Placement_area\", \"data-name\": \"Placement area\", width: 24, height: 24, fill: \"#fff\", opacity: 0 }), /* @__PURE__ */ React.createElement(\"g\", { id: \"Add_icon\", \"data-name\": \"Add icon\", transform: \"translate(9.734 9.737)\" }, /* @__PURE__ */ React.createElement(\"line\", { vectorEffect: \"non-scaling-stroke\", id: \"Line_579\", \"data-name\": \"Line 579\", y2: 12.7, transform: \"translate(2.216 -4.087)\", fill: \"none\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"line\", { vectorEffect: \"non-scaling-stroke\", id: \"Line_580\", \"data-name\": \"Line 580\", x2: 12.7, transform: \"translate(-4.079 2.263)\", fill: \"none\", stroke: \"currentColor\" }))));\nexport default SvgAdd;\n","import * as React from \"react\";\nconst SvgClose = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 5.64001L5.62988 18.37\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 18.37L5.62988 5.64001\", stroke: \"currentColor\" }));\nexport default SvgClose;\n","import * as React from \"react\";\nconst SvgMinus = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M17.3332 11.75H6.6665\", strokeWidth: 1.5, strokeLinecap: \"square\", strokeLinejoin: \"round\", vectorEffect: \"non-scaling-stroke\", fill: \"none\", stroke: \"currentColor\" }));\nexport default SvgMinus;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes, useState } from 'preact/compat';\nimport { Button, Icon } from '@adobe-commerce/elsie/components';\nimport { Minus, Add } from '@adobe-commerce/elsie/icons';\nimport { classes, VComponent } from '@adobe-commerce/elsie/lib';\nimport { useText } from '@adobe-commerce/elsie/i18n';\nimport '@/plp/components/Facet/Facet.css';\n\nexport interface FacetProps extends HTMLAttributes<HTMLDivElement> {\n  numberOfOptionsConfig?: number;\n  header: VNode;\n  buckets: VNode[];\n  last?: boolean;\n} \n\nexport const Facet: FunctionComponent<FacetProps> = ({ numberOfOptionsConfig = 5, header, buckets, last }) => {\n  const translations = useText({\n    showMore: 'Search.Facet.showMore',\n    showLess: 'Search.Facet.showLess',\n  });\n  const numberOfOptionsShown = numberOfOptionsConfig;\n  const [showMore, setShowMore] = useState(buckets.length < numberOfOptionsShown);\n\n  const numberOfOptions = showMore ? buckets.length : numberOfOptionsShown;\n\n  return (\n    <div className={classes(['product-discovery-facet', ['product-discovery-facet--last', last]])}>\n      <VComponent className=\"product-discovery-facet__header\" node={header} />\n      {buckets.slice(0, numberOfOptions).map((bucket, index) => {\n        return <VComponent key={index} className=\"product-discovery-facet__bucket\" node={bucket} />;\n      })}\n      {!showMore && buckets.length > numberOfOptionsShown && (\n        <Button variant=\"tertiary\" icon={<Icon source={Add} size=\"24\" />} onClick={(): void => setShowMore(!showMore)}>\n          {translations.showMore}\n        </Button>\n      )}\n      {showMore && buckets.length > numberOfOptionsShown && (\n        <Button\n          variant=\"tertiary\"\n          icon={<Icon source={Minus} size=\"24\" />}\n          onClick={(): void => setShowMore(!showMore)}\n        >\n          {translations.showLess}\n        </Button>\n      )}\n    </div>\n  );\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { VComponent } from '@adobe-commerce/elsie/lib';\nimport '@/plp/components/FacetList/FacetList.css';\n\nexport interface FacetListProps extends HTMLAttributes<HTMLDivElement> {\n  selectedFacets: VNode;\n  facets: VNode;\n}\n\nexport const FacetList: FunctionComponent<FacetListProps> = ({ selectedFacets, facets }) => {\n  return (\n    <>\n      <VComponent className=\"product-discovery-facet-list__selected-filters\" node={selectedFacets} />\n      <VComponent className=\"product-discovery-facet-list__facet-options\" node={facets} />\n    </>\n  );\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { SearchFacet } from '@/plp/data/models/api';\nimport { Product } from '@/plp/data/models/product';\nimport { PriceRange } from '@adobe-commerce/elsie/components';\n\nconst BOOLEAN_NO = 'no';\nconst BOOLEAN_YES = 'yes';\n\nconst getRangeFacetFilter = (facet: SearchFacet) => {\n  const selectedRange = facet.buckets.find((bucket) => bucket.selected);\n  if (!selectedRange) {\n    return null;\n  }\n  return {\n    attribute: facet.attribute,\n    range: {\n      from: selectedRange.from,\n      to: selectedRange.to,\n    },\n  };\n};\n\nconst getScalarFacetFilter = (facet: SearchFacet) => {\n  const scalarSelections = facet.buckets.reduce((accu, curr) => {\n    if (curr.selected) {\n      accu.push(curr.title);\n    }\n    return accu;\n  }, [] as string[]);\n  if (scalarSelections.length === 0) {\n    return null;\n  }\n  return {\n    attribute: facet.attribute,\n    in: scalarSelections,\n  };\n};\n\nconst getFilterSelection = (facet: SearchFacet) => {\n  switch (facet.buckets[0]?.__typename) {\n    case 'RangeBucket':\n      return getRangeFacetFilter(facet);\n    case 'ScalarBucket':\n    case 'CategoryView':\n      return getScalarFacetFilter(facet);\n    default:\n      break;\n  }\n};\n\nconst getCurrencyType = (items: Product[]) => {\n  const firstItem = items[0];\n  if (firstItem?.price?.regular?.amount?.currency) {\n    return firstItem.price.regular.amount.currency;\n  } else if (firstItem?.priceRange?.minimum?.regular?.amount?.currency) {\n    return firstItem?.priceRange?.minimum?.regular?.amount?.currency;\n  }\n  return 'USD'; // Default currency if not found\n};\n\nconst getRangeBucketLabel = (bucket: any, facet: SearchFacet, currency: string | null) => {\n  if (facet?.attribute === 'price') {\n    //Temp fix for Price range not handling value when minumum is zero\n    if (bucket.from === 0) {\n      return (\n        <div style={'display:flex'}>\n          <PriceRange amount={bucket.from} currency={currency || 'USD'} />\n          <span style={'padding: 0 2px'}>{'-'}</span>\n          <PriceRange amount={bucket.to} currency={currency || 'USD'} />\n        </div>\n      );\n    }\n    return (\n      <PriceRange minimumAmount={bucket.from} maximumAmount={bucket.to} currency={currency || 'USD'} display=\"dash\" />\n    );\n  }\n  return bucket.title;\n};\n\nconst getScalarBucketLabel = (bucket: any, facet: SearchFacet) => {\n  if (bucket.title === BOOLEAN_NO) {\n    return `Not ${facet.title}`;\n  } else if (bucket.title === BOOLEAN_YES) {\n    return facet.title;\n  }\n  return bucket.title;\n};\n\nconst getBucketLabel = (bucket: any, facet: SearchFacet, currency: string | null) => {\n  switch (bucket.__typename) {\n    case 'RangeBucket':\n      return getRangeBucketLabel(bucket, facet, currency);\n    case 'ScalarBucket':\n    case 'CategoryView':\n      return getScalarBucketLabel(bucket, facet);\n    default:\n      break;\n  }\n};\n\nexport { getBucketLabel, getCurrencyType, getFilterSelection };\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { HTMLAttributes, useEffect, useState } from 'preact/compat';\nimport { Container, Slot, SlotProps } from '@adobe-commerce/elsie/lib';\nimport { ProductSearchResult, SearchFilter, SearchFacet, SearchVariables, FacetBucket, Scope } from '@/plp/data/models/api';\nimport { getBucketLabel, getCurrencyType, getFilterSelection } from './utils/facetUtils';\nimport FacetList from '@/plp/components/FacetList';\nimport { Button, Checkbox, Icon, RadioButton } from '@adobe-commerce/elsie/components';\nimport { Facet } from '@/plp/components';\nimport { VNode } from 'preact';\nimport { Close } from '@adobe-commerce/elsie/icons';\nimport { events } from '@adobe-commerce/event-bus';\nimport { useText } from '@adobe-commerce/elsie/i18n';\nimport { search } from '@/plp/api';\n\nexport interface FacetsProps extends HTMLAttributes<HTMLDivElement> {\n  scope?: Scope;\n  slots?: {\n    Facet?: SlotProps<{ data: SearchFacet }>;\n    SelectedFacets?: SlotProps<{ data: SearchFacet[] }>;\n    Facets?: SlotProps<{ data: SearchFacet[] }>;\n    FacetBucket?: SlotProps<{ data: FacetBucket }>;\n    FacetBucketLabel?: SlotProps<{ data: FacetBucket }>;\n  };\n}\n\nexport const Facets: Container<FacetsProps> = ({ scope, slots }) => {\n  const labels = useText({\n    clearAll: 'Search.Facet.clearAll',\n  });\n\n  const [facetList, setFacetList] = useState<SearchFacet[]>([]);\n  const [currency, setCurrency] = useState<string | null>(null);\n  const [currentSearchVariables, setCurrentSearchVariables] = useState<SearchVariables>();\n\n  const handleSearchRequest = (searchVariables: SearchVariables): void => {\n    // Preserve any existing categoryPath filters from currentSearchVariables\n    const existingCategoryPathFilters = currentSearchVariables?.filter?.filter(\n      (filter) => filter.attribute === 'categoryPath'\n    ) || [];\n\n    search({\n      ...searchVariables,\n      filter: [...existingCategoryPathFilters, ...(searchVariables.filter || [])]\n    }, { scope });\n  };\n\n  const handleSearchResult = (payload: { result: ProductSearchResult; request: SearchVariables }): void => {\n    if (!payload || (!payload.result.facets && !payload.result.items && !payload.request.filter)) {\n      setFacetList([]);\n      return;\n    }\n\n    setCurrentSearchVariables(payload.request);\n\n    const { facets, items } = payload.result;\n\n    setCurrency(getCurrencyType(items));\n\n    const filterList = payload.request.filter;\n\n    if (facets) {\n      const facetsWithSelections = facets.map((facet: SearchFacet) => {\n        const selectedBuckets = facet.buckets.map((bucket) => {\n          bucket.selected = false;\n          const selectedFilter = filterList?.find((filter) => filter.attribute === facet.attribute);\n          if (selectedFilter) {\n            const selectedRange = selectedFilter.range;\n            if (selectedRange && bucket.from === selectedRange.from && bucket.to === selectedRange.to) {\n              bucket.selected = true;\n            } else if (selectedFilter.in && selectedFilter.in.includes(bucket.title)) {\n              bucket.selected = true;\n            }\n          }\n          return bucket;\n        });\n        facet.buckets = selectedBuckets;\n        return facet;\n      });\n\n      setFacetList(facetsWithSelections);\n    }\n  };\n\n  const updateFacetSelections = (facets: SearchFacet[]): void => {\n    const updatedFacetList = facetList.map((f) => {\n      const newFacet = facets.find((facet) => facet.attribute === f.attribute);\n      if (newFacet) {\n        return newFacet;\n      }\n      return f;\n    });\n    const selectedFilterList = updatedFacetList.reduce((accu: SearchFilter[], facet: SearchFacet) => {\n      const selectedFilter = getFilterSelection(facet);\n      if (selectedFilter) {\n        accu.push(selectedFilter as SearchFilter);\n      }\n      return accu;\n    }, [] as SearchFilter[]);\n    setFacetList(updatedFacetList);\n\n    if (currentSearchVariables) {\n      handleSearchRequest({ ...currentSearchVariables, filter: selectedFilterList });\n    }\n  };\n\n  const handleCancelSelection = (facet: SearchFacet, title: string): void => {\n    const newBuckets = facet.buckets.map((bucket) => {\n      if (bucket.title === title) {\n        bucket.selected = false;\n      }\n      return bucket;\n    });\n    const newFacet = facet;\n    newFacet.buckets = newBuckets;\n    updateFacetSelections([newFacet]);\n  };\n\n  const clearAllSelections = (): void => {\n    const updatedFacetList = facetList.map((facet) => {\n      const updatedBuckets = facet.buckets.map((bucket) => {\n        bucket.selected = false;\n        return bucket;\n      });\n      facet.buckets = updatedBuckets;\n      return facet;\n    });\n    setFacetList(updatedFacetList);\n    if (currentSearchVariables) {\n      handleSearchRequest({ ...currentSearchVariables, filter: [] });\n    }\n  };\n\n  const changeFilter = (event: any, facet: SearchFacet): void => {\n    const newBuckets = facet.buckets.map((bucket) => {\n      if (facet.buckets[0]?.__typename === 'RangeBucket') {\n        bucket.selected = false;\n      }\n      if (bucket.title === event.target.value) {\n        bucket.selected = event.target.checked;\n      }\n      return bucket;\n    });\n    const newFacet = facet;\n    newFacet.buckets = newBuckets;\n    updateFacetSelections([newFacet]);\n  };\n\n  const getFacetNode = (facet: SearchFacet, index: number): VNode => {\n    const header = <span>{facet.title}</span>;\n    const buckets = facet.buckets\n      .map((bucket: FacetBucket) => {\n        const bucketLabel = getBucketLabel(bucket, facet, currency);\n\n        const renderedBucketLabel = (count?: number) => (\n          <Slot name=\"FacetBucketLabel\"\n            slot={slots?.FacetBucketLabel}\n            context={{ data: bucket }}>\n            {bucketLabel} {count ? `(${count})` : ''}\n          </Slot>\n        );\n\n        switch (facet.buckets[0]?.__typename) {\n          case 'RangeBucket':\n            return (\n              <Slot name=\"FacetBucket\" slot={slots?.FacetBucket} context={{ data: bucket }}>\n                <RadioButton\n                  data-testid={`${bucket.title}-radio`}\n                  label={renderedBucketLabel()}\n                  name={facet.attribute}\n                  value={bucket.title}\n                  checked={bucket.selected}\n                  onChange={(event): void => {\n                    changeFilter(event, facet);\n                  }}\n                />\n              </Slot>\n            ) as VNode;\n          case 'ScalarBucket':\n          case 'CategoryView':\n            return (\n              <Slot name=\"FacetBucket\" slot={slots?.FacetBucket} context={{ data: bucket }}>\n                <Checkbox\n                  data-testid={`${bucket.title}-checkbox`}\n                  label={renderedBucketLabel(bucket.count)}\n                  name={facet.attribute}\n                  value={bucket.title}\n                  checked={bucket.selected}\n                  onChange={(event): void => {\n                    changeFilter(event, facet);\n                  }}\n                />\n              </Slot>\n            ) as VNode;\n          default:\n            return null;\n        }\n      })\n      .filter((bucket) => bucket !== null);\n\n    return <Facet header={header} buckets={buckets} last={index === facetList.length - 1} />\n  };\n\n  const getFacetsNode = (): VNode => {\n    return (\n      <Slot name=\"Facets\" slot={slots?.Facets} context={{ data: facetList }}>\n        {facetList.map((facet, index) => {\n          return facet.buckets.length > 0\n            ? ((\n              <>\n                <Slot name=\"Facet\" slot={slots?.Facet} context={{ data: facet }}>\n                  {getFacetNode(facet, index)}\n                </Slot>\n              </>\n            ) as VNode)\n            : null;\n        })}\n      </Slot>\n    );\n  };\n\n  const getSelectedFacetsNode = (): VNode => {\n    const selectedFacets = facetList.reduce((accu, curr) => {\n      const selected = curr.buckets.filter((bucket: FacetBucket) => bucket.selected);\n      if (selected.length > 0) {\n        accu.push(curr);\n      }\n      return accu;\n    }, [] as SearchFacet[]);\n    const selectedFilterBtns = selectedFacets.map((facet) => {\n      return facet.buckets.map((bucket) => {\n        if (bucket.selected) {\n          const bucketTitle = getBucketLabel(bucket, facet, currency);\n          return (\n            <Button\n              data-testid={`${bucket.title}-selected-btn`}\n              aria-label={`Remove ${facet.title} filter: ${bucket.title}`}\n              variant=\"secondary\"\n              children={\n                <>\n                  <span>{bucketTitle}</span>\n                  <Icon source={Close} size=\"16\" />\n                </>\n              }\n              onClick={(): void => {\n                handleCancelSelection(facet, bucket.title);\n              }}\n            />\n          ) as VNode;\n        }\n        return null;\n      });\n    });\n\n    const clearAllBtn =\n      selectedFilterBtns.length > 0 ? (\n        <Button\n          variant=\"secondary\"\n          onClick={(): void => {\n            clearAllSelections();\n          }}\n        >\n          <span>{labels.clearAll}</span>\n        </Button>\n      ) : null;\n    return (\n      <Slot name=\"SelectedFacets\" slot={slots?.SelectedFacets} context={{ data: selectedFacets }}>\n        {selectedFilterBtns}\n        {clearAllBtn}\n      </Slot>\n    );\n  };\n\n  useEffect(() => {\n    const dataEvents = events.on('search/result', handleSearchResult, { eager: true, scope });\n\n    return () => {\n      dataEvents?.off();\n    };\n  }, []);\n\n  return <FacetList selectedFacets={getSelectedFacetsNode()} facets={getFacetsNode()} />;\n};\n"],"names":["SvgAdd","props","React","SvgClose","SvgMinus","Facet","numberOfOptionsConfig","header","buckets","last","translations","useText","numberOfOptionsShown","showMore","setShowMore","useState","numberOfOptions","jsxs","classes","jsx","VComponent","bucket","index","Button","Icon","Add","Minus","FacetList","selectedFacets","facets","Fragment","BOOLEAN_NO","BOOLEAN_YES","getRangeFacetFilter","facet","selectedRange","getScalarFacetFilter","scalarSelections","accu","curr","getFilterSelection","_a","getCurrencyType","items","firstItem","_c","_b","_g","_f","_e","_d","_k","_j","_i","_h","getRangeBucketLabel","currency","PriceRange","getScalarBucketLabel","getBucketLabel","Facets","scope","slots","labels","facetList","setFacetList","setCurrency","currentSearchVariables","setCurrentSearchVariables","handleSearchRequest","searchVariables","existingCategoryPathFilters","filter","search","handleSearchResult","payload","filterList","facetsWithSelections","selectedBuckets","selectedFilter","updateFacetSelections","updatedFacetList","f","newFacet","selectedFilterList","handleCancelSelection","title","newBuckets","clearAllSelections","updatedBuckets","changeFilter","event","getFacetNode","bucketLabel","renderedBucketLabel","count","Slot","RadioButton","Checkbox","getFacetsNode","getSelectedFacetsNode","selectedFilterBtns","bucketTitle","Close","clearAllBtn","useEffect","dataEvents","events"],"mappings":"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","x_google_ignoreList":[0,1,2]}