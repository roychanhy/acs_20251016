{"version":3,"file":"search.js","sources":["/@dropins/storefront-product-discovery/src/api/fetch-graphql/fetch-graphql.ts","/@dropins/storefront-product-discovery/src/data/transforms/product.ts","/@dropins/storefront-product-discovery/src/data/transforms/api.ts","/@dropins/storefront-product-discovery/src/api/search/graphql/search.graphql.ts","/@dropins/storefront-product-discovery/src/api/search/search.ts"],"sourcesContent":["/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { FetchGraphQL } from '@adobe-commerce/fetch-graphql';\n\nexport const {\n  setEndpoint,\n  setFetchGraphQlHeader,\n  removeFetchGraphQlHeader,\n  setFetchGraphQlHeaders,\n  fetchGraphQl,\n  getConfig,\n} = new FetchGraphQL().getMethods();\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\nimport { merge } from '@adobe-commerce/elsie/lib';\nimport { config } from '@/plp/api/initialize/initialize';\nimport { Product } from '../models/product';\n\nexport const transformProduct = (data: any): Product | null => {\n  // check if data is null or undefined, and if so return an empty object\n  if (!data) {\n    return {\n      id: '',\n      name: '',\n      sku: '',\n      shortDescription: '',\n      url: '',\n      urlKey: '',\n      metaTitle: '',\n      metaKeywords: '',\n      metaDescription: '',\n      lowStock: false,\n      links: [],\n      images: [],\n      description: '',\n      externalId: '',\n      inputOptions: [],\n      addToCartAllowed: false,\n      price: undefined,\n      priceRange: undefined,\n      inStock: false,\n      typename: '',\n    };\n  }\n\n  const transformedProduct = {\n    id: data?.id || '',\n    name: data?.name || '',\n    sku: data?.sku || '',\n    shortDescription: data?.shortDescription || '',\n    url: data?.url || '',\n    urlKey: data?.urlKey || '',\n    metaTitle: data?.metaTitle || '',\n    metaKeywords: data?.metaKeywords || '',\n    metaDescription: data?.metaDescription || '',\n    lowStock: data?.lowStock || false,\n    links: data?.links || [],\n    images:\n      data?.images?.map((image: any) => ({\n        label: image.label || '',\n        roles: image.roles || [],\n        url: image.url?.replace(/^https?:\\/\\//, '//') || '',\n      })) || [],\n    description: data?.description || '',\n    externalId: data?.externalId || '',\n    inputOptions: data?.inputOptions || [],\n    addToCartAllowed: data?.addToCartAllowed || false,\n    price: data.price\n      ? {\n          final: {\n            amount: {\n              value: data?.price?.final?.amount?.value || 0,\n              currency: data?.price?.final?.amount?.currency || '',\n            },\n          },\n          regular: {\n            amount: {\n              value: data?.price?.regular?.amount?.value || 0,\n              currency: data?.price?.regular?.amount?.currency || '',\n            },\n          },\n          roles: data?.price?.roles || [],\n        }\n      : undefined,\n    priceRange: data?.priceRange\n      ? {\n          minimum: {\n            final: {\n              amount: {\n                value: data?.priceRange?.minimum?.final?.amount?.value || 0,\n                currency: data?.priceRange?.minimum?.final?.amount?.currency || '',\n              },\n            },\n            regular: {\n              amount: {\n                value: data?.priceRange?.minimum?.regular?.amount?.value || 0,\n                currency: data?.priceRange?.minimum?.regular?.amount?.currency || '',\n              },\n            },\n          },\n          maximum: {\n            final: {\n              amount: {\n                value: data?.priceRange?.maximum?.final?.amount?.value || 0,\n                currency: data?.priceRange?.maximum?.final?.amount?.currency || '',\n              },\n            },\n            regular: {\n              amount: {\n                value: data?.priceRange?.maximum?.regular?.amount?.value || 0,\n                currency: data?.priceRange?.maximum?.regular?.amount?.currency || '',\n              },\n            },\n          },\n        }\n      : undefined,\n    inStock: data?.inStock || false,\n    typename: data?.__typename || '',\n  };\n\n  return merge(\n    transformedProduct, // default transformer\n    config.getConfig().models?.Product?.transformer?.(data), // custom transformer\n  )\n};\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\nimport { merge } from '@adobe-commerce/elsie/lib';\nimport { config } from '@/plp/api/initialize/initialize';\nimport { ProductSearchResult, SearchVariables } from '@/plp/data/models';\nimport { Product } from '@/plp/data/models/product';\n\nimport { transformProduct } from './product';\n\n\nexport function transformProductSearchResponse(data: any, searchVariables?: SearchVariables): ProductSearchResult {\n  const productSearch = data?.productSearch;\n\n  const transformedResponse: ProductSearchResult = {\n    facets: transformFacets(productSearch?.facets || [], searchVariables),\n    items: productSearch?.items.map((product: any) => transformProduct(product?.productView)) || [],\n    pageInfo: {\n      currentPage: productSearch?.page_info?.current_page || 1,\n      totalPages: productSearch?.page_info?.total_pages || 1,\n      totalItems: productSearch?.page_info?.total_items || 0,\n      pageSize: productSearch?.page_info?.page_size || 10, //replace with default constant\n    },\n    totalCount: productSearch?.total_count || 0,\n    metadata: {\n      filterableAttributes: data?.attributeMetadata?.filterableInSearch || [],\n      sortableAttributes: transformSortAttributes(data?.attributeMetadata?.sortable || [], searchVariables),\n    }\n  };\n  return merge(\n    transformedResponse, // default transformer\n    config.getConfig().models?.ProductSearchResult?.transformer?.(data), // custom transformer\n  );\n}\n\nexport const transformSearchResultProducts = (searchResponse: { productSearch: { items: any[] } }): Product[] =>\n  searchResponse?.productSearch?.items?.reduce<Product[]>((returnedProductList, productItem) => {\n    if (!productItem?.productView) return returnedProductList; // Skip if no productView and product is null\n\n    const transformed = transformProduct(productItem.productView);\n    if (transformed) {\n      returnedProductList.push(transformed);\n    }\n\n    return returnedProductList;\n  }, []) || [];\n\nfunction transformSortAttributes(sortableAttributes: any[] = [], searchVariables?: SearchVariables): any[] {\n  if (!sortableAttributes || sortableAttributes.length === 0) {\n    return [];\n  }\n\n  return sortableAttributes\n    .filter((option) => {\n      // Only include position attribute if there's a category filter\n      if (option.attribute === 'position') {\n        const hasCategoryFilter = searchVariables?.filter?.some(\n          (filter) => filter.attribute === 'categoryPath'\n        );\n        return hasCategoryFilter;\n      }\n\n      // Include all other attributes\n      return true;\n    })\n    .map((option) => ({\n      ...option,\n      bidirectional: option.attribute === 'price',\n    }));\n}\n\nfunction transformFacets(facets: any[] = [], searchVariables?: SearchVariables): any[] {\n  if (!facets || facets.length === 0) {\n    return [];\n  }\n\n  const hasCategoryPathFilter = searchVariables?.filter?.some(\n    (filter) => filter.attribute === 'categoryPath'\n  );\n\n  // if hasCategoryPathFilter, then we need to remove facets with attribute 'categories'\n  if (hasCategoryPathFilter) {\n    return facets.filter((facet) => facet.attribute !== 'categories');\n  }\n\n  return facets;\n}\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { Facet, ProductView } from '../../graphql/fragments.graphql';\n\nconst PRODUCT_SEARCH_QUERY = /* GraphQL */ `\n  query productSearch(\n    $phrase: String!\n    $pageSize: Int\n    $currentPage: Int = 1\n    $filter: [SearchClauseInput!]\n    $sort: [ProductSearchSortInput!]\n    $context: QueryContextInput\n  ) {\n    attributeMetadata {\n      sortable {\n        label\n        attribute\n        numeric\n      }\n      filterableInSearch {\n        label\n        attribute\n        numeric\n      }\n    }\n\n    productSearch(\n      phrase: $phrase\n      page_size: $pageSize\n      current_page: $currentPage\n      filter: $filter\n      sort: $sort\n      context: $context\n    ) {\n      total_count\n      items {\n        ...ProductView\n      }\n      facets {\n        ...Facet\n      }\n      page_info {\n        current_page\n        page_size\n        total_pages\n      }\n    }\n  }\n  ${ProductView}\n  ${Facet}\n`;\n\nexport { PRODUCT_SEARCH_QUERY };\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this \n * file in accordance with the terms of the Adobe license agreement \n * accompanying it. \n *******************************************************************/\n\nimport { ProductSearchResult, Scope, SearchVariables } from '@/plp/data/models';\nimport { fetchGraphQl } from '@/plp/api';\nimport { transformProductSearchResponse } from '@/plp/data/transforms';\nimport { events } from '@adobe-commerce/event-bus';\nimport { PRODUCT_SEARCH_QUERY } from './graphql/search.graphql';\nimport { \n  searchRequestSent, \n  searchResponseReceived, \n  updateSearchInputCtx,\n  updateSearchResultsCtx,\n  SEARCH_UNIT_ID, \n  PLP_UNIT_ID,\n} from '@/plp/utils/acdlEvents';\n\ntype SearchOptions = {\n  scope?: Scope;\n}\n\nexport const search = async (request: SearchVariables | null, options: SearchOptions = {}): Promise<ProductSearchResult> => {\n  const scope = options.scope === 'search' ? undefined : options.scope;\n\n  // empty result\n  const emptyResult = {\n    request: request || {} ,\n    result: {\n      facets: [],\n      pageInfo: { currentPage: 0, totalPages: 0, totalItems: 0, pageSize: 0 },\n      items: [],\n      totalCount: 0,\n      suggestions: [],\n      metadata: {\n        filterableAttributes: [],\n        sortableAttributes: []\n      }\n    }\n  };\n\n  // clear search results if no request are provided\n  if (request === null) {\n    events.emit('search/result', emptyResult, { scope });\n    return emptyResult.result;\n  }\n\n\n  // Emit loading state\n  events.emit('search/loading', true, { scope });\n\n  try {\n    const acdlUnitId = scope === 'popover' ? SEARCH_UNIT_ID : PLP_UNIT_ID;\n    const searchRequestId = window.crypto.randomUUID();\n\n    // Update search input context in ACDL\n    updateSearchInputCtx(\n      acdlUnitId,\n      searchRequestId,\n      request.phrase || '',\n      request.filter || [],\n      request.pageSize || 0,\n      request.currentPage || 0,\n      request.sort || [],\n    );\n\n    // Publish search request event to ACDL\n    searchRequestSent(acdlUnitId);\n\n    // Execute search with validated request\n    const { errors, data } = await fetchGraphQl(PRODUCT_SEARCH_QUERY, {\n      method: 'GET',\n      variables: { ...request },\n    });\n\n    if (errors && !data) {\n      throw new Error('Error fetching product search');\n    }\n\n    const result = transformProductSearchResponse(data, request);\n\n    // Update search results context in ACDL\n    updateSearchResultsCtx(acdlUnitId, searchRequestId, result);\n\n    // Publish search response event to ACDL\n    searchResponseReceived(acdlUnitId)\n\n    // Emit single event with result and metadata\n    events.emit('search/result', { request, result }, { scope });\n\n    return result;\n\n  } catch (error) {\n    // Emit error event\n    events.emit('search/error', (error as Error).message, { scope });\n\n    // Emit result event with empty result\n    events.emit('search/result', emptyResult, { scope });\n\n    throw error;\n  } finally {\n    // Reset loading state\n    events.emit('search/loading', false, { scope });\n  }\n};"],"names":["setEndpoint","setFetchGraphQlHeader","removeFetchGraphQlHeader","setFetchGraphQlHeaders","fetchGraphQl","getConfig","FetchGraphQL","transformProduct","data","transformedProduct","_a","image","_d","_c","_b","_g","_f","_e","_j","_i","_h","_m","_l","_k","_n","_r","_q","_p","_o","_v","_u","_t","_s","_z","_y","_x","_w","_D","_C","_B","_A","_H","_G","_F","_E","_L","_K","_J","_I","_P","_O","_N","_M","_T","_S","_R","_Q","merge","_W","_V","_U","config","transformProductSearchResponse","searchVariables","productSearch","transformedResponse","transformFacets","product","transformSortAttributes","sortableAttributes","option","filter","facets","facet","PRODUCT_SEARCH_QUERY","ProductView","Facet","search","request","options","scope","emptyResult","events","acdlUnitId","SEARCH_UNIT_ID","PLP_UNIT_ID","searchRequestId","updateSearchInputCtx","searchRequestSent","errors","result","updateSearchResultsCtx","searchResponseReceived","error"],"mappings":"iVAWO,KAAM,CACX,YAAAA,GACA,sBAAAC,GACA,yBAAAC,GACA,uBAAAC,GACA,aAAAC,GACA,UAAAC,EACF,EAAI,IAAIC,GAAA,EAAe,WAAA,ECNVC,GAAoBC,GAA8B,uGAE7D,GAAI,CAACA,EACH,MAAO,CACL,GAAI,GACJ,KAAM,GACN,IAAK,GACL,iBAAkB,GAClB,IAAK,GACL,OAAQ,GACR,UAAW,GACX,aAAc,GACd,gBAAiB,GACjB,SAAU,GACV,MAAO,CAAA,EACP,OAAQ,CAAA,EACR,YAAa,GACb,WAAY,GACZ,aAAc,CAAA,EACd,iBAAkB,GAClB,MAAO,OACP,WAAY,OACZ,QAAS,GACT,SAAU,EAAA,EAId,MAAMC,EAAqB,CACzB,IAAID,GAAA,YAAAA,EAAM,KAAM,GAChB,MAAMA,GAAA,YAAAA,EAAM,OAAQ,GACpB,KAAKA,GAAA,YAAAA,EAAM,MAAO,GAClB,kBAAkBA,GAAA,YAAAA,EAAM,mBAAoB,GAC5C,KAAKA,GAAA,YAAAA,EAAM,MAAO,GAClB,QAAQA,GAAA,YAAAA,EAAM,SAAU,GACxB,WAAWA,GAAA,YAAAA,EAAM,YAAa,GAC9B,cAAcA,GAAA,YAAAA,EAAM,eAAgB,GACpC,iBAAiBA,GAAA,YAAAA,EAAM,kBAAmB,GAC1C,UAAUA,GAAA,YAAAA,EAAM,WAAY,GAC5B,OAAOA,GAAA,YAAAA,EAAM,QAAS,CAAA,EACtB,SACEE,EAAAF,GAAA,YAAAA,EAAM,SAAN,YAAAE,EAAc,IAAKC,GAAA,OAAgB,OACjC,MAAOA,EAAM,OAAS,GACtB,MAAOA,EAAM,OAAS,CAAA,EACtB,MAAKD,EAAAC,EAAM,MAAN,YAAAD,EAAW,QAAQ,eAAgB,QAAS,EAAA,MAC5C,CAAA,EACT,aAAaF,GAAA,YAAAA,EAAM,cAAe,GAClC,YAAYA,GAAA,YAAAA,EAAM,aAAc,GAChC,cAAcA,GAAA,YAAAA,EAAM,eAAgB,CAAA,EACpC,kBAAkBA,GAAA,YAAAA,EAAM,mBAAoB,GAC5C,MAAOA,EAAK,MACR,CACE,MAAO,CACL,OAAQ,CACN,QAAOI,GAAAC,GAAAC,EAAAN,GAAA,YAAAA,EAAM,QAAN,YAAAM,EAAa,QAAb,YAAAD,EAAoB,SAApB,YAAAD,EAA4B,QAAS,EAC5C,WAAUG,GAAAC,GAAAC,EAAAT,GAAA,YAAAA,EAAM,QAAN,YAAAS,EAAa,QAAb,YAAAD,EAAoB,SAApB,YAAAD,EAA4B,WAAY,EAAA,CACpD,EAEF,QAAS,CACP,OAAQ,CACN,QAAOG,GAAAC,GAAAC,EAAAZ,GAAA,YAAAA,EAAM,QAAN,YAAAY,EAAa,UAAb,YAAAD,EAAsB,SAAtB,YAAAD,EAA8B,QAAS,EAC9C,WAAUG,GAAAC,GAAAC,EAAAf,GAAA,YAAAA,EAAM,QAAN,YAAAe,EAAa,UAAb,YAAAD,EAAsB,SAAtB,YAAAD,EAA8B,WAAY,EAAA,CACtD,EAEF,QAAOG,EAAAhB,GAAA,YAAAA,EAAM,QAAN,YAAAgB,EAAa,QAAS,CAAA,CAAC,EAEhC,OACJ,WAAYhB,GAAA,MAAAA,EAAM,WACd,CACE,QAAS,CACP,MAAO,CACL,OAAQ,CACN,QAAOiB,GAAAC,GAAAC,GAAAC,EAAApB,GAAA,YAAAA,EAAM,aAAN,YAAAoB,EAAkB,UAAlB,YAAAD,EAA2B,QAA3B,YAAAD,EAAkC,SAAlC,YAAAD,EAA0C,QAAS,EAC1D,WAAUI,GAAAC,GAAAC,GAAAC,EAAAxB,GAAA,YAAAA,EAAM,aAAN,YAAAwB,EAAkB,UAAlB,YAAAD,EAA2B,QAA3B,YAAAD,EAAkC,SAAlC,YAAAD,EAA0C,WAAY,EAAA,CAClE,EAEF,QAAS,CACP,OAAQ,CACN,QAAOI,GAAAC,GAAAC,GAAAC,EAAA5B,GAAA,YAAAA,EAAM,aAAN,YAAA4B,EAAkB,UAAlB,YAAAD,EAA2B,UAA3B,YAAAD,EAAoC,SAApC,YAAAD,EAA4C,QAAS,EAC5D,WAAUI,GAAAC,GAAAC,GAAAC,EAAAhC,GAAA,YAAAA,EAAM,aAAN,YAAAgC,EAAkB,UAAlB,YAAAD,EAA2B,UAA3B,YAAAD,EAAoC,SAApC,YAAAD,EAA4C,WAAY,EAAA,CACpE,CACF,EAEF,QAAS,CACP,MAAO,CACL,OAAQ,CACN,QAAOI,GAAAC,GAAAC,GAAAC,EAAApC,GAAA,YAAAA,EAAM,aAAN,YAAAoC,EAAkB,UAAlB,YAAAD,EAA2B,QAA3B,YAAAD,EAAkC,SAAlC,YAAAD,EAA0C,QAAS,EAC1D,WAAUI,GAAAC,GAAAC,GAAAC,EAAAxC,GAAA,YAAAA,EAAM,aAAN,YAAAwC,EAAkB,UAAlB,YAAAD,EAA2B,QAA3B,YAAAD,EAAkC,SAAlC,YAAAD,EAA0C,WAAY,EAAA,CAClE,EAEF,QAAS,CACP,OAAQ,CACN,QAAOI,GAAAC,GAAAC,GAAAC,EAAA5C,GAAA,YAAAA,EAAM,aAAN,YAAA4C,EAAkB,UAAlB,YAAAD,EAA2B,UAA3B,YAAAD,EAAoC,SAApC,YAAAD,EAA4C,QAAS,EAC5D,WAAUI,GAAAC,GAAAC,GAAAC,EAAAhD,GAAA,YAAAA,EAAM,aAAN,YAAAgD,EAAkB,UAAlB,YAAAD,EAA2B,UAA3B,YAAAD,EAAoC,SAApC,YAAAD,EAA4C,WAAY,EAAA,CACpE,CACF,CACF,EAEF,OACJ,SAAS7C,GAAA,YAAAA,EAAM,UAAW,GAC1B,UAAUA,GAAA,YAAAA,EAAM,aAAc,EAAA,EAGhC,OAAOiD,GACLhD,GACAiD,GAAAC,GAAAC,EAAAC,GAAO,UAAA,EAAY,SAAnB,YAAAD,EAA2B,UAA3B,YAAAD,EAAoC,cAApC,YAAAD,EAAA,KAAAC,EAAkDnD,EAAI,CAE1D,ECtGO,SAASsD,GAA+BtD,EAAWuD,EAAwD,uBAChH,MAAMC,EAAgBxD,GAAA,YAAAA,EAAM,cAEtByD,EAA2C,CAC/C,OAAQC,IAAgBF,GAAA,YAAAA,EAAe,SAAU,CAAA,EAAID,CAAe,EACpE,OAAOC,GAAA,YAAAA,EAAe,MAAM,IAAKG,GAAiB5D,GAAiB4D,GAAA,YAAAA,EAAS,WAAW,KAAM,CAAA,EAC7F,SAAU,CACR,cAAazD,EAAAsD,GAAA,YAAAA,EAAe,YAAf,YAAAtD,EAA0B,eAAgB,EACvD,aAAYI,EAAAkD,GAAA,YAAAA,EAAe,YAAf,YAAAlD,EAA0B,cAAe,EACrD,aAAYD,EAAAmD,GAAA,YAAAA,EAAe,YAAf,YAAAnD,EAA0B,cAAe,EACrD,WAAUD,EAAAoD,GAAA,YAAAA,EAAe,YAAf,YAAApD,EAA0B,YAAa,EAAA,EAEnD,YAAYoD,GAAA,YAAAA,EAAe,cAAe,EAC1C,SAAU,CACR,uBAAsB/C,EAAAT,GAAA,YAAAA,EAAM,oBAAN,YAAAS,EAAyB,qBAAsB,CAAA,EACrE,mBAAoBmD,KAAwBpD,EAAAR,GAAA,YAAAA,EAAM,oBAAN,YAAAQ,EAAyB,WAAY,CAAA,EAAI+C,CAAe,CAAA,CACtG,EAEF,OAAON,GACLQ,GACA9C,GAAAC,GAAAL,EAAA8C,GAAO,UAAA,EAAY,SAAnB,YAAA9C,EAA2B,sBAA3B,YAAAK,EAAgD,cAAhD,YAAAD,EAAA,KAAAC,EAA8DZ,EAAI,CAEtE,CAcA,SAAS4D,GAAwBC,EAA4B,CAAA,EAAIN,EAA0C,CACzG,MAAI,CAACM,GAAsBA,EAAmB,SAAW,EAChD,CAAA,EAGFA,EACJ,OAAQC,GAAW,OAElB,OAAIA,EAAO,YAAc,YACG5D,EAAAqD,GAAA,YAAAA,EAAiB,SAAjB,YAAArD,EAAyB,KAChD6D,GAAWA,EAAO,YAAc,gBAM9B,EACT,CAAC,EACA,IAAKD,IAAY,CAChB,GAAGA,EACH,cAAeA,EAAO,YAAc,OAAA,EACpC,CACN,CAEA,SAASJ,GAAgBM,EAAgB,CAAA,EAAIT,EAA0C,OACrF,MAAI,CAACS,GAAUA,EAAO,SAAW,EACxB,CAAA,IAGqB9D,EAAAqD,GAAA,YAAAA,EAAiB,SAAjB,YAAArD,EAAyB,KACpD6D,GAAWA,EAAO,YAAc,iBAK1BC,EAAO,OAAQC,GAAUA,EAAM,YAAc,YAAY,EAG3DD,CACT,CChFA,MAAME,GAAqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA4CvCC,EAAW;AAAA,IACXC,EAAK;AAAA,EC7BIC,GAAS,MAAOC,EAAiCC,EAAyB,KAAqC,CAC1H,MAAMC,EAAQD,EAAQ,QAAU,SAAW,OAAYA,EAAQ,MAGzDE,EAAc,CAClB,QAASH,GAAW,CAAA,EACpB,OAAQ,CACN,OAAQ,CAAA,EACR,SAAU,CAAE,YAAa,EAAG,WAAY,EAAG,WAAY,EAAG,SAAU,CAAA,EACpE,MAAO,CAAA,EACP,WAAY,EACZ,YAAa,CAAA,EACb,SAAU,CACR,qBAAsB,CAAA,EACtB,mBAAoB,CAAA,CAAC,CACvB,CACF,EAIF,GAAIA,IAAY,KACd,OAAAI,EAAO,KAAK,gBAAiBD,EAAa,CAAE,MAAAD,EAAO,EAC5CC,EAAY,OAKrBC,EAAO,KAAK,iBAAkB,GAAM,CAAE,MAAAF,EAAO,EAE7C,GAAI,CACF,MAAMG,EAAaH,IAAU,UAAYI,GAAiBC,GACpDC,EAAkB,OAAO,OAAO,WAAA,EAGtCC,GACEJ,EACAG,EACAR,EAAQ,QAAU,GAClBA,EAAQ,QAAU,CAAA,EAClBA,EAAQ,UAAY,EACpBA,EAAQ,aAAe,EACvBA,EAAQ,MAAQ,CAAA,CAAC,EAInBU,GAAkBL,CAAU,EAG5B,KAAM,CAAE,OAAAM,EAAQ,KAAAjF,CAAA,EAAS,MAAMJ,GAAasE,GAAsB,CAChE,OAAQ,MACR,UAAW,CAAE,GAAGI,CAAA,CAAQ,CACzB,EAED,GAAIW,GAAU,CAACjF,EACb,MAAM,IAAI,MAAM,+BAA+B,EAGjD,MAAMkF,EAAS5B,GAA+BtD,EAAMsE,CAAO,EAG3D,OAAAa,GAAuBR,EAAYG,EAAiBI,CAAM,EAG1DE,GAAuBT,CAAU,EAGjCD,EAAO,KAAK,gBAAiB,CAAE,QAAAJ,EAAS,OAAAY,GAAU,CAAE,MAAAV,EAAO,EAEpDU,CAET,OAASG,EAAO,CAEd,MAAAX,EAAO,KAAK,eAAiBW,EAAgB,QAAS,CAAE,MAAAb,EAAO,EAG/DE,EAAO,KAAK,gBAAiBD,EAAa,CAAE,MAAAD,EAAO,EAE7Ca,CACR,QAAA,CAEEX,EAAO,KAAK,iBAAkB,GAAO,CAAE,MAAAF,EAAO,CAChD,CACF"}